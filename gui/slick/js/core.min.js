function getMeta(a){return $('meta[data-var="'+a+'"]').data("content")}function metaToBool(a){var b=$('meta[data-var="'+a+'"]').data("content");return void 0===b?(console.log(a+" is empty, did you forget to add this to main.mako?"),b):(b=isNaN(b)?b.toLowerCase():b.toString(),!("false"===b||"none"===b||"0"===b))}function isMeta(a,b){var c=new RegExp(b.length>1?b.join("|"):b);return c.test($('meta[data-var="'+a+'"]').data("content"))}var srRoot=getMeta("srRoot"),srDefaultPage=getMeta("srDefaultPage"),srPID=getMeta("srPID"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+srRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif" height="16" width="16" />',configSuccess=function(){$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),window.location.href=srRoot+"/config/providers/"}),$("#email_show").trigger("notify"),$("#prowl_show").trigger("notify")},SICKRAGE={common:{init:function(){!function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}(),$.confirm.options={confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(a){location.href=a.context.href}},$("a.shutdown").confirm({title:"Shutdown",text:"Are you sure you want to shutdown SickRage?"}),$("a.restart").confirm({title:"Restart",text:"Are you sure you want to restart SickRage?"}),$("a.removeshow").confirm({title:"Remove Show",text:'Are you sure you want to remove <span class="footerhighlight">'+$("#showtitle").data("showname")+'</span> from the database?<br><br><input type="checkbox" id="deleteFiles"> <span class="red-text">Check to delete files as well. IRREVERSIBLE</span></input>',confirm:function(a){location.href=a.context.href+($("#deleteFiles")[0].checked?"&full=1":"")}}),$("a.clearhistory").confirm({title:"Clear History",text:"Are you sure you want to clear all download history?"}),$("a.trimhistory").confirm({title:"Trim History",text:"Are you sure you want to trim all download history older than 30 days?"}),$("a.submiterrors").confirm({title:"Submit Errors",text:'Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SickRage is updated and trigger<br> this error with debug enabled before submitting</span>'}),$("#config-components").tabs({activate:function(a,b){var c=$(this).data("lastOpenedPanel");c||(c=$(b.oldPanel)),$(this).data("topPositionTab")||$(this).data("topPositionTab",$(b.newPanel).position().top),$(b.newPanel).hide().fadeIn(0),c&&c.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")}),$(this).data("lastOpenedPanel",$(b.newPanel))}}),(navigator.maxTouchPoints||0)<2&&$(".dropdown-toggle").on("click",function(){var a=$(this);"true"===a.attr("aria-expanded")&&(window.location.href=a.attr("href"))}),metaToBool("sickbeard.FUZZY_DATING")&&($.timeago.settings.allowFuture=!0,$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},$("[datetime]").timeago()),$(document.body).on("click","a[data-no-redirect]",function(a){return a.preventDefault(),$.get($(this).attr("href")),!1}),$(document.body).on("click",".bulkCheck",function(){var a=this,b=$(a).attr("id");$("."+b+":visible").each(function(){$(this).prop("checked",$(a).prop("checked"))})})}},config:{init:function(){$("#config-components").tabs(),$(".enabler").each(function(){$(this).prop("checked")||$("#content_"+$(this).attr("id")).hide()}),$(".enabler").on("click",function(){$(this).prop("checked")?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")}),$(".viewIf").on("click",function(){$(this).prop("checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").on("click",function(){var a=$("#date_presets").val();$(this).prop("checked")&&"%x"===a?(a="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).prop("checked")||"1"!==$("#date_use_system_default").html()||(a="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),a&&$("#date_presets").val(a)}),$("#configForm").ajaxForm({beforeSubmit:function(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success:function(){setTimeout(function(){"use strict";configSuccess()},2e3)}}),$("#api_key").on("click",function(){$("#api_key").select()}),$("#generate_new_apikey").on("click",function(){$.get(srRoot+"/config/general/generateApiKey",function(a){return void 0!==a.error?void alert(a.error):void $("#api_key").val(a)})}),$("#branchCheckout").on("click",function(){var a=srRoot+"/home/branchCheckout?branch="+$("#branchVersion").val(),b=srRoot+"/home/getDBcompare";$.getJSON(b,function(b){"success"===b.status&&("equal"===b.message&&(window.location.href=a),"upgrade"===b.message&&confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")&&(window.location.href=a),"downgrade"===b.message&&alert("Can't switch branch as this will result in a database downgrade."))})})},index:function(){0===$("input[name='proxy_setting']").val().length&&($("input[id='proxy_indexers']").prop("checked",!1),$("label[for='proxy_indexers']").hide()),$("input[name='proxy_setting']").on("input",function(){0===$(this).val().length?($("input[id='proxy_indexers']").prop("checked",!1),$("label[for='proxy_indexers']").hide()):$("label[for='proxy_indexers']").show()}),$("#log_dir").fileBrowser({title:"Select log file folder location"})},backupRestore:function(){$("#Backup").on("click",function(){$("#Backup").attr("disabled",!0),$("#Backup-result").html(loading);var a=$("#backupDir").val();$.get(srRoot+"/config/backuprestore/backup",{backupDir:a}).done(function(a){$("#Backup-result").html(a),$("#Backup").attr("disabled",!1)})}),$("#Restore").on("click",function(){$("#Restore").attr("disabled",!0),$("#Restore-result").html(loading);var a=$("#backupFile").val();$.get(srRoot+"/config/backuprestore/restore",{backupFile:a}).done(function(a){$("#Restore-result").html(a),$("#Restore").attr("disabled",!1)})}),$("#backupDir").fileBrowser({title:"Select backup folder to save to",key:"backupPath"}),$("#backupFile").fileBrowser({title:"Select backup files to restore",key:"backupFile",includeFiles:1}),$("#config-components").tabs()},notifications:function(){function a(a){var b={};return b.api=$("#pushbullet_api").val(),a&&$("#testPushbullet-result").html(loading),b.api?($.get(srRoot+"/home/getPushbulletDevices",{api:b.api},function(c){b.devices=$.parseJSON(c).devices,b.currentDevice=$("#pushbullet_device").val(),$("#pushbullet_device_list").html("");for(var d=0,e=b.devices.length;d<e;d++)b.devices[d].active===!0&&(b.currentDevice===b.devices[d].iden?$("#pushbullet_device_list").append('<option value="'+b.devices[d].iden+'" selected>'+b.devices[d].nickname+"</option>"):$("#pushbullet_device_list").append('<option value="'+b.devices[d].iden+'">'+b.devices[d].nickname+"</option>"));$("#pushbullet_device_list").prepend('<option value="" '+(""===b.currentDevice?"selected":"")+">All devices</option>"),a&&$("#testPushbullet-result").html(a)}),$("#pushbullet_device_list").on("change",function(){$("#pushbullet_device").val($("#pushbullet_device_list").val()),$("#testPushbullet-result").html("Don't forget to save your new pushbullet settings.")}),void $.get(srRoot+"/home/getPushbulletChannels",{api:b.api},function(c){if(b.channels=$.parseJSON(c).channels,b.currentChannel=$("#pushbullet_channel").val(),$("#pushbullet_channel_list").html(""),b.channels.length>0){for(var d=0,e=b.channels.length;d<e;d++)b.channels[d].active===!0?$("#pushbullet_channel_list").append('<option value="'+b.channels[d].tag+'" selected>'+b.channels[d].name+"</option>"):$("#pushbullet_channel_list").append('<option value="'+b.channels[d].tag+'">'+b.channels[d].name+"</option>");$("#pushbullet_channel_list").prepend('<option value="" '+(b.currentChannel?"selected":"")+">No Channel</option>"),$("#pushbullet_channel_list").prop("disabled",!1)}else $("#pushbullet_channel_list").prepend("<option value>No Channels</option>"),$("#pushbullet_channel_list").prop("disabled",!0);a&&$("#testPushbullet-result").html(a),$("#pushbullet_channel_list").on("change",function(){$("#pushbullet_channel").val($("#pushbullet_channel_list").val()),$("#testPushbullet-result").html("Don't forget to save your new pushbullet settings.")})})):($("#testPushbullet-result").html("You didn't supply a Pushbullet api key"),$("#pushbullet_api").focus(),!1)}function b(){$.getJSON(srRoot+"/home/loadShowNotifyLists",function(a){var b,c;if(0!==a._size){var d=[];for(c in a)"_"!==c.charAt(0)&&d.push(a[c]);var e=d.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0});b='<option value="-1">-- Select --</option>';for(c in e)e[c].id&&e[c].name&&(b+='<option value="'+e[c].id+'">'+$("<div/>").text(e[c].name).html()+"</option>");$("#email_show").html(b),$("#email_show_list").val(""),$("#prowl_show").html(b),$("#prowl_show_list").val("")}})}$("#testGrowl").on("click",function(){var a={};return a.host=$.trim($("#growl_host").val()),a.password=$.trim($("#growl_password").val()),a.host?($("#growl_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testGrowl-result").html(loading),void $.get(srRoot+"/home/testGrowl",{host:a.host,password:a.password}).done(function(a){$("#testGrowl-result").html(a),$("#testGrowl").prop("disabled",!1)})):($("#testGrowl-result").html("Please fill out the necessary fields above."),void $("#growl_host").addClass("warning"))}),$("#testProwl").on("click",function(){var a={};return a.api=$.trim($("#prowl_api").val()),a.priority=$("#prowl_priority").val(),a.api?($("#prowl_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testProwl-result").html(loading),void $.get(srRoot+"/home/testProwl",{prowl_api:a.api,prowl_priority:a.priority}).done(function(a){$("#testProwl-result").html(a),$("#testProwl").prop("disabled",!1)})):($("#testProwl-result").html("Please fill out the necessary fields above."),void $("#prowl_api").addClass("warning"))}),$("#testKODI").on("click",function(){var a={};return a.host=$.trim($("#kodi_host").val()),a.username=$.trim($("#kodi_username").val()),a.password=$.trim($("#kodi_password").val()),a.host?($("#kodi_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testKODI-result").html(loading),void $.get(srRoot+"/home/testKODI",{host:a.host,username:a.username,password:a.password}).done(function(a){$("#testKODI-result").html(a),$("#testKODI").prop("disabled",!1)})):($("#testKODI-result").html("Please fill out the necessary fields above."),void $("#kodi_host").addClass("warning"))}),$("#testPHT").on("click",function(){var a={};return a.client={},a.client.host=$.trim($("#plex_client_host").val()),a.client.username=$.trim($("#plex_client_username").val()),a.client.password=$.trim($("#plex_client_password").val()),a.client.host?($("#plex_client_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPHT-result").html(loading),void $.get(srRoot+"/home/testPHT",{host:a.client.host,username:a.client.username,password:a.client.password}).done(function(a){$("#testPHT-result").html(a),$("#testPHT").prop("disabled",!1)})):($("#testPHT-result").html("Please fill out the necessary fields above."),void $("#plex_client_host").addClass("warning"))}),$("#testPMS").on("click",function(){var a={};return a.server={},a.server.host=$.trim($("#plex_server_host").val()),a.server.username=$.trim($("#plex_server_username").val()),a.server.password=$.trim($("#plex_server_password").val()),a.server.token=$.trim($("#plex_server_token").val()),a.server.host?($("#plex_server_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMS-result").html(loading),void $.get(srRoot+"/home/testPMS",{host:a.server.host,username:a.server.username,password:a.server.password,plex_server_token:a.server.token}).done(function(a){$("#testPMS-result").html(a),$("#testPMS").prop("disabled",!1)})):($("#testPMS-result").html("Please fill out the necessary fields above."),void $("#plex_server_host").addClass("warning"))}),$("#testEMBY").on("click",function(){var a={};return a.host=$("#emby_host").val(),a.apikey=$("#emby_apikey").val(),a.host&&a.apikey?($("#emby_host,#emby_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testEMBY-result").html(loading),void $.get(srRoot+"/home/testEMBY",{host:a.host,emby_apikey:a.apikey}).done(function(a){$("#testEMBY-result").html(a),$("#testEMBY").prop("disabled",!1)})):($("#testEMBY-result").html("Please fill out the necessary fields above."),a.host?$("#emby_host").removeClass("warning"):$("#emby_host").addClass("warning"),void(a.apikey?$("#emby_apikey").removeClass("warning"):$("#emby_apikey").addClass("warning")))}),$("#testBoxcar2").on("click",function(){var a={};return a.accesstoken=$.trim($("#boxcar2_accesstoken").val()),a.accesstoken?($("#boxcar2_accesstoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar2-result").html(loading),void $.get(srRoot+"/home/testBoxcar2",{accesstoken:a.accesstoken}).done(function(a){$("#testBoxcar2-result").html(a),$("#testBoxcar2").prop("disabled",!1)})):($("#testBoxcar2-result").html("Please fill out the necessary fields above."),void $("#boxcar2_accesstoken").addClass("warning"))}),$("#testPushover").on("click",function(){var a={};return a.userkey=$("#pushover_userkey").val(),a.apikey=$("#pushover_apikey").val(),a.userkey&&a.apikey?($("#pushover_userkey,#pushover_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushover-result").html(loading),void $.get(srRoot+"/home/testPushover",{userKey:a.userkey,apiKey:a.apikey}).done(function(a){$("#testPushover-result").html(a),$("#testPushover").prop("disabled",!1)})):($("#testPushover-result").html("Please fill out the necessary fields above."),a.userkey?$("#pushover_userkey").removeClass("warning"):$("#pushover_userkey").addClass("warning"),void(a.apikey?$("#pushover_apikey").removeClass("warning"):$("#pushover_apikey").addClass("warning")))}),$("#testLibnotify").on("click",function(){$("#testLibnotify-result").html(loading),$.get(srRoot+"/home/testLibnotify",function(a){$("#testLibnotify-result").html(a)})}),$("#twitterStep1").on("click",function(){$("#testTwitter-result").html(loading),$.get(srRoot+"/home/twitterStep1",function(a){window.open(a)}).done(function(){$("#testTwitter-result").html("<b>Step1:</b> Confirm Authorization")})}),$("#twitterStep2").on("click",function(){var a={};return a.key=$.trim($("#twitter_key").val()),a.key?($("#twitter_key").removeClass("warning"),$("#testTwitter-result").html(loading),void $.get(srRoot+"/home/twitterStep2",{key:a.key},function(a){$("#testTwitter-result").html(a)})):($("#testTwitter-result").html("Please fill out the necessary fields above."),void $("#twitter_key").addClass("warning"))}),$("#testTwitter").on("click",function(){$.get(srRoot+"/home/testTwitter",function(a){$("#testTwitter-result").html(a)})}),$("#testSlack").on("click",function(){$.get(srRoot+"/home/testSlack",function(a){$("#testSlack-result").html(a)})}),$("#settingsNMJ").on("click",function(){var a={};return $("#nmj_host").val()?($("#testNMJ-result").html(loading),a.host=$("#nmj_host").val(),void $.get(srRoot+"/home/settingsNMJ",{host:a.host},function(a){null===a&&($("#nmj_database").removeAttr("readonly"),$("#nmj_mount").removeAttr("readonly"));var b=$.parseJSON(a);$("#testNMJ-result").html(b.message),$("#nmj_database").val(b.database),$("#nmj_mount").val(b.mount),b.database?$("#nmj_database").attr("readonly",!0):$("#nmj_database").removeAttr("readonly"),b.mount?$("#nmj_mount").attr("readonly",!0):$("#nmj_mount").removeAttr("readonly")})):(alert("Please fill in the Popcorn IP address"),void $("#nmj_host").focus())}),$("#testNMJ").on("click",function(){var a={};return a.host=$.trim($("#nmj_host").val()),a.database=$("#nmj_database").val(),a.mount=$("#nmj_mount").val(),a.host?($("#nmj_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJ-result").html(loading),void $.get(srRoot+"/home/testNMJ",{host:a.host,database:a.database,mount:a.mount}).done(function(a){$("#testNMJ-result").html(a),$("#testNMJ").prop("disabled",!1)})):($("#testNMJ-result").html("Please fill out the necessary fields above."),void $("#nmj_host").addClass("warning"))}),$("#settingsNMJv2").on("click",function(){var a={};if(!$("#nmjv2_host").val())return alert("Please fill in the Popcorn IP address"),void $("#nmjv2_host").focus();$("#testNMJv2-result").html(loading),a.host=$("#nmjv2_host").val(),a.dbloc="";for(var b=document.getElementsByName("nmjv2_dbloc"),c=0,d=b.length;c<d;c++)if(b[c].checked){a.dbloc=b[c].value;break}a.dbinstance=$("#NMJv2db_instance").val(),$.get(srRoot+"/home/settingsNMJv2",{host:a.host,dbloc:a.dbloc,instance:a.dbinstance},function(a){null===a&&$("#nmjv2_database").removeAttr("readonly");var b=$.parseJSON(a);$("#testNMJv2-result").html(b.message),$("#nmjv2_database").val(b.database),b.database?$("#nmjv2_database").attr("readonly",!0):$("#nmjv2_database").removeAttr("readonly")})}),$("#testNMJv2").on("click",function(){var a={};return a.host=$.trim($("#nmjv2_host").val()),a.host?($("#nmjv2_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJv2-result").html(loading),void $.get(srRoot+"/home/testNMJv2",{host:a.host}).done(function(a){$("#testNMJv2-result").html(a),$("#testNMJv2").prop("disabled",!1)})):($("#testNMJv2-result").html("Please fill out the necessary fields above."),void $("#nmjv2_host").addClass("warning"))}),$("#testFreeMobile").on("click",function(){var a={};return a.id=$.trim($("#freemobile_id").val()),a.apikey=$.trim($("#freemobile_apikey").val()),a.id&&a.apikey?($("#freemobile_id,#freemobile_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testFreeMobile-result").html(loading),void $.get(srRoot+"/home/testFreeMobile",{freemobile_id:a.id,freemobile_apikey:a.apikey}).done(function(a){$("#testFreeMobile-result").html(a),$("#testFreeMobile").prop("disabled",!1)})):($("#testFreeMobile-result").html("Please fill out the necessary fields above."),a.id?$("#freemobile_id").removeClass("warning"):$("#freemobile_id").addClass("warning"),void(a.apikey?$("#freemobile_apikey").removeClass("warning"):$("#freemobile_apikey").addClass("warning")))}),$("#testTelegram").on("click",function(){var a={};return a.id=$.trim($("#telegram_id").val()),a.apikey=$.trim($("#telegram_apikey").val()),a.id&&a.apikey?($("#telegram_id,#telegram_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testTelegram-result").html(loading),void $.get(srRoot+"/home/testTelegram",{telegram_id:a.id,telegram_apikey:a.apikey}).done(function(a){$("#testTelegram-result").html(a),$("#testTelegram").prop("disabled",!1)})):($("#testTelegram-result").html("Please fill out the necessary fields above."),a.id?$("#telegram_id").removeClass("warning"):$("#telegram_id").addClass("warning"),void(a.apikey?$("#telegram_apikey").removeClass("warning"):$("#telegram_apikey").addClass("warning")))}),$("#testJoin").on("click",function(){var a={};return a.id=$.trim($("#join_id").val()),a.id?($("#join_id,#join_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testJoin-result").html(loading),void $.get(srRoot+"/home/testJoin",{join_id:a.id}).done(function(a){$("#testJoin-result").html(a),$("#testJoin").prop("disabled",!1)})):($("#testJoin-result").html("Please fill out the necessary fields above."),void(a.id?$("#join_id").removeClass("warning"):$("#join_id").addClass("warning")))}),$("#TraktGetPin").on("click",function(){window.open($("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),$("#trakt_pin").removeClass("hide")}),$("#trakt_pin").on("keyup change",function(){0!==$("#trakt_pin").val().length?($("#TraktGetPin").addClass("hide"),$("#authTrakt").removeClass("hide")):($("#TraktGetPin").removeClass("hide"),$("#authTrakt").addClass("hide"))}),$("#authTrakt").on("click",function(){var a={};a.pin=$("#trakt_pin").val(),0!==a.pin.length&&$.get(srRoot+"/home/getTraktToken",{trakt_pin:a.pin}).done(function(a){$("#testTrakt-result").html(a),$("#authTrakt").addClass("hide"),$("#trakt_pin").addClass("hide"),$("#TraktGetPin").addClass("hide")})}),$("#testTrakt").on("click",function(){var a={};return a.username=$.trim($("#trakt_username").val()),a.trendingBlacklist=$.trim($("#trakt_blacklist_name").val()),a.username?/\s/g.test(a.trendingBlacklist)?($("#testTrakt-result").html("Check blacklist name; the value needs to be a trakt slug"),void $("#trakt_blacklist_name").addClass("warning")):($("#trakt_username").removeClass("warning"),$("#trakt_blacklist_name").removeClass("warning"),$(this).prop("disabled",!0),$("#testTrakt-result").html(loading),void $.get(srRoot+"/home/testTrakt",{username:a.username,blacklist_name:a.trendingBlacklist}).done(function(a){$("#testTrakt-result").html(a),$("#testTrakt").prop("disabled",!1)})):($("#testTrakt-result").html("Please fill out the necessary fields above."),void(a.username?$("#trakt_username").removeClass("warning"):$("#trakt_username").addClass("warning")))}),$("#testEmail").on("click",function(){var a,b,c,d,e,f,g,h,i;a=$("#testEmail-result"),a.html(loading),b=$("#email_host").val(),b=b.length>0?b:null,c=$("#email_port").val(),c=c.length>0?c:null,d=void 0!==$("#email_tls").attr("checked")?1:0,e=$("#email_from").val(),e=e.length>0?e:"root@localhost",f=$("#email_user").val().trim(),g=$("#email_password").val(),h="",null===b&&(h+='<li style="color: red;">You must specify an SMTP hostname!</li>'),null===c?h+='<li style="color: red;">You must specify an SMTP port!</li>':(null===c.match(/^\d+$/)||parseInt(c,10)>65535)&&(h+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'),h.length>0?(h="<ol>"+h+"</ol>",a.html(h)):(i=prompt("Enter an email address to send the test to:",null),null===i||0===i.length||null===i.match(/.*@.*/)?a.html('<p style="color: red;">You must provide a recipient email address!</p>'):$.get(srRoot+"/home/testEmail",{host:b,port:c,smtp_from:e,use_tls:d,user:f,pwd:g,to:i},function(a){$("#testEmail-result").html(a)}))}),$("#testNMA").on("click",function(){var a={};return a.api=$.trim($("#nma_api").val()),a.priority=$("#nma_priority").val(),a.api?($("#nma_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMA-result").html(loading),void $.get(srRoot+"/home/testNMA",{nma_api:a.api,nma_priority:a.priority}).done(function(a){$("#testNMA-result").html(a),$("#testNMA").prop("disabled",!1)})):($("#testNMA-result").html("Please fill out the necessary fields above."),void $("#nma_api").addClass("warning"))}),$("#testPushalot").on("click",function(){var a={};return a.authToken=$.trim($("#pushalot_authorizationtoken").val()),a.authToken?($("#pushalot_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushalot-result").html(loading),void $.get(srRoot+"/home/testPushalot",{authorizationToken:a.authToken}).done(function(a){$("#testPushalot-result").html(a),$("#testPushalot").prop("disabled",!1)})):($("#testPushalot-result").html("Please fill out the necessary fields above."),void $("#pushalot_authorizationtoken").addClass("warning"))}),$("#testPushbullet").on("click",function(){var a={};return a.api=$.trim($("#pushbullet_api").val()),a.api?($("#pushbullet_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushbullet-result").html(loading),void $.get(srRoot+"/home/testPushbullet",{api:a.api}).done(function(a){$("#testPushbullet-result").html(a),$("#testPushbullet").prop("disabled",!1)})):($("#testPushbullet-result").html("Please fill out the necessary fields above."),void $("#pushbullet_api").addClass("warning"))}),$("#getPushbulletDevices").on("click",function(){a("Device list updated. Please choose a device to push to.")}),a(),$("#email_show").on("change",function(){var a=parseInt($("#email_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(b){b._size>0&&$("#email_show_list").val(a>=0?b[a.toString()].list:"")})}),$("#prowl_show").on("change",function(){var a=parseInt($("#prowl_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(b){b._size>0&&$("#prowl_show_list").val(a>=0?b[a.toString()].prowl_notify_list:"")})}),b(),$("#email_show").on("notify",function(){b()}),$("#prowl_show").on("notify",function(){b()}),$("#email_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},function(){b()})}),$("#prowl_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#prowl_show").val(),prowlAPIs:$("#prowl_show_list").val()},function(){b()})}),$("#use_plex_server").on("click",function(){$(this).is(":checked")?$(".plexinfo").removeClass("hide"):$(".plexinfo").addClass("hide")})},postProcessing:function(){function a(){$.get(srRoot+"/config/postProcessing/isRarSupported",function(a){"supported"!==a&&($("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#unpack").qtip("toggle",!0),$("#unpack").css("background-color","#FFFFDD"))})}function b(){var a={};a.pattern=$("#naming_pattern").val(),a.multi=$("#naming_multi_ep :selected").val(),a.animeType=$('input[name="naming_anime"]:checked').val(),$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,anime_type:3},function(a){a?($("#naming_example").text(a+".ext"),$("#naming_example_div").show()):$("#naming_example_div").hide()}),$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,multi:a.multi,anime_type:3},function(a){a?($("#naming_example_multi").text(a+".ext"),$("#naming_example_multi_div").show()):$("#naming_example_multi_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a.pattern,multi:a.multi,anime_type:a.animeType},function(a){"invalid"===a?($("#naming_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?($("#naming_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):($("#naming_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF"))})}function c(){var a=$("#naming_abd_pattern").val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,abd:"True"},function(a){a?($("#naming_abd_example").text(a+".ext"),$("#naming_abd_example_div").show()):$("#naming_abd_example_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,abd:"True"},function(a){"invalid"===a?($("#naming_abd_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?($("#naming_abd_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFFFDD")):($("#naming_abd_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_abd_pattern").qtip("toggle",!1),$("#naming_abd_pattern").css("background-color","#FFFFFF"))})}function d(){var a=$("#naming_sports_pattern").val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,sports:"True"},function(a){a?($("#naming_sports_example").text(a+".ext"),$("#naming_sports_example_div").show()):$("#naming_sports_example_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,sports:"True"},function(a){"invalid"===a?($("#naming_sports_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?($("#naming_sports_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFFFDD")):($("#naming_sports_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_sports_pattern").qtip("toggle",!1),$("#naming_sports_pattern").css("background-color","#FFFFFF"))})}function e(){var a={};a.pattern=$("#naming_anime_pattern").val(),a.multi=$("#naming_anime_multi_ep :selected").val(),a.animeType=$('input[name="naming_anime"]:checked').val(),$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,anime_type:a.animeType},function(a){a?($("#naming_example_anime").text(a+".ext"),$("#naming_example_anime_div").show()):$("#naming_example_anime_div").hide()}),$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,multi:a.multi,anime_type:a.animeType},function(a){a?($("#naming_example_multi_anime").text(a+".ext"),$("#naming_example_multi_anime_div").show()):$("#naming_example_multi_anime_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a.pattern,multi:a.multi,anime_type:a.animeType},function(a){"invalid"===a?($("#naming_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?($("#naming_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):($("#naming_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF"))})}function f(){"custom..."===$("#name_presets :selected").val().toLowerCase()?$("#naming_custom").show():($("#naming_custom").hide(),$("#naming_pattern").val($("#name_presets :selected").attr("id"))),b()}function g(){"custom..."===$("#name_abd_presets :selected").val().toLowerCase()?$("#naming_abd_custom").show():($("#naming_abd_custom").hide(),
$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))),c()}function h(){"custom..."===$("#name_sports_presets :selected").val().toLowerCase()?$("#naming_sports_custom").show():($("#naming_sports_custom").hide(),$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))),d()}function i(){"custom..."===$("#name_anime_presets :selected").val().toLowerCase()?$("#naming_anime_custom").show():($("#naming_anime_custom").hide(),$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))),e()}$("#config-components").tabs(),$("#tv_download_dir").fileBrowser({title:"Select TV Download Directory"});var j=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();$("#unpack").on("change",function(){this.checked?a():$("#unpack").qtip("toggle",!1)}),$("#name_presets").on("change",function(){f()}),$("#name_abd_presets").on("change",function(){g()}),$("#naming_custom_abd").on("change",function(){g()}),$("#name_sports_presets").on("change",function(){h()}),$("#naming_custom_sports").on("change",function(){h()}),$("#name_anime_presets").on("change",function(){i()}),$("#naming_custom_anime").on("change",function(){i()}),$('input[name="naming_anime"]').on("click",function(){i()}),$("#naming_multi_ep").on("change",b),$("#naming_pattern").on("focusout",b),$("#naming_pattern").on("keyup",function(){j(function(){b()},500)}),$("#naming_anime_multi_ep").on("change",e),$("#naming_anime_pattern").on("focusout",e),$("#naming_anime_pattern").on("keyup",function(){j(function(){e()},500)}),$("#naming_abd_pattern").on("focusout",b),$("#naming_abd_pattern").on("keyup",function(){j(function(){c()},500)}),$("#naming_sports_pattern").on("focusout",b),$("#naming_sports_pattern").on("keyup",function(){j(function(){d()},500)}),$("#naming_anime_pattern").on("focusout",b),$("#naming_anime_pattern").on("keyup",function(){j(function(){e()},500)}),$("#show_naming_key").on("click",function(){$("#naming_key").toggle()}),$("#show_naming_abd_key").on("click",function(){$("#naming_abd_key").toggle()}),$("#show_naming_sports_key").on("click",function(){$("#naming_sports_key").toggle()}),$("#show_naming_anime_key").on("click",function(){$("#naming_anime_key").toggle()}),$("#do_custom").on("click",function(){$("#naming_pattern").val($("#name_presets :selected").attr("id")),$("#naming_custom").show(),$("#naming_pattern").focus()}),f(),g(),h(),i(),$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()}),$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){var a=$(this).attr("id"),b=$("#metadataType :selected").val();b===a?$(this).show():$(this).hide()})},$(this).showHideMetadata(),$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(!1)}),$.fn.refreshMetadataConfig=function(a){var b=0,c="";$(".metadataDiv").each(function(){var a=$(this).attr("id"),d=[],e=$("#"+a+"_show_metadata").prop("checked"),f=$("#"+a+"_episode_metadata").prop("checked"),g=$("#"+a+"_fanart").prop("checked"),h=$("#"+a+"_poster").prop("checked"),i=$("#"+a+"_banner").prop("checked"),j=$("#"+a+"_episode_thumbnails").prop("checked"),k=$("#"+a+"_season_posters").prop("checked"),l=$("#"+a+"_season_banners").prop("checked"),m=$("#"+a+"_season_all_poster").prop("checked"),n=$("#"+a+"_season_all_banner").prop("checked");d.push(e?"1":"0"),d.push(f?"1":"0"),d.push(g?"1":"0"),d.push(h?"1":"0"),d.push(i?"1":"0"),d.push(j?"1":"0"),d.push(k?"1":"0"),d.push(l?"1":"0"),d.push(m?"1":"0"),d.push(n?"1":"0");for(var o=0,p=0,q=d.length;p<q;p++)o+=parseInt(d[p]);o>b&&(b=o,c=a),$("#"+a+"_eg_show_metadata").attr("class",e?"enabled":"disabled"),$("#"+a+"_eg_episode_metadata").attr("class",f?"enabled":"disabled"),$("#"+a+"_eg_fanart").attr("class",g?"enabled":"disabled"),$("#"+a+"_eg_poster").attr("class",h?"enabled":"disabled"),$("#"+a+"_eg_banner").attr("class",i?"enabled":"disabled"),$("#"+a+"_eg_episode_thumbnails").attr("class",j?"enabled":"disabled"),$("#"+a+"_eg_season_posters").attr("class",k?"enabled":"disabled"),$("#"+a+"_eg_season_banners").attr("class",l?"enabled":"disabled"),$("#"+a+"_eg_season_all_poster").attr("class",m?"enabled":"disabled"),$("#"+a+"_eg_season_all_banner").attr("class",n?"enabled":"disabled"),$("#"+a+"_data").val(d.join("|"))}),""!==c&&a&&($("#metadataType option[value="+c+"]").attr("selected","selected"),$(this).showHideMetadata())},$(this).refreshMetadataConfig(!0),$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search:function(){$("#config-components").tabs(),$("#nzb_dir").fileBrowser({title:"Select .nzb black hole/watch location"}),$("#torrent_dir").fileBrowser({title:"Select .torrent black hole/watch location"}),$("#torrent_path").fileBrowser({title:"Select .torrent download location"}),$.fn.nzbMethodHandler=function(){var a=$("#nzb_method :selected").val(),b="#blackhole_settings",c="#sabnzbd_settings",d="#testSABnzbd",e="#testSABnzbd_result",f="#nzbget_settings",g="#download_station_settings",h="#testDSM",i="#testDSM_result";$("#nzb_method_icon").removeClass(function(a,b){return(b.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),$("#nzb_method_icon").addClass("add-client-icon-"+a.replace("_","-")),$(b).hide(),$(c).hide(),$(d).hide(),$(e).hide(),$(f).hide(),$(g).hide(),$(h).hide(),$(i).hide(),"blackhole"===a.toLowerCase()?$(b).show():"nzbget"===a.toLowerCase()?$(f).show():"download_station"===a.toLowerCase()?($(g).show(),$(h).show(),$(i).show()):($(c).show(),$(d).show(),$(e).show())},$.torrentMethodHandler=function(){$("#options_torrent_clients").hide(),$("#options_torrent_blackhole").hide();var a=$("#torrent_method :selected").val(),b=" host:port",c=" username",d=" password",e="",f="#options_torrent_blackhole",g=" RPC URL";$("#torrent_method_icon").removeClass(function(a,b){return(b.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),$("#torrent_method_icon").addClass("add-client-icon-"+a.replace("_","-")),"blackhole"!==a.toLowerCase()&&($("#label_warning_deluge").hide(),$("#label_anime_warning_deluge").hide(),$("#host_desc_torrent").show(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_auth_type_option").hide(),$("#torrent_path_option").show(),$("#torrent_path_option").find(".fileBrowser").show(),$("#torrent_seed_time_option").hide(),$("#torrent_high_bandwidth_option").hide(),$("#torrent_label_option").show(),$("#torrent_label_anime_option").show(),$("#path_synology").hide(),$("#torrent_paused_option").show(),$("#torrent_rpcurl_option").hide(),$("#torrent_host_option").show(),"utorrent"===a.toLowerCase()?(e="uTorrent",$("#torrent_path_option").hide(),$("#torrent_seed_time_label").text("Minimum seeding time is"),$("#torrent_seed_time_option").show(),$("#host_desc_torrent").text("URL to your uTorrent client (e.g. http://localhost:8000)")):"transmission"===a.toLowerCase()?(e="Transmission",$("#torrent_seed_time_label").text("Stop seeding when inactive for"),$("#torrent_seed_time_option").show(),$("#torrent_high_bandwidth_option").show(),$("#torrent_label_option").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_rpcurl_option").show(),$("#host_desc_torrent").text("URL to your Transmission client (e.g. http://localhost:9091)")):"deluge"===a.toLowerCase()?(e="Deluge",$("#torrent_verify_cert_option").show(),$("#torrent_verify_deluge").show(),$("#torrent_verify_rtorrent").hide(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#host_desc_torrent").text("URL to your Deluge client (e.g. http://localhost:8112)")):"deluged"===a.toLowerCase()?(e="Deluge",$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_username_option").show(),$("#host_desc_torrent").text("IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)")):"download_station"===a.toLowerCase()?(e="Synology DS",$("#torrent_label_option").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_path_option").find(".fileBrowser").hide(),$("#host_desc_torrent").text("URL to your Synology DS client (e.g. http://localhost:5000)"),$("#path_synology").show()):"rtorrent"===a.toLowerCase()?(e="rTorrent",$("#torrent_paused_option").hide(),$("#host_desc_torrent").text("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)"),$("#torrent_verify_cert_option").show(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").show(),$("#torrent_auth_type_option").show()):"qbittorrent"===a.toLowerCase()?(e="qbittorrent",$("#torrent_path_option").hide(),$("#label_warning_qbittorrent").show(),$("#label_anime_warning_qbittorrent").show(),$("#host_desc_torrent").text("URL to your qbittorrent client (e.g. http://localhost:8080)")):"mlnet"===a.toLowerCase()?(e="mlnet",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#host_desc_torrent").text("URL to your MLDonkey (e.g. http://localhost:4080)")):"putio"===a.toLowerCase()&&(e="putio",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_host_option").hide(),$("#host_desc_torrent").text("URL to your putio client (e.g. http://localhost:8080)")),$("#host_title").text(e+b),$("#username_title").text(e+c),$("#password_title").text(e+d),$("#torrent_client").text(e),$("#rpcurl_title").text(e+g),f="#options_torrent_clients"),$(f).show()},$("#torrent_host").on("input",function(){if("rtorrent"===$("#torrent_method :selected").val().toLowerCase()){var a=$("#torrent_host").val(),b="scgi://"===a.substr(0,7);b?($("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#torrent_password_option").hide(),$("#torrent_password").prop("value",""),$("#torrent_auth_type_option").hide(),$("#torrent_auth_type option[value=none]").attr("selected","selected")):($("#torrent_username_option").show(),$("#torrent_password_option").show(),$("#torrent_auth_type_option").show())}}),$("#nzb_method").on("change",$(this).nzbMethodHandler),$(this).nzbMethodHandler(),$("#testSABnzbd").on("click",function(){var a={};$("#testSABnzbd_result").html(loading),a.host=$("#sab_host").val(),a.username=$("#sab_username").val(),a.password=$("#sab_password").val(),a.apiKey=$("#sab_apikey").val(),$.get(srRoot+"/home/testSABnzbd",{host:a.host,username:a.username,password:a.password,apikey:a.apiKey},function(a){$("#testSABnzbd_result").html(a)})}),$("#testDSM").on("click",function(){var a={};$("#testDSM_result").html(loading),a.host=$("#syno_dsm_host").val(),a.username=$("#syno_dsm_user").val(),a.password=$("#syno_dsm_pass").val(),$.get(srRoot+"/home/testDSM",{host:a.host,username:a.username,password:a.password},function(a){$("#testDSM_result").html(a)})}),$("#torrent_method").on("change",$.torrentMethodHandler),$.torrentMethodHandler(),$("#test_torrent").on("click",function(){var a={};$("#test_torrent_result").html(loading),a.method=$("#torrent_method :selected").val(),a.host=$("#torrent_host").val(),a.username=$("#torrent_username").val(),a.password=$("#torrent_password").val(),$.get(srRoot+"/home/testTorrent",{torrent_method:a.method,host:a.host,username:a.username,password:a.password},function(a){$("#test_torrent_result").html(a)})})},subtitles:function(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){var a=$(this).attr("id"),b=$("#editAService :selected").val();b+"Div"===a?$(this).show():$(this).hide()})},$.fn.addService=function(a,b,c,d,e,f){if(null===c.match("/$")&&(c+="/"),0===$("#service_order_list > #"+a).length&&f!==!1){var g='<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="service_enabler" CHECKED> <a href="'+anonURL+c+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/services/newznab.gif" alt="'+b+'" width="16" height="16"></a> '+b+"</li>";$("#service_order_list").append(g),$("#service_order_list").sortable("refresh")}},$.fn.deleteService=function(a){$("#service_order_list > #"+a).remove()},$.fn.refreshServiceList=function(){var a=$("#service_order_list").sortable("toArray"),b=[];$.each(a,function(a,c){var d=+$("#enable_"+c).prop("checked")?"1":"0";b.push(c+":"+d)}),$("#service_order").val(b.join(" "))},$("#editAService").on("change",function(){$(this).showHideServices()}),$(".service_enabler").on("click",function(){$(this).refreshServiceList()}),$(this).showHideServices(),$("#service_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshServiceList()},create:function(){$(this).refreshServiceList()}}),$("#service_order_list").disableSelection()},providers:function(){console.log("This function need to be filled with ConfigProviders.js but can't be as we've got scope issues currently.")}},home:{init:function(){},index:function(){function a(a){var b,c,d,e;a<125?(d=3,e=4):a<175?(b=9,c=40,d=4,e=5):(b=11,c=50,d=6,e=6),$("#posterPopup").remove(),void 0===b?$(".show-details").hide():($(".show-details").show(),$(".show-dlstats, .show-quality").css("fontSize",b),$(".show-network-image").css("width",c)),$(".show-container").css({width:a,borderWidth:e,borderRadius:d})}$(".resetsorting").on("click",function(){$("table").trigger("filterReset")}),$("#filterShowName").on("input",_.debounce(function(){$(".show-grid").isotope({filter:function(){var a=$(this).attr("data-name").toLowerCase();return a.indexOf($("#filterShowName").val().toLowerCase())>-1}})},500));var b;"undefined"!=typeof Storage&&(b=parseInt(localStorage.getItem("posterSize"))),("number"!=typeof b||isNaN(b))&&(b=188),a(b),$("#posterSizeSlider").slider({min:75,max:250,value:b,change:function(b,c){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",c.value),a(c.value),$(".show-grid").isotope("layout")}}),$(".progressbar").each(function(){var a=$(this).data("progress-percentage"),b=100===a?100:a>80?80:a>60?60:a>40?40:20;$(this).progressbar({value:a}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+b)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()}),$("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0:function(a){return $(a).find("time").attr("datetime")},1:function(a){return $(a).find("time").attr("datetime")},3:function(a){return $(a).find("span").prop("title").toLowerCase()},4:function(a){return $(a).find("span").text().toLowerCase()},5:function(a){return $(a).find("span:first").text()},6:function(a){return $(a).data("show-size")},7:function(a){return $(a).find("img").attr("alt")}},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"eps"},6:{sorter:"digit"},7:{filter:"parsed"}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,filter_functions:{5:function(a,b,c){var d=!1,e=Math.floor(b%1*1e3);if(""===c)d=!0;else{var f=c.match(/(<|<=|>=|>)\s+(\d+)/i);f&&("<"===f[1]?e<parseInt(f[2])&&(d=!0):"<="===f[1]?e<=parseInt(f[2])&&(d=!0):">="===f[1]?e>=parseInt(f[2])&&(d=!0):">"===f[1]&&e>parseInt(f[2])&&(d=!0)),f=c.match(/(\d+)\s(-|to)\s+(\d+)/i),f&&("-"!==f[2]&&"to"!==f[2]||e>=parseInt(f[1])&&e<=parseInt(f[3])&&(d=!0)),f=c.match(/(=)?\s?(\d+)\s?(=)?/i),f&&("="!==f[1]&&"="!==f[3]||parseInt(f[2])===e&&(d=!0)),!isNaN(parseFloat(c))&&isFinite(c)&&parseInt(c)===e&&(d=!0)}return d}},columnSelector_mediaquery:!1},sortStable:!0,sortAppend:[[2,0]]}),$(".show-grid").imagesLoaded(function(){$(".loading-spinner").hide(),$(".show-grid").show().isotope({itemSelector:".show-container",sortBy:getMeta("sickbeard.POSTER_SORTBY"),sortAscending:getMeta("sickbeard.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:!0},getSortData:{name:function(a){var b=$(a).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?b:b.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},network:"[data-network]",date:function(a){var b=$(a).attr("data-date");return b.length&&parseInt(b,10)||Number.POSITIVE_INFINITY},progress:function(a){var b=$(a).attr("data-progress");return b.length&&parseInt(b,10)||Number.NEGATIVE_INFINITY}}});var a=null;$(".show-container").on("mouseenter",function(){var b=$(this);"none"===b.find(".show-details").css("display")&&(a=setTimeout(function(){a=null,$("#posterPopup").remove();var c=b.clone().attr({id:"posterPopup"}),d=b.offset().left,e=b.offset().top;c.css({position:"absolute",margin:0,top:e,left:d}),c.find(".show-details").show(),c.on("mouseleave",function(){$(this).remove()}),c.zIndex(9999),c.appendTo("body");var f=438,g=250,h=e+b.height()/2-f/2,i=d+b.width()/2-g/2,j=5,k=$(window).scrollTop(),l=$(window).scrollLeft(),m=k+$(window).innerHeight(),n=l+$(window).innerWidth();h<k+j&&(h=k+j),i<l+j&&(i=l+j),h+f+j>m&&(h=m-f-j),i+g+j>n&&(i=n-g-j),c.animate({top:h,left:i,width:250,height:438})},300))}).on("mouseleave",function(){null!==a&&clearTimeout(a)})}),$("#postersort").on("change",function(){$(".show-grid").isotope({sortBy:$(this).val()}),$.get($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))}),$("#postersortdirection").on("change",function(){$(".show-grid").isotope({sortAscending:"true"===$(this).val()}),$.get($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTableShows"),"#popover-target"),metaToBool("sickbeard.ANIME_SPLIT_HOME")&&$.tablesorter.columnSelector.attachTo($("#showListTableAnime"),"#popover-target")})},displayShow:function(){function a(a,b,c,d){var e=$("#srRoot").val(),f=$("#showID").val(),g=$("#indexer").val();""===c&&(c=null),""===d&&(d=null),$.getJSON(e+"/home/setSceneNumbering",{show:f,indexer:g,forSeason:a,forEpisode:b,sceneSeason:c,sceneEpisode:d},function(c){null===c.sceneSeason||null===c.sceneEpisode?$("#sceneSeasonXEpisode_"+f+"_"+a+"_"+b).val(""):$("#sceneSeasonXEpisode_"+f+"_"+a+"_"+b).val(c.sceneSeason+"x"+c.sceneEpisode),c.success||(c.errorMessage?alert(c.errorMessage):alert("Update failed."))})}function b(a,b){var c=$("#srRoot").val(),d=$("#showID").val(),e=$("#indexer").val();""===b&&(b=null),$.getJSON(c+"/home/setSceneNumbering",{show:d,indexer:e,forAbsolute:a,sceneAbsolute:b},function(b){null===b.sceneAbsolute?$("#sceneAbsolute_"+d+"_"+a).val(""):$("#sceneAbsolute_"+d+"_"+a).val(b.sceneAbsolute),b.success||(b.errorMessage?alert(b.errorMessage):alert("Update failed."))})}function c(a,b){return a?($(b).css({"background-color":"#90EE90",color:"#FFF","font-weight":"bold"}),!0):($(b).css({"background-color":"#FF0000",color:"#FFF!important","font-weight":"bold"}),!1)}metaToBool("sickbeard.FANART_BACKGROUND")&&($.backstretch(srRoot+"/showPoster/?show="+$("#showID").attr("value")+"&which=fanart"),$(".backstretch").css("opacity",getMeta("sickbeard.FANART_BACKGROUND_OPACITY")).fadeIn("500")),$("#srRoot").ajaxEpSearch({colorRow:!0}),$("#srRoot").ajaxEpSubtitlesSearch(),$("#srRoot").ajaxRetrySubtitlesSearch(),$("#seasonJump").on("change",function(){var a=$("#seasonJump option:selected").val();if(a&&"jump"!==a){var b=$("#seasonJump option:selected").data("season");$("html,body").animate({scrollTop:$('[name ="'+a.substring(1)+'"]').offset().top-50},"slow"),$("#collapseSeason-"+b).collapse("show"),location.hash=a}$(this).val("jump")}),$("#prevShow").on("click",function(){$("#pickShow option:selected").prev("option").prop("selected","selected"),$("#pickShow").change()}),$("#nextShow").on("click",function(){$("#pickShow option:selected").next("option").prop("selected","selected"),$("#pickShow").change()}),$("#changeStatus").on("click",function(){var a=$("#srRoot").val(),b=[];if($(".epCheck").each(function(){this.checked===!0&&b.push($(this).attr("id"))}),0===b.length)return!1;var c=a+"/home/setStatus",d="show="+$("#showID").attr("value")+"&eps="+b.join("|")+"&status="+$("#statusSelect").val();$.post(c,d,function(){location.reload(!0)})}),$(".seasonCheck").on("click",function(){var a=this,b=$(a).attr("id");$("#collapseSeason-"+b).collapse("show"),$(".epCheck:visible").each(function(){var c=$(this).attr("id").split("x");c[0]===b&&(this.checked=a.checked)})});var d=null;$(".epCheck").on("click",function(a){if(!d||!a.shiftKey)return void(d=this);var b=this,c=0;$(".epCheck").each(function(){switch(c){case 2:return!1;case 1:this.checked=d.checked}this!==b&&this!==d||c++})}),$(".seriesCheck").on("click",function(){$(".epCheck:visible").each(function(){this.checked=!0}),$(".seasonCheck:visible").each(function(){this.checked=!0})}),$(".clearAll").on("click",function(){$(".epCheck:visible").each(function(){this.checked=!1}),$(".seasonCheck:visible").each(function(){this.checked=!1})}),$("#pickShow").on("change",function(){var a=$("#srRoot").val(),b=$(this).val();0!==b&&(window.location.href=a+"/home/displayShow?show="+b)}),$("#checkboxControls input").on("change",function(){var a=$(this).attr("id");$(this).showHideRows(a)}),$("#checkboxControls input").each(function(){var a=$(this).prop("checked");$("tr."+$(this).attr("id")).each(function(){a?$(this).show():$(this).hide()})}),$.fn.showHideRows=function(a){var b=$("#checkboxControls > input, #"+a).prop("checked");$("tr."+a).each(function(){b?$(this).show():$(this).hide()}),$("tr.seasonheader").each(function(){var a=0,b=$(this).attr("id");$("tr."+b+" :visible").each(function(){a++}),0===a?($(this).hide(),$("#"+b+"-cols").hide()):($(this).show(),$("#"+b+"-cols").show())})},$(".sceneSeasonXEpisode").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));var b=$(this).attr("data-for-season"),d=$(this).attr("data-for-episode"),e=$(this).val().match(/^(\d+)x(\d+)$/i),f=$(this).val().match(/^(\d+)$/i),g=null,h=null,i=!1;e?(g=e[1],h=e[2],i=c(!0,$(this))):f?(g=b,h=f[1],i=c(!0,$(this))):i=c(!1,$(this)),i&&a(b,d,g,h)}),$(".sceneAbsolute").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));var a=$(this).attr("data-for-absolute"),c=$(this).val().match(/^(\d{1,3})$/i),d=null;c&&(d=c[1]),b(a,d)}),$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each(function(a,b){$(b).html($("<span/>").width(12*$(b).text()))})},$(".imdbstars").generateStars(),$("#showTable, #animeTable").tablesorter({widgets:["saveSort","stickyHeaders","columnSelector"],widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<br><label><input type="checkbox">{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked"}}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showTable, #animeTable"),"#popover-target")}),$(function(){$(".collapse.toggle").on("hide.bs.collapse",function(){var a=/collapseSeason-([0-9]+)/g,b=a.exec(this.id);$("#showseason-"+b[1]).text("Show Episodes")}),$(".collapse.toggle").on("show.bs.collapse",function(){var a=/collapseSeason-([0-9]+)/g,b=a.exec(this.id);$("#showseason-"+b[1]).text("Hide Episodes")})})},postProcess:function(){$("#episodeDir").fileBrowser({title:"Select Unprocessed Episode Folder",key:"postprocessPath"})},status:function(){$("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra"],textExtraction:{5:function(a){return $(a).data("seconds")},6:function(a){return $(a).data("seconds")}},headers:{5:{sorter:"digit"},6:{sorter:"digit"}}}),$("#queueStatusTable").tablesorter({widgets:["saveSort","zebra"],sortList:[[3,0],[4,0],[2,1]]})},restart:function(){var a=srPID,b=setInterval(function(){$.get(srRoot+"/home/is_alive/",function(c){"nope"===c.msg.toLowerCase()?$("#restart_message").show():""===a||c.msg===a?($("#shut_down_loading").hide(),$("#shut_down_success").show(),a=c.msg):(clearInterval(b),$("#restart_loading").hide(),$("#restart_success").show(),$("#refresh_message").show(),setTimeout(function(){window.location=srRoot+"/"+srDefaultPage+"/"},5e3))},"jsonp")},100)}},manage:{init:function(){$.makeEpisodeRow=function(a,b,c,d,e){var f="";return f+=' <tr class="'+$("#row_class").val()+" show-"+a+'">',f+='  <td class="tableleft" align="center"><input type="checkbox" class="'+a+'-epcheck" name="'+a+"-"+b+"x"+c+'"'+(e?" checked":"")+"></td>",f+="  <td>"+b+"x"+c+"</td>",f+='  <td class="tableright" style="width: 100%">'+d+"</td>",f+=" </tr>"},$.makeSubtitleRow=function(a,b,c,d,e,f){var g="";if(g+='<tr class="good show-'+a+'">',g+='<td align="center"><input type="checkbox" class="'+a+'-epcheck" name="'+a+"-"+b+"x"+c+'"'+(f?" checked":"")+"></td>",g+='<td style="width: 2%;">'+b+"x"+c+"</td>",e.length>0){g+='<td style="width: 8%;">',e=e.split(",");for(var h in e)e.hasOwnProperty(h)&&(g+='<img src="'+srRoot+"/images/subtitles/flags/"+e[h]+'.png" width="16" height="11" alt="'+e[h]+'" />&nbsp;');g+="</td>"}else g+='<td style="width: 8%;">None</td>';return g+="<td>"+d+"</td>",g+="</tr>"}},index:function(){$(".resetsorting").on("click",function(){$("table").trigger("filterReset")}),$("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],textExtraction:{2:function(a){return $(a).find("span").text().toLowerCase()},3:function(a){return $(a).find("img").attr("alt")},4:function(a){return $(a).find("img").attr("alt")},5:function(a){return $(a).find("img").attr("alt")},6:function(a){return $(a).find("img").attr("alt")},7:function(a){return $(a).find("img").attr("alt")},8:function(a){return $(a).find("img").attr("alt")},9:function(a){return $(a).find("img").attr("alt")}},widgets:["zebra","filter","columnSelector"],headers:{0:{sorter:!1,filter:!1},1:{sorter:"showNames"},2:{sorter:"quality"},3:{sorter:"sports"},4:{sorter:"scene"},5:{sorter:"anime"},6:{sorter:"flatfold"},7:{sorter:"paused"},8:{sorter:"subtitle"},9:{sorter:"default_ep_status"},10:{sorter:"status"},11:{sorter:!1},12:{sorter:!1},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1},16:{sorter:!1}},widgetOptions:{columnSelector_mediaquery:!1}}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#massUpdateTable"),"#popover-target")})},backlogOverview:function(){$("#pickShow").on("change",function(){var a=$(this).val();a&&$("html,body").animate({scrollTop:$("#show-"+a).offset().top-25},"slow")})},failedDownloads:function(){$("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra"],sortList:[[1,0]],headers:{3:{sorter:!1}}}),$("#limit").on("change",function(){window.location.href=srRoot+"/manage/failedDownloads/?limit="+$(this).val()}),$("#submitMassRemove").on("click",function(){var a=[];return $(".removeCheck").each(function(){this.checked===!0&&a.push($(this).attr("id").split("-")[1])}),0!==a.length&&void $.post(srRoot+"/manage/failedDownloads","toRemove="+a.join("|"),function(){location.reload(!0)})}),$(".removeCheck").length&&$(".removeCheck").each(function(a){var b=null;$(a).click(function(c){if(!b||!c.shiftKey)return void(b=this);var d=this,e=0;$(a+":visible").each(function(){switch(e){case 2:return!1;case 1:this.checked=b.checked}this!==d&&this!==b||e++})})})},massEdit:function(){$("#location").fileBrowser({title:"Select Show Location"})},episodeStatuses:function(){$(".allCheck").on("click",function(){var a=$(this).attr("id").split("-")[1];$("."+a+"-epcheck").prop("checked",$(this).prop("checked"))}),$(".get_more_eps").on("click",function(){var a=$(this).attr("id"),b=$("#allCheck-"+a).prop("checked"),c=$("tr#"+a),d=$(this).attr("data-clicked"),e=$(this).attr("value");d?"collapse"===e.toLowerCase()?($("table tr").filter(".show-"+a).hide(),$(this).prop("value","Expand")):"expand"===e.toLowerCase()&&($("table tr").filter(".show-"+a).show(),$(this).prop("value","Collapse")):($.getJSON(srRoot+"/manage/showEpisodeStatuses",{indexer_id:a,whichStatus:$("#oldStatus").val()},function(d){$.each(d,function(d,e){$.each(e,function(e,f){c.after($.makeEpisodeRow(a,d,e,f,b))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})},subtitleMissed:function(){$(".allCheck").on("click",function(){var a=$(this).attr("id").split("-")[1];$("."+a+"-epcheck").prop("checked",$(this).prop("checked"))}),$(".get_more_eps").on("click",function(){var a=$(this).attr("id"),b=$("#allCheck-"+a).prop("checked"),c=$("tr#"+a),d=$(this).attr("data-clicked"),e=$(this).attr("value");d?"Collapse"===e?($("table tr").filter(".show-"+a).hide(),$(this).prop("value","Expand")):"Expand"===e&&($("table tr").filter(".show-"+a).show(),$(this).prop("value","Collapse")):($.getJSON(srRoot+"/manage/showSubtitleMissed",{indexer_id:a,whichSubs:$("#selectSubLang").val()},function(d){$.each(d,function(d,e){$.each(e,function(e,f){c.after($.makeSubtitleRow(a,d,e,f.name,f.subtitles,b))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})}},history:{init:function(){},index:function(){$("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],sortList:[[0,1]],textExtraction:function(){return isMeta("sickbeard.HISTORY_LAYOUT",["detailed"])?{0:function(a){return $(a).find("time").attr("datetime")},4:function(a){return $(a).find("span").text().toLowerCase()}}:{0:function(a){return $(a).find("time").attr("datetime")},1:function(a){return $(a).find("span").text().toLowerCase()},2:function(a){return $(a).attr("provider").toLowerCase()},5:function(a){return $(a).attr("quality").toLowerCase()}}}(),headers:function(){return isMeta("sickbeard.HISTORY_LAYOUT",["detailed"])?{0:{sorter:"realISODate"},4:{sorter:"quality"}}:{0:{sorter:"realISODate"},4:{sorter:!1},5:{sorter:"quality"}}}()}),$("#history_limit").on("change",function(){var a=srRoot+"/history/?limit="+$(this).val();window.location.href=a})}},errorlogs:{init:function(){},index:function(){},viewlogs:function(){$("#minLevel,#logFilter,#logSearch").on("keyup change",_.debounce(function(){$("#logSearch").val().length>0&&($('#logFilter option[value="<NONE>"]').prop("selected",!0),$("#minLevel option[value=5]").prop("selected",!0)),$("#minLevel").prop("disabled",!0),
$("#logFilter").prop("disabled",!0),document.body.style.cursor="wait";var a=srRoot+"/errorlogs/viewlog/?minLevel="+$("select[name=minLevel]").val()+"&logFilter="+$("select[name=logFilter]").val()+"&logSearch="+$("#logSearch").val();$.get(a,function(b){history.pushState("data","",a),$("pre").html($(b).find("pre").html()),$("#minLevel").prop("disabled",!1),$("#logFilter").prop("disabled",!1),document.body.style.cursor="default"})},500))}},schedule:{init:function(){},index:function(){if(isMeta("sickbeard.COMING_EPS_LAYOUT",["list"])){var a={date:0,show:2,network:5},b=getMeta("sickbeard.COMING_EPS_SORT"),c=b in a?[[a[b],0]]:[[0,0]];$("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort"],sortList:c,textExtraction:{0:function(a){return $(a).find("time").attr("datetime")},1:function(a){return $(a).find("time").attr("datetime")},7:function(a){return $(a).find("span").text().toLowerCase()}},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:!1},9:{sorter:!1}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,filter_saveFilters:!0,columnSelector_mediaquery:!1}}),$("#srRoot").ajaxEpSearch()}isMeta("sickbeard.COMING_EPS_LAYOUT",["banner","poster"])&&($("#srRoot").ajaxEpSearch({size:16,loadingImage:"loading16"+themeSpinner+".gif"}),$(".ep_summary").hide(),$(".ep_summaryTrigger").click(function(){$(this).next(".ep_summary").slideToggle("normal",function(){$(this).prev(".ep_summaryTrigger").attr("src",function(a,b){return $(this).next(".ep_summary").is(":visible")?b.replace("plus","minus"):b.replace("minus","plus")})})})),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTable"),"#popover-target")})}},addShows:{init:function(){$("#tabs").tabs({collapsible:!0,selected:metaToBool("sickbeard.SORT_ARTICLE")?-1:0}),$.initRemoteShowGrid=function(){$("#showsort").val("original"),$("#showsortdirection").val("asc"),$("#showsort").on("change",function(){var a;switch(this.value){case"original":a="original-order";break;case"rating":$("#container").isotope({sortBy:"random"}),a="rating";break;case"rating_votes":a=["rating","votes"];break;case"votes":a="votes";break;default:a="name"}$("#container").isotope({sortBy:a})}),$("#showsortdirection").on("change",function(){$("#container").isotope({sortAscending:"asc"===this.value})}),$("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name:function(a){var b=$(a).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?b:b.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt"}})},$.fn.loadRemoteShows=function(a,b,c){$(this).html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" />&nbsp;'+b),$(this).load(srRoot+a+" #container",function(a,b){"error"===b?$(this).empty().html(c):$.initRemoteShowGrid()})}},index:function(){},newShow:function(){function a(a){$("#white").children().remove(),$("#black").children().remove(),$("#pool").children().remove(),$("#anime").prop("checked")?($("#blackwhitelist").show(),a&&$.getJSON(srRoot+"/home/fetch_releasegroups",{show_name:a},function(a){"success"===a.result&&$.each(a.groups,function(a,b){var c=$("<option>");c.attr("value",b.name),c.html(b.name+" | "+b.rating+" | "+b.range),c.appendTo("#pool")})})):$("#blackwhitelist").hide()}function b(){var b,c;b=$("input:radio[name=whichSeries]:checked").length?$("input:radio[name=whichSeries]:checked").val().split("|")[4]:$("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length?$("#providedName").val():"",a(b);var d="Adding show <b>"+b+"</b> into <b>";if($("#rootDirs option:selected").length){var e=$("#rootDirs option:selected").val();c=e.indexOf("/")>=0?"/":e.indexOf("\\")>=0?"\\":"",e.substr(d.length-1)!==c&&(e+=c),e+="<i>||</i>"+c,d+=e}else d+=$("#fullShowPath").length&&$("#fullShowPath").val().length?$("#fullShowPath").val():"unknown dir.";d+="</b>",b.length?$.get(srRoot+"/addShows/sanitizeFileName",{name:b},function(a){$("#displayText").html(d.replace("||",a))}):$("#displayText").html(d.replace("||","??")),($("#rootDirs option:selected").length||$("#fullShowPath").length&&$("#fullShowPath").val().length)&&$("input:radio[name=whichSeries]:checked").length||$("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length?$("#addShowButton").attr("disabled",!1):$("#addShowButton").attr("disabled",!0)}function c(){if($("#nameToSearch").val().length){e&&e.abort();var a=$("#nameToSearch").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect").val();$("#searchResults").empty().html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" /> searching '+a+"..."),e=$.ajax({url:srRoot+"/addShows/searchIndexersForShowName",data:{search_term:$("#nameToSearch").val().trim(),lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:1e3*parseInt($("#indexer_timeout").val(),10),dataType:"json",error:function(){$("#searchResults").empty().html("search timed out, try again or try another indexer")},success:function(a){var c=!0,d='<fieldset>\n<legend class="legendStep">Search Results:</legend>\n',e="";0===a.results.length?d+="<b>No results found, try a different search.</b>":($.each(a.results,function(b,f){c?(e=" checked",c=!1):e="";var g=f.join("|");if(d+='<input type="radio" id="whichSeries" name="whichSeries" value="'+g.replace(/"/g,"")+'"'+e+" /> ",d+=a.langid&&""!==a.langid?'<a href="'+anonURL+f[2]+f[3]+"&lid="+a.langid+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+f[4]+"</b></a>":'<a href="'+anonURL+f[2]+f[3]+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+f[4]+"</b></a>",null!==f[5]){var h=new Date(f[5]),i=new Date;d+=h>i?" (will debut on "+f[5]+")":" (started on "+f[5]+")"}null!==f[0]&&(d+=" ["+f[0]+"]"),d+="<br>"}),d+="</ul>"),d+="</fieldset>",$("#searchResults").html(d),b(),f.loadsection(0)}})}}function d(a){$(".step").each(function(){$.data(this,"section")+1===a&&$(this).click()})}var e=null;$("#searchName").click(function(){c()}),$("#nameToSearch").length&&$("#nameToSearch").val().length&&$("#searchName").click(),$("#addShowButton").click(function(){return $('input:radio[name="whichSeries"]:checked').val()||$('input:hidden[name="whichSeries"]').val().length?(generateBlackWhiteList(),void $("#addShowForm").submit()):(alert("You must choose a show to continue"),!1)}),$("#skipShowButton").click(function(){$("#skipShow").val("1"),$("#addShowForm").submit()}),$("#qualityPreset").change(function(){f.loadsection(2)}),$("#nameToSearch").focus();var f=new formtowizard({formid:"addShowForm",revealfx:["slide",500],oninit:function(){b(),$("input:hidden[name=whichSeries]").length&&$("#fullShowPath").length&&d(3)}});$("#rootDirText").change(b),$("#searchResults").on("change","#whichSeries",b),$("#nameToSearch").keyup(function(a){13===a.keyCode&&$("#searchName").click()}),$("#anime").change(function(){b(),f.loadsection(2)})},addExistingShow:function(){function a(){var a="";$(".dir_check").each(function(b,c){$(c).is(":checked")&&(a.length&&(a+="&"),a+="rootDir="+encodeURIComponent($(c).attr("id")))}),$("#tableDiv").html('<img id="searchingAnim" src="'+srRoot+'/images/loading32.gif" height="32" width="32" /> loading folders...'),$.post(srRoot+"/addShows/massAddTable/",a,function(a){$("#tableDiv").html(a),$("#addRootDirTable").tablesorter({widgets:["zebra"],headers:{0:{sorter:!1}}})})}$("#tableDiv").on("click","#checkAll",function(){var a=this;$(".dirCheck").each(function(){this.checked=a.checked})}),$("#submitShowDirs").on("click",function(){var a=$("#addShowForm"),b=!1;return $(".dirCheck").each(function(){if(this.checked===!0){var c=$(this).attr("id"),d=$(this).closest("tr").find("select").val();$("<input>",{type:"hidden",name:"shows_to_add",value:d+"|"+c}).appendTo(a),b=!0}}),b!==!1&&($("<input>",{type:"hidden",name:"promptForSettings",value:$("#promptForSettings").prop("checked")?"on":"off"}).appendTo(a),void a.submit())});var b="",c=function(){return b!==$("#rootDirText").val()&&(b=$("#rootDirText").val(),$("#rootDirStaticList").html(""),$("#rootDirs option").each(function(a,b){$("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+$(b).val()+'" checked=checked> <label for="'+$(b).val()+'">'+$(b).val()+"</label></li>")}),void a())};c(),$("#rootDirText").on("change",c),$("#rootDirStaticList").on("click",".dir_check",a),$("#tableDiv").on("click",".showManage",function(a){a.preventDefault(),$("#tabs").tabs("option","active",0),$("html,body").animate({scrollTop:0},1e3)})},recommendedShows:function(){$("#recommendedShows").loadRemoteShows("/addShows/getRecommendedShows/","Loading recommended shows...","Trakt timed out, refresh page to try again")},trendingShows:function(){$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+$("#traktList").val(),"Loading trending shows...","Trakt timed out, refresh page to try again"),$("#traktlistselection").on("change",function(a){var b=a.target.value;window.history.replaceState({},document.title,"?traktList="+b),$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+b,"Loading trending shows...","Trakt timed out, refresh page to try again")})},popularShows:function(){$.initRemoteShowGrid()}}},UTIL={exec:function(a,b){var c=SICKRAGE;b=void 0===b?"init":b,""!==a&&c[a]&&"function"==typeof c[a][b]&&c[a][b]()},init:function(){var a=document.body,b=a.getAttribute("data-controller"),c=a.getAttribute("data-action");UTIL.exec("common"),UTIL.exec(b),UTIL.exec(b,c)}};navigator.userAgent.indexOf("PhantomJS")===-1&&$(document).ready(UTIL.init);