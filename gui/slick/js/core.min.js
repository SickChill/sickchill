function getMeta(a){return $('meta[data-var="'+a+'"]').data("content")}function metaToBool(a){var b=$('meta[data-var="'+a+'"]').data("content");return void 0===b?(console.log(a+" is empty, did you forget to add this to main.mako?"),b):!("false"===(b=isNaN(b)?b.toLowerCase():b.toString())||"none"===b||"0"===b)}function isMeta(a,b){return new RegExp(b.length>1?b.join("|"):b).test($('meta[data-var="'+a+'"]').data("content"))}function notifyModal(a){$("#site-notification-modal .modal-body").html(a),$("#site-notification-modal").modal()}function addSiteMessage(a,b){a=a||"danger",b=b||"",$.post(srRoot+"/ui/set_site_message",{level:a,message:b},function(a){var b=$("#site-messages");if(void 0!==b){b.empty();for(var c in a)a.hasOwnProperty(c)&&b.append('<div class="alert alert-'+a[c].level+' upgrade-notification hidden-print" id="site-message-'+c+'" role="alert"><span>'+a[c].message+'</span><span class="glyphicon glyphicon-check site-message-dismiss pull-right" data-id="'+c+'"/></div>')}}),$("#site-messages").on("click",".site-message-dismiss",function(){var a=$(this).data("id");$("#site-message-"+a).hide(),$.post(srRoot+"/ui/dismiss-site-message",{index:a})})}function shiftReturn(a){return a.length<=1?[]:(a.shift(),a)}var srRoot=getMeta("srRoot"),srDefaultPage=getMeta("srDefaultPage"),srPID=getMeta("srPID"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+srRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif" height="16" width="16" />',configSuccess=function(){$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),window.location.href=srRoot+"/config/providers/"}),$("#email_show").trigger("notify"),$("#prowl_show").trigger("notify")},gt=null;!function(){""!==$("html").attr("lang")?$.ajax({dataType:"json",url:srRoot+"/locale/messages.json",async:!0,success:function(a){gt=new Gettext(a.messages)},failure:function(){gt=new Gettext}}):gt=new Gettext}();var __=_;_=function(a){return gt.gettext(a)};var SICKRAGE={common:{init:function(){!function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"));metaToBool("sickbeard.SICKRAGE_BACKGROUND")&&($.backstretch(srRoot+"/ui/sickrage_background"),$(".backstretch").css("opacity",getMeta("sickbeard.FANART_BACKGROUND_OPACITY")).fadeIn("500"))}(),addSiteMessage(),$.confirm.options={confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(a){location.href=a.context.href}},$("a.shutdown").confirm({title:"Shutdown",text:"Are you sure you want to shutdown SickRage?"}),$("a.restart").confirm({title:"Restart",text:"Are you sure you want to restart SickRage?"}),$("a.removeshow").confirm({title:"Remove Show",text:'Are you sure you want to remove <span class="footerhighlight">'+$("#showtitle").data("showname")+'</span> from the database?<br><br><input type="checkbox" id="deleteFiles" name="deleteFiles"/>&nbsp;<label for="deleteFiles" class="red-text">Check to delete files as well. IRREVERSIBLE</label>',confirm:function(a){location.href=a.context.href+($("#deleteFiles")[0].checked?"&full=1":"")}}),$("a.clearhistory").confirm({title:"Clear History",text:"Are you sure you want to clear all download history?"}),$("a.trimhistory").confirm({title:"Trim History",text:"Are you sure you want to trim all download history older than 30 days?"}),$("a.submiterrors").confirm({title:"Submit Errors",text:'Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SickRage is updated and trigger<br> this error with debug enabled before submitting</span>'}),$("#config-components").tabs({activate:function(a,b){var c=$(this).data("lastOpenedPanel");c||(c=$(b.oldPanel)),$(this).data("topPositionTab")||$(this).data("topPositionTab",$(b.newPanel).position().top),$(b.newPanel).hide().fadeIn(0),c&&c.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")}),$(this).data("lastOpenedPanel",$(b.newPanel))}}),(navigator.maxTouchPoints||0)<2&&$(".dropdown-toggle").on("click",function(){var a=$(this);"true"===a.attr("aria-expanded")&&(window.location.href=a.attr("href"))}),metaToBool("sickbeard.FUZZY_DATING")&&($.timeago.settings.allowFuture=!0,$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},$("[datetime]").timeago()),$(document.body).on("click","a[data-no-redirect]",function(a){return a.preventDefault(),$.get($(this).attr("href")),!1}),$(document.body).on("click",".bulkCheck",function(){var a=this,b=$(a).attr("id");$("."+b+":visible").each(function(){$(this).prop("checked",$(a).prop("checked"))})}),$(".enabler").each(function(){$(this).prop("checked")||$("#content_"+$(this).attr("id")).hide()}),$(".enabler").on("change",function(){$(this).prop("checked")?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")})},QualityChooser:{setFromPresets:function(a){if(0===parseInt(a))return void $("#customQuality").show();$("#customQuality").hide(),$("#anyQualities").find("option").each(function(){var b=a&$(this).val();$(this).attr("selected",b>0&&"selected")}),$("#bestQualities").find("option").each(function(){var b=a&$(this).val()<<16;$(this).attr("selected",b>0&&"selected")})},init:function(){var a=this,b=$("#qualityPreset");b.on("change",function(){a.setFromPresets(b.find(":selected").val())}),a.setFromPresets(b.find(":selected").val())}},updateBlackWhiteList:function(a){$("#white").children().remove(),$("#black").children().remove(),$("#pool").children().remove(),$("#anime").prop("checked")?($("#blackwhitelist").show(),a&&$.getJSON(srRoot+"/home/fetch_releasegroups",{show_name:a},function(a){"success"===a.result&&$.each(a.groups,function(a,b){var c=$("<option>");c.attr("value",b.name),c.html(b.name+" | "+b.rating+" | "+b.range),c.appendTo("#pool")})})):$("#blackwhitelist").hide()}},config:{init:function(){function a(){var a=parseInt($('input[name="git_auth_type"]').filter(":checked").val());$('div[name="content_github_auth_type"]').each(function(b){b===a?$(this).show():$(this).hide()})}$("#config-components").tabs(),$(".viewIf").on("click",function(){$(this).prop("checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").on("click",function(){var a=$("#date_presets").val();$(this).prop("checked")&&"%x"===a?(a="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).prop("checked")||"1"!==$("#date_use_system_default").html()||(a="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),a&&$("#date_presets").val(a)}),$("#configForm").ajaxForm({beforeSubmit:function(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success:function(){setTimeout(function(){"use strict";configSuccess()},2e3)}}),$("#api_key").on("click",function(){$("#api_key").select()}),$("#generate_new_apikey").on("click",function(){$.get(srRoot+"/config/general/generateApiKey",function(a){if(void 0!==a.error)return void notifyModal(a.error);$("#api_key").val(a)})}),$("#branchCheckout").on("click",function(){var a=srRoot+"/home/branchCheckout?branch="+$("#branchVersion").val(),b=srRoot+"/home/getDBcompare";$.getJSON(b,function(b){if("success"===b.status)if("downgrade"===b.message)notifyModal("Can't switch branch as this will result in a database downgrade.");else{var c=!0;"upgrade"===b.message&&(c=confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")),c&&(window.location.href=a)}})}),a(),$('input[name="git_auth_type"]').on("click",function(){a()}),$("#git_token").on("click",function(){$("#git_token").select()}),$("#create_access_token").on("click",function(){notifyModal('<p>Copy the generated token and paste it in the token input box.</p><p><a href="'+anonURL+'https://github.com/settings/tokens/new?description=SickRage&scopes=user,gist,public_repo" target="_blank"><input class="btn" type="button" value="Continue to Github..."></a></p>'),$("#git_token").select()}),$("#manage_tokens").on("click",function(){window.open(anonURL+"https://github.com/settings/tokens","_blank")})},index:function(){$("#log_dir").fileBrowser({title:"Select log file folder location"}),$("#sickrage_background_path").fileBrowser({title:"Select Background Image",key:"sickrage_background_path",includeFiles:1,imagesOnly:1})},backupRestore:function(){$("#Backup").on("click",function(){$("#Backup").attr("disabled",!0),$("#Backup-result").html(loading);var a=$("#backupDir").val();$.get(srRoot+"/config/backuprestore/backup",{backupDir:a}).done(function(a){$("#Backup-result").html(a),$("#Backup").attr("disabled",!1)})}),$("#Restore").on("click",function(){$("#Restore").attr("disabled",!0),$("#Restore-result").html(loading);var a=$("#backupFile").val();$.post(srRoot+"/config/backuprestore/restore",{backupFile:a}).done(function(a){$("#Restore-result").html(a),$("#Restore").attr("disabled",!1)})}),$("#backupDir").fileBrowser({title:"Select backup folder to save to",key:"backupPath"}),$("#backupFile").fileBrowser({title:"Select backup files to restore",key:"backupFile",includeFiles:1}),$("#config-components").tabs()},notifications:function(){function a(a){var b={};if(b.api=$("#pushbullet_api").val(),a&&$("#testPushbullet-result").html(loading),!b.api)return $("#testPushbullet-result").html("You didn't supply a Pushbullet api key"),$("#pushbullet_api").focus(),!1;$.post(srRoot+"/home/getPushbulletDevices",{api:b.api},function(c){b.devices=$.parseJSON(c).devices,b.currentDevice=$("#pushbullet_device").val(),$("#pushbullet_device_list").html("");for(var d=0,e=b.devices.length;d<e;d++)b.devices[d].active===!0&&(b.currentDevice===b.devices[d].iden?$("#pushbullet_device_list").append('<option value="'+b.devices[d].iden+'" selected>'+b.devices[d].nickname+"</option>"):$("#pushbullet_device_list").append('<option value="'+b.devices[d].iden+'">'+b.devices[d].nickname+"</option>"));$("#pushbullet_device_list").prepend('<option value="" '+(""===b.currentDevice?"selected":"")+">All devices</option>"),a&&$("#testPushbullet-result").html(a)}),$("#pushbullet_device_list").on("change",function(){$("#pushbullet_device").val($("#pushbullet_device_list").val()),$("#testPushbullet-result").html("Don't forget to save your new pushbullet settings.")}),$.post(srRoot+"/home/getPushbulletChannels",{api:b.api},function(c){if(b.channels=$.parseJSON(c).channels,b.currentChannel=$("#pushbullet_channel").val(),$("#pushbullet_channel_list").html(""),b.channels.length>0){for(var d=0,e=b.channels.length;d<e;d++)b.channels[d].active===!0?$("#pushbullet_channel_list").append('<option value="'+b.channels[d].tag+'" selected>'+b.channels[d].name+"</option>"):$("#pushbullet_channel_list").append('<option value="'+b.channels[d].tag+'">'+b.channels[d].name+"</option>");$("#pushbullet_channel_list").prepend('<option value="" '+(b.currentChannel?"selected":"")+">No Channel</option>"),$("#pushbullet_channel_list").prop("disabled",!1)}else $("#pushbullet_channel_list").prepend("<option value>No Channels</option>"),$("#pushbullet_channel_list").prop("disabled",!0);a&&$("#testPushbullet-result").html(a),$("#pushbullet_channel_list").on("change",function(){$("#pushbullet_channel").val($("#pushbullet_channel_list").val()),$("#testPushbullet-result").html("Don't forget to save your new pushbullet settings.")})})}function b(){$.getJSON(srRoot+"/home/loadShowNotifyLists",function(a){var b,c;if(0!==a._size){var d=[];for(c in a)"_"!==c.charAt(0)&&d.push(a[c]);var e=d.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0});b='<option value="-1">-- Select --</option>';for(c in e)e[c].id&&e[c].name&&(b+='<option value="'+e[c].id+'">'+$("<div/>").text(e[c].name).html()+"</option>");$("#email_show").html(b),$("#email_show_list").val(""),$("#prowl_show").html(b),$("#prowl_show_list").val("")}})}$("#testGrowl").on("click",function(){var a={};if(a.host=$.trim($("#growl_host").val()),a.password=$.trim($("#growl_password").val()),!a.host)return $("#testGrowl-result").html("Please fill out the necessary fields above."),void $("#growl_host").addClass("warning");$("#growl_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testGrowl-result").html(loading),$.get(srRoot+"/home/testGrowl",{host:a.host,password:a.password}).done(function(a){$("#testGrowl-result").html(a),$("#testGrowl").prop("disabled",!1)})}),$("#testProwl").on("click",function(){var a={};if(a.api=$.trim($("#prowl_api").val()),a.priority=$("#prowl_priority").val(),!a.api)return $("#testProwl-result").html("Please fill out the necessary fields above."),void $("#prowl_api").addClass("warning");$("#prowl_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testProwl-result").html(loading),$.get(srRoot+"/home/testProwl",{prowl_api:a.api,prowl_priority:a.priority}).done(function(a){$("#testProwl-result").html(a),$("#testProwl").prop("disabled",!1)})}),$("#testKODI").on("click",function(){var a={};if(a.host=$.trim($("#kodi_host").val()),a.username=$.trim($("#kodi_username").val()),a.password=$.trim($("#kodi_password").val()),!a.host)return $("#testKODI-result").html("Please fill out the necessary fields above."),void $("#kodi_host").addClass("warning");$("#kodi_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testKODI-result").html(loading),$.get(srRoot+"/home/testKODI",{host:a.host,username:a.username,password:a.password}).done(function(a){$("#testKODI-result").html(a),$("#testKODI").prop("disabled",!1)})}),$("#testPHT").on("click",function(){var a={};if(a.client={},a.client.host=$.trim($("#plex_client_host").val()),a.client.username=$.trim($("#plex_client_username").val()),a.client.password=$.trim($("#plex_client_password").val()),!a.client.host)return $("#testPHT-result").html("Please fill out the necessary fields above."),void $("#plex_client_host").addClass("warning");$("#plex_client_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPHT-result").html(loading),$.get(srRoot+"/home/testPHT",{host:a.client.host,username:a.client.username,password:a.client.password}).done(function(a){$("#testPHT-result").html(a),$("#testPHT").prop("disabled",!1)})}),$("#testPMS").on("click",function(){var a={};if(a.server={},a.server.host=$.trim($("#plex_server_host").val()),a.server.username=$.trim($("#plex_server_username").val()),a.server.password=$.trim($("#plex_server_password").val()),a.server.token=$.trim($("#plex_server_token").val()),!a.server.host)return $("#testPMS-result").html("Please fill out the necessary fields above."),void $("#plex_server_host").addClass("warning");$("#plex_server_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMS-result").html(loading),$.get(srRoot+"/home/testPMS",{host:a.server.host,username:a.server.username,password:a.server.password,plex_server_token:a.server.token}).done(function(a){$("#testPMS-result").html(a),$("#testPMS").prop("disabled",!1)})}),$("#testEMBY").on("click",function(){var a={};if(a.host=$("#emby_host").val(),a.apikey=$("#emby_apikey").val(),!a.host||!a.apikey)return $("#testEMBY-result").html("Please fill out the necessary fields above."),a.host?$("#emby_host").removeClass("warning"):$("#emby_host").addClass("warning"),void(a.apikey?$("#emby_apikey").removeClass("warning"):$("#emby_apikey").addClass("warning"));$("#emby_host,#emby_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testEMBY-result").html(loading),$.get(srRoot+"/home/testEMBY",{host:a.host,emby_apikey:a.apikey}).done(function(a){$("#testEMBY-result").html(a),$("#testEMBY").prop("disabled",!1)})}),$("#testBoxcar2").on("click",function(){var a={};if(a.accesstoken=$.trim($("#boxcar2_accesstoken").val()),!a.accesstoken)return $("#testBoxcar2-result").html("Please fill out the necessary fields above."),void $("#boxcar2_accesstoken").addClass("warning");$("#boxcar2_accesstoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar2-result").html(loading),$.get(srRoot+"/home/testBoxcar2",{accesstoken:a.accesstoken}).done(function(a){$("#testBoxcar2-result").html(a),$("#testBoxcar2").prop("disabled",!1)})}),$("#testPushover").on("click",function(){var a={};if(a.userkey=$("#pushover_userkey").val(),a.apikey=$("#pushover_apikey").val(),!a.userkey||!a.apikey)return $("#testPushover-result").html("Please fill out the necessary fields above."),a.userkey?$("#pushover_userkey").removeClass("warning"):$("#pushover_userkey").addClass("warning"),void(a.apikey?$("#pushover_apikey").removeClass("warning"):$("#pushover_apikey").addClass("warning"));$("#pushover_userkey,#pushover_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushover-result").html(loading),$.get(srRoot+"/home/testPushover",{userKey:a.userkey,apiKey:a.apikey}).done(function(a){$("#testPushover-result").html(a),$("#testPushover").prop("disabled",!1)})}),$("#testLibnotify").on("click",function(){$("#testLibnotify-result").html(loading),$.get(srRoot+"/home/testLibnotify",function(a){$("#testLibnotify-result").html(a)})}),$("#twitterStep1").on("click",function(){$("#testTwitter-result").html(loading),$.get(srRoot+"/home/twitterStep1",function(a){window.open(a)}).done(function(){$("#testTwitter-result").html("<b>Step1:</b> Confirm Authorization")})}),$("#twitterStep2").on("click",function(){var a={};if(a.key=$.trim($("#twitter_key").val()),!a.key)return $("#testTwitter-result").html("Please fill out the necessary fields above."),void $("#twitter_key").addClass("warning");$("#twitter_key").removeClass("warning"),$("#testTwitter-result").html(loading),$.get(srRoot+"/home/twitterStep2",{key:a.key},function(a){$("#testTwitter-result").html(a)})}),$("#testTwitter").on("click",function(){$.post(srRoot+"/home/testTwitter",function(a){$("#testTwitter-result").html(a)})}),$("#testTwilio").on("click",function(){$("#testTwilio").addClass("disabled"),$.post(srRoot+"/home/testTwilio",function(a){$("#testTwilio-result").html(a)}).always(function(){$("#testTwilio").removeClass("disabled")})}),$("#testSlack").on("click",function(){$.post(srRoot+"/home/testSlack",function(a){$("#testSlack-result").html(a)})}),$("#testDiscord").on("click",function(){$.get(srRoot+"/home/testDiscord",function(a){$("#testDiscord-result").html(a)})}),$("#settingsNMJ").on("click",function(){var a={};if(!$("#nmj_host").val())return $("#nmj_host").focus(),void notifyModal("Please fill in the Popcorn IP address");$("#testNMJ-result").html(loading),a.host=$("#nmj_host").val(),$.post(srRoot+"/home/settingsNMJ",{host:a.host},function(a){null===a&&($("#nmj_database").removeAttr("readonly"),$("#nmj_mount").removeAttr("readonly"));var b=$.parseJSON(a);$("#testNMJ-result").html(b.message),$("#nmj_database").val(b.database),$("#nmj_mount").val(b.mount),b.database?$("#nmj_database").attr("readonly",!0):$("#nmj_database").removeAttr("readonly"),b.mount?$("#nmj_mount").attr("readonly",!0):$("#nmj_mount").removeAttr("readonly")})}),$("#testNMJ").on("click",function(){var a={};if(a.host=$.trim($("#nmj_host").val()),a.database=$("#nmj_database").val(),a.mount=$("#nmj_mount").val(),!a.host)return $("#testNMJ-result").html("Please fill out the necessary fields above."),void $("#nmj_host").addClass("warning");$("#nmj_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJ-result").html(loading),$.post(srRoot+"/home/testNMJ",{host:a.host,database:a.database,mount:a.mount}).done(function(a){$("#testNMJ-result").html(a),$("#testNMJ").prop("disabled",!1)})}),$("#settingsNMJv2").on("click",function(){var a={};if(!$("#nmjv2_host").val())return $("#nmjv2_host").focus(),void notifyModal("Please fill in the Popcorn IP address","modal");$("#testNMJv2-result").html(loading),a.host=$("#nmjv2_host").val(),a.dbloc="";for(var b=document.getElementsByName("nmjv2_dbloc"),c=0,d=b.length;c<d;c++)if(b[c].checked){a.dbloc=b[c].value;break}a.dbinstance=$("#NMJv2db_instance").val(),$.post(srRoot+"/home/settingsNMJv2",{host:a.host,dbloc:a.dbloc,instance:a.dbinstance},function(a){null===a&&$("#nmjv2_database").removeAttr("readonly");var b=$.parseJSON(a);$("#testNMJv2-result").html(b.message),$("#nmjv2_database").val(b.database),b.database?$("#nmjv2_database").attr("readonly",!0):$("#nmjv2_database").removeAttr("readonly")})}),$("#testNMJv2").on("click",function(){var a={};if(a.host=$.trim($("#nmjv2_host").val()),!a.host)return $("#testNMJv2-result").html("Please fill out the necessary fields above."),void $("#nmjv2_host").addClass("warning");$("#nmjv2_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJv2-result").html(loading),$.post(srRoot+"/home/testNMJv2",{host:a.host}).done(function(a){$("#testNMJv2-result").html(a),$("#testNMJv2").prop("disabled",!1)})}),$("#testFreeMobile").on("click",function(){var a={};if(a.id=$.trim($("#freemobile_id").val()),a.apikey=$.trim($("#freemobile_apikey").val()),!a.id||!a.apikey)return $("#testFreeMobile-result").html("Please fill out the necessary fields above."),a.id?$("#freemobile_id").removeClass("warning"):$("#freemobile_id").addClass("warning"),void(a.apikey?$("#freemobile_apikey").removeClass("warning"):$("#freemobile_apikey").addClass("warning"));$("#freemobile_id,#freemobile_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testFreeMobile-result").html(loading),$.post(srRoot+"/home/testFreeMobile",{freemobile_id:a.id,freemobile_apikey:a.apikey}).done(function(a){$("#testFreeMobile-result").html(a),$("#testFreeMobile").prop("disabled",!1)})}),$("#testTelegram").on("click",function(){var a={};if(a.id=$.trim($("#telegram_id").val()),a.apikey=$.trim($("#telegram_apikey").val()),!a.id||!a.apikey)return $("#testTelegram-result").html("Please fill out the necessary fields above."),a.id?$("#telegram_id").removeClass("warning"):$("#telegram_id").addClass("warning"),void(a.apikey?$("#telegram_apikey").removeClass("warning"):$("#telegram_apikey").addClass("warning"));$("#telegram_id,#telegram_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testTelegram-result").html(loading),$.post(srRoot+"/home/testTelegram",{telegram_id:a.id,telegram_apikey:a.apikey}).done(function(a){$("#testTelegram-result").html(a),$("#testTelegram").prop("disabled",!1)})}),$("#testJoin").on("click",function(){var a={};if(a.id=$.trim($("#join_id").val()),!a.id)return $("#testJoin-result").html("Please fill out the necessary fields above."),void(a.id?$("#join_id").removeClass("warning"):$("#join_id").addClass("warning"));$("#join_id,#join_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testJoin-result").html(loading),$.post(srRoot+"/home/testJoin",{join_id:a.id}).done(function(a){$("#testJoin-result").html(a),$("#testJoin").prop("disabled",!1)})}),$("#TraktGetPin").on("click",function(){window.open($("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),$("#trakt_pin").removeClass("hide")}),$("#trakt_pin").on("keyup change",function(){0!==$("#trakt_pin").val().length?($("#TraktGetPin").addClass("hide"),$("#authTrakt").removeClass("hide")):($("#TraktGetPin").removeClass("hide"),$("#authTrakt").addClass("hide"))}),$("#authTrakt").on("click",function(){var a={};a.pin=$("#trakt_pin").val(),0!==a.pin.length&&$.post(srRoot+"/home/getTraktToken",{trakt_pin:a.pin}).done(function(a){$("#testTrakt-result").html(a),$("#authTrakt").addClass("hide"),$("#trakt_pin").addClass("hide"),$("#TraktGetPin").addClass("hide")})}),$("#testTrakt").on("click",function(){var a={};return a.username=$.trim($("#trakt_username").val()),a.trendingBlacklist=$.trim($("#trakt_blacklist_name").val()),a.username?/\s/g.test(a.trendingBlacklist)?($("#testTrakt-result").html("Check blacklist name; the value needs to be a trakt slug"),void $("#trakt_blacklist_name").addClass("warning")):($("#trakt_username").removeClass("warning"),$("#trakt_blacklist_name").removeClass("warning"),$(this).prop("disabled",!0),$("#testTrakt-result").html(loading),void $.post(srRoot+"/home/testTrakt",{username:a.username,blacklist_name:a.trendingBlacklist}).done(function(a){$("#testTrakt-result").html(a),$("#testTrakt").prop("disabled",!1)})):($("#testTrakt-result").html("Please fill out the necessary fields above."),void(a.username?$("#trakt_username").removeClass("warning"):$("#trakt_username").addClass("warning")))}),$("#testEmail").on("click",function(){var a,b,c,d,e,f,g,h,i;a=$("#testEmail-result"),a.html(loading),b=$("#email_host").val(),b=b.length>0?b:null,c=$("#email_port").val(),c=c.length>0?c:null,d=void 0!==$("#email_tls").attr("checked")?1:0,e=$("#email_from").val(),e=e.length>0?e:"root@localhost",f=$("#email_user").val().trim(),g=$("#email_password").val(),h="",null===b&&(h+='<li style="color: red;">You must specify an SMTP hostname!</li>'),null===c?h+='<li style="color: red;">You must specify an SMTP port!</li>':(null===c.match(/^\d+$/)||parseInt(c,10)>65535)&&(h+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'),h.length>0?(h="<ol>"+h+"</ol>",a.html(h)):(i=prompt("Enter an email address to send the test to:",null),null===i||0===i.length||null===i.match(/.*@.*/)?a.html('<p style="color: red;">You must provide a recipient email address!</p>'):$.post(srRoot+"/home/testEmail",{host:b,port:c,smtp_from:e,use_tls:d,user:f,pwd:g,to:i},function(a){$("#testEmail-result").html(a)}))}),$("#testNMA").on("click",function(){var a={};if(a.api=$.trim($("#nma_api").val()),a.priority=$("#nma_priority").val(),!a.api)return $("#testNMA-result").html("Please fill out the necessary fields above."),void $("#nma_api").addClass("warning");$("#nma_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMA-result").html(loading),$.post(srRoot+"/home/testNMA",{nma_api:a.api,nma_priority:a.priority}).done(function(a){$("#testNMA-result").html(a),$("#testNMA").prop("disabled",!1)})}),$("#testPushalot").on("click",function(){var a={};if(a.authToken=$.trim($("#pushalot_authorizationtoken").val()),!a.authToken)return $("#testPushalot-result").html("Please fill out the necessary fields above."),void $("#pushalot_authorizationtoken").addClass("warning");$("#pushalot_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushalot-result").html(loading),$.post(srRoot+"/home/testPushalot",{authorizationToken:a.authToken}).done(function(a){$("#testPushalot-result").html(a),$("#testPushalot").prop("disabled",!1)})}),$("#testPushbullet").on("click",function(){var a={};if(a.api=$.trim($("#pushbullet_api").val()),!a.api)return $("#testPushbullet-result").html("Please fill out the necessary fields above."),void $("#pushbullet_api").addClass("warning");$("#pushbullet_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushbullet-result").html(loading),$.post(srRoot+"/home/testPushbullet",{api:a.api}).done(function(a){$("#testPushbullet-result").html(a),$("#testPushbullet").prop("disabled",!1)})}),$("#getPushbulletDevices").on("click",function(){a("Device list updated. Please choose a device to push to.")}),a(),$("#email_show").on("change",function(){var a=parseInt($("#email_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(b){b._size>0&&$("#email_show_list").val(a>=0?b[a.toString()].list:"")})}),$("#prowl_show").on("change",function(){var a=parseInt($("#prowl_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(b){b._size>0&&$("#prowl_show_list").val(a>=0?b[a.toString()].prowl_notify_list:"")})}),b(),$("#email_show").on("notify",function(){b()}),$("#prowl_show").on("notify",function(){b()}),$("#email_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},function(){b()})}),$("#prowl_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#prowl_show").val(),prowlAPIs:$("#prowl_show_list").val()},function(){b()})}),$("#use_plex_server").on("click",function(){$(this).is(":checked")?$(".plexinfo").removeClass("hide"):$(".plexinfo").addClass("hide")})},postProcessing:function(){function a(){$.post(srRoot+"/config/postProcessing/isRarSupported",function(a){"supported"!==a&&($("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#unpack").qtip("toggle",!0),$("#unpack").css("background-color","#FFFFDD"))})}function b(){var a={};a.pattern=$("#naming_pattern").val(),a.multi=$("#naming_multi_ep :selected").val(),a.animeType=$('input[name="naming_anime"]:checked').val(),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,anime_type:3},function(a){a?($("#naming_example").text(a+".ext"),$("#naming_example_div").show()):$("#naming_example_div").hide()}),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,multi:a.multi,anime_type:3},function(a){a?($("#naming_example_multi").text(a+".ext"),$("#naming_example_multi_div").show()):$("#naming_example_multi_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:a.pattern,multi:a.multi,anime_type:a.animeType},function(a){var b;"invalid"===a?(b=_("This pattern is invalid."),$("#naming_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?(b=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):(b=_("This pattern is valid."),$("#naming_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF")),$("#naming_pattern").attr("title",b)})}function c(){var a=$("#naming_abd_pattern").val();$.post(srRoot+"/config/postProcessing/testNaming",{pattern:a,abd:"True"},function(a){a?($("#naming_abd_example").text(a+".ext"),$("#naming_abd_example_div").show()):$("#naming_abd_example_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,abd:"True"},function(a){var b;"invalid"===a?(b=_("This pattern is invalid."),$("#naming_abd_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?(b=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_abd_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFFFDD")):(b=_("This pattern is valid."),$("#naming_abd_pattern").qtip("option",{"content.text":b,
"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_abd_pattern").qtip("toggle",!1),$("#naming_abd_pattern").css("background-color","#FFFFFF")),$("#naming_abd_pattern").attr("title",b)})}function d(){var a=$("#naming_sports_pattern").val();$.post(srRoot+"/config/postProcessing/testNaming",{pattern:a,sports:"True"},function(a){a?($("#naming_sports_example").text(a+".ext"),$("#naming_sports_example_div").show()):$("#naming_sports_example_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,sports:"True"},function(a){var b;"invalid"===a?(b=_("This pattern is invalid."),$("#naming_sports_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?(b=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_sports_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFFFDD")):(b=_("This pattern is valid."),$("#naming_sports_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_sports_pattern").qtip("toggle",!1),$("#naming_sports_pattern").css("background-color","#FFFFFF")),$("#naming_sports_pattern").attr("title",b)})}function e(){var a={};a.pattern=$("#naming_anime_pattern").val(),a.multi=$("#naming_anime_multi_ep :selected").val(),a.animeType=$('input[name="naming_anime"]:checked').val(),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,anime_type:a.animeType},function(a){a?($("#naming_example_anime").text(a+".ext"),$("#naming_example_anime_div").show()):$("#naming_example_anime_div").hide()}),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:a.pattern,multi:a.multi,anime_type:a.animeType},function(a){a?($("#naming_example_multi_anime").text(a+".ext"),$("#naming_example_multi_anime_div").show()):$("#naming_example_multi_anime_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:a.pattern,multi:a.multi,anime_type:a.animeType},function(a){var b;"invalid"===a?(b=_("This pattern is invalid."),$("#naming_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===a?(b=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):(b=_("This pattern is valid."),$("#naming_pattern").qtip("option",{"content.text":b,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF")),$("#naming_pattern").attr("title",b)})}function f(){"custom..."===$("#name_presets :selected").val().toLowerCase()?$("#naming_custom").show():($("#naming_custom").hide(),$("#naming_pattern").val($("#name_presets :selected").attr("id"))),b()}function g(){"custom..."===$("#name_abd_presets :selected").val().toLowerCase()?$("#naming_abd_custom").show():($("#naming_abd_custom").hide(),$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))),c()}function h(){"custom..."===$("#name_sports_presets :selected").val().toLowerCase()?$("#naming_sports_custom").show():($("#naming_sports_custom").hide(),$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))),d()}function i(){"custom..."===$("#name_anime_presets :selected").val().toLowerCase()?$("#naming_anime_custom").show():($("#naming_anime_custom").hide(),$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))),e()}$("#config-components").tabs(),$("#tv_download_dir").fileBrowser({title:"Select TV Download Directory"}),$("#unpack_dir").fileBrowser({title:"Select Unpack Directory"});var j=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();1!==parseInt($("#unpack").val())&&$("#content_unpack").hide(),$("#unpack").on("change",function(){switch(parseInt(this.value)){case 0:case 2:$("#content_unpack").fadeOut("fast","linear"),$("#unpack").qtip("toggle",!1);break;case 1:$("#content_unpack").fadeIn("fast","linear"),a()}}),$("#name_presets").on("change",function(){f()}),$("#name_abd_presets").on("change",function(){g()}),$("#naming_custom_abd").on("change",function(){g()}),$("#name_sports_presets").on("change",function(){h()}),$("#naming_custom_sports").on("change",function(){h()}),$("#name_anime_presets").on("change",function(){i()}),$("#naming_custom_anime").on("change",function(){i()}),$('input[name="naming_anime"]').on("click",function(){i()}),$("#naming_multi_ep").on("change",b),$("#naming_pattern").on("focusout",b),$("#naming_pattern").on("keyup",function(){j(function(){b()},500)}),$("#naming_anime_multi_ep").on("change",e),$("#naming_anime_pattern").on("focusout",e),$("#naming_anime_pattern").on("keyup",function(){j(function(){e()},500)}),$("#naming_abd_pattern").on("focusout",b),$("#naming_abd_pattern").on("keyup",function(){j(function(){c()},500)}),$("#naming_sports_pattern").on("focusout",b),$("#naming_sports_pattern").on("keyup",function(){j(function(){d()},500)}),$("#naming_anime_pattern").on("focusout",b),$("#naming_anime_pattern").on("keyup",function(){j(function(){e()},500)}),$("#show_naming_key").on("click",function(){$("#naming_key").toggle()}),$("#show_naming_abd_key").on("click",function(){$("#naming_abd_key").toggle()}),$("#show_naming_sports_key").on("click",function(){$("#naming_sports_key").toggle()}),$("#show_naming_anime_key").on("click",function(){$("#naming_anime_key").toggle()}),$("#do_custom").on("click",function(){$("#naming_pattern").val($("#name_presets :selected").attr("id")),$("#naming_custom").show(),$("#naming_pattern").focus()}),f(),g(),h(),i(),$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()}),$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){var a=$(this).attr("id");$("#metadataType :selected").val()===a?$(this).show():$(this).hide()})},$(this).showHideMetadata(),$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(!1)}),$.fn.refreshMetadataConfig=function(a){var b=0,c="";$(".metadataDiv").each(function(){var a=$(this).attr("id"),d=[],e=$("#"+a+"_show_metadata").prop("checked"),f=$("#"+a+"_episode_metadata").prop("checked"),g=$("#"+a+"_fanart").prop("checked"),h=$("#"+a+"_poster").prop("checked"),i=$("#"+a+"_banner").prop("checked"),j=$("#"+a+"_episode_thumbnails").prop("checked"),k=$("#"+a+"_season_posters").prop("checked"),l=$("#"+a+"_season_banners").prop("checked"),m=$("#"+a+"_season_all_poster").prop("checked"),n=$("#"+a+"_season_all_banner").prop("checked");d.push(e?"1":"0"),d.push(f?"1":"0"),d.push(g?"1":"0"),d.push(h?"1":"0"),d.push(i?"1":"0"),d.push(j?"1":"0"),d.push(k?"1":"0"),d.push(l?"1":"0"),d.push(m?"1":"0"),d.push(n?"1":"0");for(var o=0,p=0,q=d.length;p<q;p++)o+=parseInt(d[p]);o>b&&(b=o,c=a),$("#"+a+"_eg_show_metadata").attr("class",e?"enabled":"disabled"),$("#"+a+"_eg_episode_metadata").attr("class",f?"enabled":"disabled"),$("#"+a+"_eg_fanart").attr("class",g?"enabled":"disabled"),$("#"+a+"_eg_poster").attr("class",h?"enabled":"disabled"),$("#"+a+"_eg_banner").attr("class",i?"enabled":"disabled"),$("#"+a+"_eg_episode_thumbnails").attr("class",j?"enabled":"disabled"),$("#"+a+"_eg_season_posters").attr("class",k?"enabled":"disabled"),$("#"+a+"_eg_season_banners").attr("class",l?"enabled":"disabled"),$("#"+a+"_eg_season_all_poster").attr("class",m?"enabled":"disabled"),$("#"+a+"_eg_season_all_banner").attr("class",n?"enabled":"disabled"),$("#"+a+"_data").val(d.join("|"))}),""!==c&&a&&($("#metadataType option[value="+c+"]").attr("selected","selected"),$(this).showHideMetadata())},$(this).refreshMetadataConfig(!0),$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search:function(){$("#config-components").tabs(),$("#nzb_dir").fileBrowser({title:"Select .nzb black hole/watch location"}),$("#torrent_dir").fileBrowser({title:"Select .torrent black hole/watch location"}),$("#torrent_path").fileBrowser({title:"Select .torrent download location"}),$.fn.nzbMethodHandler=function(){var a=$("#nzb_method :selected").val();$("#nzb_method_icon").removeClass(function(a,b){return(b.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),$("#nzb_method_icon").addClass("add-client-icon-"+a.replace("_","-")),$("#blackhole_settings").hide(),$("#sabnzbd_settings").hide(),$("#testSABnzbd").hide(),$("#testSABnzbd_result").hide(),$("#nzbget_settings").hide(),$("#download_station_settings").hide(),$("#testDSM").hide(),$("#testDSM_result").hide(),"blackhole"===a.toLowerCase()?$("#blackhole_settings").show():"nzbget"===a.toLowerCase()?$("#nzbget_settings").show():"download_station"===a.toLowerCase()?($("#download_station_settings").show(),$("#testDSM").show(),$("#testDSM_result").show()):($("#sabnzbd_settings").show(),$("#testSABnzbd").show(),$("#testSABnzbd_result").show())},$.torrentMethodHandler=function(){$("#options_torrent_clients").hide(),$("#options_torrent_blackhole").hide();var a=$("#torrent_method :selected").val(),b="",c="#options_torrent_blackhole";$("#torrent_method_icon").removeClass(function(a,b){return(b.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),$("#torrent_method_icon").addClass("add-client-icon-"+a.replace("_","-")),"blackhole"!==a.toLowerCase()&&($("#label_warning_deluge").hide(),$("#label_anime_warning_deluge").hide(),$("#host_desc_torrent").show(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_auth_type_option").hide(),$("#torrent_path_option").show(),$("#torrent_path_option").find(".fileBrowser").show(),$("#torrent_seed_time_option").hide(),$("#torrent_high_bandwidth_option").hide(),$("#torrent_label_option").show(),$("#torrent_label_anime_option").show(),$("#path_synology").hide(),$("#torrent_paused_option").show(),$("#torrent_rpcurl_option").hide(),$("#torrent_host_option").show(),"utorrent"===a.toLowerCase()?(b="uTorrent",$("#torrent_path_option").hide(),$("#torrent_seed_time_label").text("Minimum seeding time is"),$("#torrent_seed_time_option").show(),$("#host_desc_torrent").text("URL to your uTorrent client (e.g. http://localhost:8000)")):"transmission"===a.toLowerCase()?(b="Transmission",$("#torrent_seed_time_label").text("Stop seeding when inactive for"),$("#torrent_seed_time_option").show(),$("#torrent_high_bandwidth_option").show(),$("#torrent_label_option").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_rpcurl_option").show(),$("#host_desc_torrent").text("URL to your Transmission client (e.g. http://localhost:9091)")):"deluge"===a.toLowerCase()?(b="Deluge",$("#torrent_verify_cert_option").show(),$("#torrent_verify_deluge").show(),$("#torrent_verify_rtorrent").hide(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#host_desc_torrent").text("URL to your Deluge client (e.g. http://localhost:8112)")):"deluged"===a.toLowerCase()?(b="Deluge",$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_username_option").show(),$("#host_desc_torrent").text("IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)")):"download_station"===a.toLowerCase()?(b="Synology DS",$("#torrent_label_option").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_path_option").find(".fileBrowser").hide(),$("#host_desc_torrent").text("URL to your Synology DS client (e.g. http://localhost:5000)"),$("#path_synology").show()):"rtorrent"===a.toLowerCase()?(b="rTorrent",$("#host_desc_torrent").text("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)"),$("#torrent_verify_cert_option").show(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").show(),$("#torrent_auth_type_option").show()):"qbittorrent"===a.toLowerCase()?(b="qbittorrent",$("#torrent_path_option").hide(),$("#label_warning_qbittorrent").show(),$("#label_anime_warning_qbittorrent").show(),$("#host_desc_torrent").text("URL to your qbittorrent client (e.g. http://localhost:8080)")):"mlnet"===a.toLowerCase()?(b="mlnet",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#host_desc_torrent").text("URL to your MLDonkey (e.g. http://localhost:4080)")):"putio"===a.toLowerCase()&&(b="putio",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_host_option").hide(),$("#host_desc_torrent").text("URL to your putio client (e.g. http://localhost:8080)")),$("#host_title").text(b+" host:port"),$("#username_title").text(b+" username"),$("#password_title").text(b+" password"),$("#torrent_client").text(b),$("#rpcurl_title").text(b+" RPC URL"),c="#options_torrent_clients"),$(c).show()},$("#torrent_host").on("input",function(){if("rtorrent"===$("#torrent_method :selected").val().toLowerCase()){"scgi://"===$("#torrent_host").val().substr(0,7)?($("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#torrent_password_option").hide(),$("#torrent_password").prop("value",""),$("#torrent_auth_type_option").hide(),$("#torrent_auth_type option[value=none]").attr("selected","selected")):($("#torrent_username_option").show(),$("#torrent_password_option").show(),$("#torrent_auth_type_option").show())}}),$("#nzb_method").on("change",$(this).nzbMethodHandler),$(this).nzbMethodHandler(),$("#testSABnzbd").on("click",function(){var a={};$("#testSABnzbd_result").html(loading),a.host=$("#sab_host").val(),a.username=$("#sab_username").val(),a.password=$("#sab_password").val(),a.apiKey=$("#sab_apikey").val(),$.post(srRoot+"/home/testSABnzbd",{host:a.host,username:a.username,password:a.password,apikey:a.apiKey},function(a){$("#testSABnzbd_result").html(a)})}),$("#testDSM").on("click",function(){var a={};$("#testDSM_result").html(loading),a.host=$("#syno_dsm_host").val(),a.username=$("#syno_dsm_user").val(),a.password=$("#syno_dsm_pass").val(),$.post(srRoot+"/home/testDSM",{host:a.host,username:a.username,password:a.password},function(a){$("#testDSM_result").html(a)})}),$("#torrent_method").on("change",$.torrentMethodHandler),$.torrentMethodHandler(),$("#test_torrent").on("click",function(){var a={};$("#test_torrent_result").html(loading),a.method=$("#torrent_method :selected").val(),a.host=$("#torrent_host").val(),a.username=$("#torrent_username").val(),a.password=$("#torrent_password").val(),"putio"===a.method.toLowerCase()&&$.post(srRoot+"/home/putio_authorize",function(a){window.open(a)}).done(function(){$("#test_torrent_result").html("Confirm Authorization")}),$.post(srRoot+"/home/testTorrent",{torrent_method:a.method,host:a.host,username:a.username,password:a.password},function(a){$("#test_torrent_result").html(a)})})},subtitles:function(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){var a=$(this).attr("id");$("#editAService :selected").val()+"Div"===a?$(this).show():$(this).hide()})},$.fn.addService=function(a,b,c,d,e,f){if(null===c.match("/$")&&(c+="/"),0===$("#service_order_list > #"+a).length&&f!==!1){var g='<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="service_enabler" CHECKED> <a href="'+anonURL+c+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/services/newznab.gif" alt="'+b+'" width="16" height="16"></a> '+b+"</li>";$("#service_order_list").append(g),$("#service_order_list").sortable("refresh")}},$.fn.deleteService=function(a){$("#service_order_list > #"+a).remove()},$.fn.refreshServiceList=function(){var a=$("#service_order_list").sortable("toArray"),b=[];$.each(a,function(a,c){var d=+$("#enable_"+c).prop("checked")?"1":"0";b.push(c+":"+d)}),$("#service_order").val(b.join(" "))},$("#editAService").on("change",function(){$(this).showHideServices()}),$(".service_enabler").on("click",function(){$(this).refreshServiceList()}),$(this).showHideServices(),$("#service_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshServiceList()},create:function(){$(this).refreshServiceList()}}),$("#service_order_list").disableSelection()},providers:function(){$.fn.showHideProviders=function(){$(".providerDiv").each(function(){var a=$(this).attr("id");$("#editAProvider :selected").val()+"Div"==a?$(this).show():$(this).hide()})};var a=function(a,b){var c=!1;return a.forEach(function(a){a.name===b&&(c=!0),console.log(a.name+" while searching for: "+b)}),c};$.fn.getCategories=function(a,b){var c=b[0],d=b[1],e=b[2];if(c&&d&&e){var f={url:d,name:c,key:e};$(".updating_categories").wrapInner('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Updating Categories ...</span>');$.getJSON(srRoot+"/config/providers/getNewznabCategories",f,function(a){$(this).updateNewznabCaps(a,b)}).always(function(){$(".updating_categories").empty()})}};var b=[],c=[];$.fn.addProvider=function(a,c,d,e,f,g,h){if(d=$.trim(d)){/^https?:\/\//i.test(d)||(d="http://"+d),null===d.match("/$")&&(d+="/");var i=[g,[c,d,e,f]];if(b[a]=i,$("#editANewznabProvider").addOption(a,c),$(this).populateNewznabSection(),0===$("#provider_order_list > #"+a).length&&h!==!1){var j='<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="provider_enabler" CHECKED> <a href="'+anonURL+d+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/providers/newznab.png" alt="'+c+'" width="16" height="16"></a> '+c+"</li>";$("#provider_order_list").append(j),$("#provider_order_list").sortable("refresh")}$(this).makeNewznabProviderString()}},$.fn.addTorrentRssProvider=function(a,b,d,e,f){var g=[b,d,e,f];c[a]=g,$("#editATorrentRssProvider").addOption(a,b),$(this).populateTorrentRssSection(),0===$("#provider_order_list > #"+a).length&&($("#provider_order_list").append('<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="provider_enabler" CHECKED> <a href="'+anonURL+d+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/providers/torrentrss.png" alt="'+b+'" width="16" height="16"></a> '+b+"</li>"),$("#provider_order_list").sortable("refresh")),$(this).makeTorrentRssProviderString()},$.fn.updateProvider=function(a,c,d,e){b[a][1][1]=c,b[a][1][2]=d,b[a][1][3]=e,$(this).populateNewznabSection(),$(this).makeNewznabProviderString()},$.fn.deleteProvider=function(a){$("#editANewznabProvider").removeOption(a),delete b[a],$(this).populateNewznabSection(),$("li").remove("#"+a),$(this).makeNewznabProviderString()},$.fn.updateTorrentRssProvider=function(a,b,d,e){c[a][1]=b,c[a][2]=d,c[a][3]=e,$(this).populateTorrentRssSection(),$(this).makeTorrentRssProviderString()},$.fn.deleteTorrentRssProvider=function(a){$("#editATorrentRssProvider").removeOption(a),delete c[a],$(this).populateTorrentRssSection(),$("li").remove("#"+a),$(this).makeTorrentRssProviderString()},$.fn.populateNewznabSection=function(){var c=$("#editANewznabProvider :selected").val(),d="",e="",f="";"addNewznab"===c?(d=["","",""],e=0,$("#newznab_add_div").show(),$("#newznab_update_div").hide(),$("#newznab_cat").attr("disabled","disabled"),$("#newznab_cap").attr("disabled","disabled"),$("#newznab_cat_update").attr("disabled","disabled"),$("#newznabcapdiv").hide(),$("#newznab_cat option").each(function(){$(this).remove()}),$("#newznab_cap option").each(function(){$(this).remove()})):(d=b[c][1],e=b[c][0],$("#newznab_add_div").hide(),$("#newznab_update_div").show(),$("#newznab_cat").removeAttr("disabled"),$("#newznab_cap").removeAttr("disabled"),$("#newznab_cap:has(option)").length?$("#newznab_cat_update").removeAttr("disabled"):$("#newznab_cat_update").attr("disabled","disabled"),$("#newznabcapdiv").show()),$("#newznab_name").val(d[0]),$("#newznab_url").val(d[1]),$("#newznab_key").val(d[2]),f="string"==typeof d[3]?d[3].split(","):d[3];var g=[];f&&(f.forEach(function(a){""!==a&&g.push({text:a,value:a})}),$("#newznab_cat").replaceOptions(g)),"addNewznab"===c?($("#newznab_name").removeAttr("disabled"),$("#newznab_url").removeAttr("disabled")):($("#newznab_name").attr("disabled","disabled"),e?($("#newznab_url").attr("disabled","disabled"),$("#newznab_delete").attr("disabled","disabled")):($("#newznab_url").removeAttr("disabled"),$("#newznab_delete").removeAttr("disabled")),d[0]&&d[1]&&d[2]&&!a($.fn.newznabProvidersCapabilities,d[0])&&$(this).getCategories(e,d),$(this).updateNewznabCaps(null,d))},$.fn.updateNewznabCaps=function(b,c){b&&!a($.fn.newznabProvidersCapabilities,c[0])&&$.fn.newznabProvidersCapabilities.push({name:c[0],categories:b.tv_categories}),$("#newznab_cap").empty(),c[0]&&$.fn.newznabProvidersCapabilities.forEach(function(a){if(a.name&&a.name===c[0]&&a.categories instanceof Array){var b=[];a.categories.forEach(function(a){a.id&&a.name&&b.push({value:a.id,text:a.name+"("+a.id+")"})}),$("#newznab_cap").replaceOptions(b)}}),$("#newznab_cap:has(option)").length?$("#newznab_cat_update").removeAttr("disabled"):$("#newznab_cat_update").attr("disabled","disabled")},$.fn.makeNewznabProviderString=function(){var a=[];for(var c in b)b.hasOwnProperty(c)&&a.push(b[c][1].join("|"));$("#newznab_string").val(a.join("!!!"))},$.fn.populateTorrentRssSection=function(){var a=$("#editATorrentRssProvider :selected").val(),b="";"addTorrentRss"===a?(b=["","","","title"],$("#torrentrss_add_div").show(),$("#torrentrss_update_div").hide()):(b=c[a],$("#torrentrss_add_div").hide(),$("#torrentrss_update_div").show()),$("#torrentrss_name").val(b[0]),$("#torrentrss_url").val(b[1]),$("#torrentrss_cookies").val(b[2]),$("#torrentrss_titleTAG").val(b[3]),"addTorrentRss"===a?($("#torrentrss_name").removeAttr("disabled"),$("#torrentrss_url").removeAttr("disabled"),$("#torrentrss_cookies").removeAttr("disabled"),$("#torrentrss_titleTAG").removeAttr("disabled")):($("#torrentrss_name").attr("disabled","disabled"),$("#torrentrss_url").removeAttr("disabled"),$("#torrentrss_cookies").removeAttr("disabled"),$("#torrentrss_titleTAG").removeAttr("disabled"),$("#torrentrss_delete").removeAttr("disabled"))},$.fn.makeTorrentRssProviderString=function(){var a=[];for(var b in c)c.hasOwnProperty(b)&&a.push(c[b].join("|"));$("#torrentrss_string").val(a.join("!!!"))},$.fn.refreshProviderList=function(){var a=$("#provider_order_list").sortable("toArray"),b=[];$.each(a,function(a,c){var d=+$("#enable_"+c).prop("checked")?"1":"0";b.push(c+":"+d)}),$("#provider_order").val(b.join(" ")),$(this).refreshEditAProvider()},$.fn.refreshEditAProvider=function(){$("#editAProvider").empty();var a=$("#provider_order_list").sortable("toArray"),b=[];if($.each(a,function(a,c){$("#enable_"+c).prop("checked")&&b.push(c)}),b.length>0){$("<select>").prop("id","editAProvider").addClass("form-control input-sm").appendTo("#provider-list");for(var c=0,d=b.length;c<d;c++){var e=b[c];$("#editAProvider").append($("<option>").prop("value",e).text($.trim($("#"+e).text()).replace(/\s\*$/,"").replace(/\s\*\*$/,"")))}}else document.getElementsByClassName("component-desc")[0].innerHTML="No providers available to configure.";$(this).showHideProviders()},$(this).on("change",".newznab_key",function(){var a=$(this).attr("id");a=a.substring(0,a.length-"_hash".length);var b=$("#"+a+"_url").val(),c=$("#"+a+"_cat").val(),d=$(this).val();$(this).updateProvider(a,b,d,c)}),$("#newznab_key,#newznab_url").change(function(){var a=$("#editANewznabProvider :selected").val();if("addNewznab"!==a){var b=$("#newznab_url").val(),c=$("#newznab_key").val(),d=$("#newznab_cat option").map(function(a,b){return $(b).text()}).toArray().join(",");$(this).updateProvider(a,b,c,d)}}),$("#torrentrss_url,#torrentrss_cookies,#torrentrss_titleTAG").change(function(){var a=$("#editATorrentRssProvider :selected").val();if("addTorrentRss"!==a){var b=$("#torrentrss_url").val(),c=$("#torrentrss_cookies").val(),d=$("#torrentrss_titleTAG").val();$(this).updateTorrentRssProvider(a,b,c,d)}}),$("body").on("change","#editAProvider",function(){$(this).showHideProviders()}),$("#editANewznabProvider").change(function(){$(this).populateNewznabSection()}),$("#editATorrentRssProvider").change(function(){$(this).populateTorrentRssSection()}),$(".provider_enabler").on("change",function(){$(this).refreshProviderList()}),$("#newznab_cat_update").click(function(){$("#newznab_cat option").each(function(){$(this).remove()});var a=[];$("#newznab_cap option:selected").each(function(){var b=$(this).val();a.push({text:b,value:b})}),$("#newznab_cat").replaceOptions(a);var b=$("#editANewznabProvider :selected").val();if("addNewznab"!==b){var c=$("#newznab_url").val(),d=$("#newznab_key").val(),e=$("#newznab_cat option").map(function(a,b){return $(b).text()}).toArray().join(",");$("#newznab_cat option:not([value])").remove(),$(this).updateProvider(b,c,d,e)}}),$("#newznab_add").click(function(){var a=$.trim($("#newznab_name").val()),b=$.trim($("#newznab_url").val()),c=$.trim($("#newznab_key").val()),d=$.trim($("#newznab_cat option").map(function(a,b){return $(b).text()}).toArray().join(","));if(a&&b&&c){var e={name:a};$.getJSON(srRoot+"/config/providers/canAddNewznabProvider",e,function(e){if(void 0!==e.error)return void alert(e.error);$(this).addProvider(e.success,a,b,c,d,0)})}}),$(".newznab_delete").click(function(){var a=$("#editANewznabProvider :selected").val();$(this).deleteProvider(a)}),$("#torrentrss_add").click(function(){var a=$("#torrentrss_name").val(),b=$("#torrentrss_url").val(),c=$("#torrentrss_cookies").val(),d=$("#torrentrss_titleTAG").val(),e={name:a,url:b,cookies:c,titleTAG:d};$.getJSON(srRoot+"/config/providers/canAddTorrentRssProvider",e,function(e){if(void 0!==e.error)return void alert(e.error);$(this).addTorrentRssProvider(e.success,a,b,c,d),$(this).refreshEditAProvider()})}),$(".torrentrss_delete").on("click",function(){$(this).deleteTorrentRssProvider($("#editATorrentRssProvider :selected").val()),$(this).refreshEditAProvider()}),$(this).on("change","[class='providerDiv_tip'] input",function(){$("div .providerDiv [name="+$(this).attr("name")+"]").replaceWith($(this).clone()),$("div .providerDiv [newznab_name="+$(this).attr("id")+"]").replaceWith($(this).clone())}),$(this).on("change","[class='providerDiv_tip'] select",function(){$(this).find("option").each(function(){$(this).is(":selected")?$(this).prop("defaultSelected",!0):$(this).prop("defaultSelected",!1)}),$("div .providerDiv [name="+$(this).attr("name")+"]").empty().replaceWith($(this).clone())}),$.fn.makeTorrentOptionString=function(a){var b=$(".providerDiv_tip #"+a+"_seed_ratio").prop("value"),c=$(".providerDiv_tip #"+a+"_seed_time").prop("value"),d=$(".providerDiv_tip #"+a+"_process_method").prop("value");$(".providerDiv_tip #"+a+"_option_string").val([b,c,d].join("|"))},$(this).on("change",".seed_option",function(){var a=$(this).attr("id").split("_")[0];$(this).makeTorrentOptionString(a)}),$.fn.replaceOptions=function(a){var b,c;this.empty(),b=this,$.each(a,function(a,d){c=$("<option></option>").attr("value",d.value).text(d.text),b.append(c)})},$.fn.newznabProvidersCapabilities=[],$(this).showHideProviders(),$("#provider_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshProviderList()}}),$("#provider_order_list").disableSelection(),$("#editANewznabProvider").length&&$(this).populateNewznabSection()}},home:{init:function(){$("#showTabs").tabs({activate:function(){$(".show-grid").isotope("layout")}})},index:function(){function a(a){var b,c,d,e;a<125?(d=3,e=4):a<175?(b=9,c=40,d=4,e=5):(b=11,c=50,d=6,e=6),$("#posterPopup").remove(),void 0===b?$(".show-details").hide():($(".show-details").show(),$(".show-dlstats, .show-quality").css("fontSize",b),$(".show-network-image").css("width",c)),$(".show-container").css({width:a,borderWidth:e,borderRadius:d})}$(".resetsorting").on("click",function(){$("table").trigger("filterReset")}),$("#filterShowName").on("input",__.debounce(function(){$(".show-grid").isotope({filter:function(){return $(this).find(".show-title").html().trim().toLowerCase().indexOf($("#filterShowName").val().toLowerCase())>-1}})},500));var b;"undefined"!=typeof Storage&&(b=parseInt(localStorage.getItem("posterSize"))),("number"!=typeof b||isNaN(b))&&(b=188),a(b),$("#posterSizeSlider").slider({min:75,max:250,value:b,change:function(b,c){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",c.value),a(c.value),$(".show-grid").isotope("layout")}}),$("#rootDirSelect").on("change",function(){$("#rootDirForm").submit()}),$(".progressbar").each(function(){var a=$(this).data("progress-percentage"),b=100===a?100:a>80?80:a>60?60:a>40?40:20;$(this).progressbar({value:a}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+b)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()}),$("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0:function(a){return $(a).find("time").attr("datetime")},1:function(a){return $(a).find("time").attr("datetime")},3:function(a){return $(a).find("span").prop("title").toLowerCase()},4:function(a){return $(a).find("span").text().toLowerCase()},5:function(a){return $(a).find("span:first").text()},6:function(a){return $(a).data("show-size")},7:function(a){return $(a).find("span").attr("title").toLowerCase()}},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"eps"},6:{sorter:"digit"},7:{filter:"parsed"}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,stickyHeaders_offset:50,filter_saveFilters:!0,filter_functions:{5:function(a,b,c){var d=!1,e=Math.floor(b%1*1e3);if(""===c)d=!0;else{var f=c.match(/(<|<=|>=|>)\s+(\d+)/i);f&&("<"===f[1]?e<parseInt(f[2])&&(d=!0):"<="===f[1]?e<=parseInt(f[2])&&(d=!0):">="===f[1]?e>=parseInt(f[2])&&(d=!0):">"===f[1]&&e>parseInt(f[2])&&(d=!0)),f=c.match(/(\d+)\s(-|to)\s+(\d+)/i),f&&("-"!==f[2]&&"to"!==f[2]||e>=parseInt(f[1])&&e<=parseInt(f[3])&&(d=!0)),f=c.match(/(=)?\s?(\d+)\s?(=)?/i),f&&("="!==f[1]&&"="!==f[3]||parseInt(f[2])===e&&(d=!0)),!isNaN(parseFloat(c))&&isFinite(c)&&parseInt(c)===e&&(d=!0)}return d}},columnSelector_mediaquery:!1},sortStable:!0,sortAppend:[[2,0]]}),$(".show-grid").imagesLoaded(function(){$(".loading-spinner").hide(),$(".show-grid").show().isotope({itemSelector:".show-container",sortBy:getMeta("sickbeard.POSTER_SORTBY"),sortAscending:getMeta("sickbeard.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:!0},
getSortData:{name:function(a){var b=$(a).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?b:b.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},network:"[data-network]",date:function(a){var b=$(a).attr("data-date");return b.length&&parseInt(b,10)||Number.POSITIVE_INFINITY},progress:function(a){var b=$(a).attr("data-progress");return b.length&&parseInt(b,10)||Number.NEGATIVE_INFINITY}}});var a=null;$(".show-container").on("mouseenter",function(){var b=$(this);"none"===b.find(".show-details").css("display")&&(a=setTimeout(function(){a=null,$("#posterPopup").remove();var c=b.clone().attr({id:"posterPopup"}),d=b.offset().left,e=b.offset().top;c.css({position:"absolute",margin:0,top:e,left:d,zIndex:9999}),c.find(".show-details").show(),c.on("mouseleave",function(){$(this).remove()}),c.appendTo("body");var f=e+b.height()/2-219,g=d+b.width()/2-125,h=$(window).scrollTop(),i=$(window).scrollLeft(),j=h+$(window).innerHeight(),k=i+$(window).innerWidth();f<h+5&&(f=h+5),g<i+5&&(g=i+5),f+438+5>j&&(f=j-438-5),g+250+5>k&&(g=k-250-5),c.animate({top:f,left:g,width:250,height:438})},300))}).on("mouseleave",function(){null!==a&&clearTimeout(a)})}),$("#postersort").on("change",function(){$(".show-grid").isotope({sortBy:$(this).val()}),$.post($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))}),$("#postersortdirection").on("change",function(){$(".show-grid").isotope({sortAscending:"true"===$(this).val()}),$.post($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTableShows"),"#popover-target"),metaToBool("sickbeard.ANIME_SPLIT_HOME")&&$.tablesorter.columnSelector.attachTo($("#showListTableAnime"),"#popover-target")})},displayShow:function(){function a(a){a.on("click.disabled",!1),a.prop("enableClick","1"),a.fadeTo("fast",1)}function b(a){a.off("click.disabled"),a.prop("enableClick","0"),a.fadeTo("fast",.5)}function c(a,b,c,d){var e=$("#srRoot").val(),f=$("#showID").val(),g=$("#indexer").val();""===c&&(c=null),""===d&&(d=null),$.getJSON(e+"/home/setSceneNumbering",{show:f,indexer:g,forSeason:a,forEpisode:b,sceneSeason:c,sceneEpisode:d},function(c){null===c.sceneSeason||null===c.sceneEpisode?$("#sceneSeasonXEpisode_"+f+"_"+a+"_"+b).val(""):$("#sceneSeasonXEpisode_"+f+"_"+a+"_"+b).val(c.sceneSeason+"x"+c.sceneEpisode),c.success||notifyModal(c.errorMessage?c.errorMessage:"Update failed.")})}function d(a,b){var c=$("#srRoot").val(),d=$("#showID").val(),e=$("#indexer").val();""===b&&(b=null),$.getJSON(c+"/home/setSceneNumbering",{show:d,indexer:e,forAbsolute:a,sceneAbsolute:b},function(b){null===b.sceneAbsolute?$("#sceneAbsolute_"+d+"_"+a).val(""):$("#sceneAbsolute_"+d+"_"+a).val(b.sceneAbsolute),b.success||notifyModal(b.errorMessage?b.errorMessage:"Update failed.")})}function e(a,b){return a?($(b).css({"background-color":"#90EE90",color:"#FFF","font-weight":"bold"}),!0):($(b).css({"background-color":"#FF0000",color:"#FFF!important","font-weight":"bold"}),!1)}metaToBool("sickbeard.FANART_BACKGROUND")&&($.backstretch(srRoot+"/showPoster/?show="+$("#showID").attr("value")+"&which=fanart"),$(".backstretch").css("opacity",getMeta("sickbeard.FANART_BACKGROUND_OPACITY")).fadeIn("500")),$(".displayShowTable").tablesorter({widgets:["saveSort","stickyHeaders","columnSelector"],widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox"/>{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked",stickyHeaders_offset:50}}),$("#srRoot").ajaxEpSearch({colorRow:!0}),$(".epSubtitlesSearch").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;b($(this));var c=$(this).parent(),d=c.siblings(".col-subtitles"),e=$(this).children("span");return e.prop("class","loading-spinner16"),e.prop("title","Searching"),$.getJSON($(this).attr("href"),function(b){if("failure"!==b.result.toLowerCase()&&"no subtitles downloaded"!==b.result.toLowerCase()){var c=b.subtitles.split(",");d.empty(),$.each(c,function(a,b){""!==b&&d.append($("<img/>").attr({src:srRoot+"/images/subtitles/flags/"+b+".png",alt:b,width:16,height:11}))}),e.prop("class","displayshow-icon-sub"),a($(this))}else e.prop("class","displayshow-icon-disable");e.prop("title",b.result)}),!1}),$(".epRetrySubtitlesSearch").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;var c=$(this),d=$("#confirmSubtitleDownloadModal");return $("#confirmSubtitleDownloadModal .btn.btn-success").on("click",function(){b(c),d.modal("hide");var e=c.children("img");e.hide(),c.append($("<span/>").attr({class:"loading-spinner16",title:"Searching"}));var f=c.children("span");return $.getJSON(c.prop("href"),function(a){"failure"===a.result.toLowerCase()?(f.prop("class","displayshow-icon-disable"),f.prop("title","Failed")):(e.prop("title","Success"),e.prop("alt","Success"),f.hide(),e.show())}),a(c),!1}),d.modal("show"),!1}),$("#seasonJump").on("change",function(){var a=$("#seasonJump option:selected").val();if(a&&"jump"!==a){var b=$("#seasonJump option:selected").data("season");$("html,body").animate({scrollTop:$('[name ="'+a.substring(1)+'"]').offset().top-50},"slow"),$("#collapseSeason-"+b).collapse("show"),location.hash=a}$(this).val("jump")}),$("#prevShow").on("click",function(){$("#pickShow option:selected").prev("option").prop("selected","selected"),$("#pickShow").change()}),$("#nextShow").on("click",function(){$("#pickShow option:selected").next("option").prop("selected","selected"),$("#pickShow").change()}),$("#changeStatus").on("click",function(){var a=$("#srRoot").val(),b=[];if($(".epCheck").each(function(){this.checked===!0&&b.push($(this).attr("id"))}),0===b.length)return!1;var c=a+"/home/setStatus",d="show="+$("#showID").attr("value")+"&eps="+b.join("|")+"&status="+$("#statusSelect").val();$.post(c,d,function(){location.reload(!0)})}),$(".seasonCheck").on("click",function(){var a=this,b=$(a).attr("id");$("#collapseSeason-"+b).collapse("show"),$('.epCheck:visible[id^="'+b+'x"]').each(function(){this.checked=a.checked})});var f=null;$(".epCheck").on("click",function(a){if(!f||!a.shiftKey)return void(f=this);var b=this,c=0;$(".epCheck").each(function(){switch(c){case 2:return!1;case 1:this.checked=f.checked}this!==b&&this!==f||c++})}),$(".seriesCheck").on("click",function(){$(".epCheck:visible").each(function(){this.checked=!0}),$(".seasonCheck:visible").each(function(){this.checked=!0})}),$(".clearAll").on("click",function(){$(".epCheck:visible").each(function(){this.checked=!1}),$(".seasonCheck:visible").each(function(){this.checked=!1})}),$("#pickShow").on("change",function(){var a=$("#srRoot").val(),b=$(this).val();0!==b&&(window.location.href=a+"/home/displayShow?show="+b)}),$("#checkboxControls input").on("change",function(){var a=$(this).attr("id");$(this).showHideRows(a)}),$("#checkboxControls input").each(function(){var a=$(this).prop("checked");$("tr."+$(this).attr("id")).each(function(){a?$(this).show():$(this).hide()})}),$.fn.showHideRows=function(a){var b=$("#checkboxControls > input, #"+a).prop("checked");$("tr."+a).each(function(){b?$(this).show():$(this).hide()}),$("tr.seasonheader").each(function(){var a=0,b=$(this).attr("id");$("tr."+b+" :visible").each(function(){a++}),0===a?($(this).hide(),$("#"+b+"-cols").hide()):($(this).show(),$("#"+b+"-cols").show())})},$(".sceneSeasonXEpisode").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));var a=$(this).attr("data-for-season"),b=$(this).attr("data-for-episode"),d=$(this).val().match(/^(\d+)x(\d+)$/i),f=$(this).val().match(/^(\d+)$/i),g=null,h=null,i=!1;d?(g=d[1],h=d[2],i=e(!0,$(this))):f?(g=a,h=f[1],i=e(!0,$(this))):i=e(!1,$(this)),i&&c(a,b,g,h)}),$(".sceneAbsolute").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));var a=$(this).attr("data-for-absolute"),b=$(this).val().match(/^(\d{1,3})$/i),c=null;b&&(c=b[1]),d(a,c)}),$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each(function(a,b){$(b).html($("<span/>").width(12*$(b).text()))})},$(".imdbstars").generateStars(),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$(".displayShowTable").each(function(a,b){$.tablesorter.columnSelector.attachTo(b,"#popover-target")})}),$(function(){$(".collapse.toggle").on("hide.bs.collapse",function(){var a=/collapseSeason-([0-9]+)/g,b=a.exec(this.id);$("#showseason-"+b[1]).text("Show Episodes")}),$(".collapse.toggle").on("show.bs.collapse",function(){var a=/collapseSeason-([0-9]+)/g,b=a.exec(this.id);$("#showseason-"+b[1]).text("Hide Episodes")})})},editShow:function(){var a=[];$("#location").fileBrowser({title:"Select Show Location"}),SICKRAGE.common.QualityChooser.init(),$("#submit").click(function(){var a=[];$("#exceptions_list option").each(function(){a.push($(this).val())}),$("#exceptions_list").val(a),metaToBool("show.is_anime")&&generateBlackWhiteList()}),$("#addSceneName").click(function(){var b=$("#SceneName").val(),c=$("<option>");if(a=[],$("#exceptions_list option").each(function(){a.push($(this).val())}),$("#SceneName").val(""),!($.inArray(b,a)>-1||""===b))return $("#SceneException").show(),c.attr("value",b),c.html(b),c.appendTo("#exceptions_list")}),$("#removeSceneName").click(function(){$("#exceptions_list option:selected").remove(),$(this).toggleSceneException()}),$.fn.toggleSceneException=function(){a=[],$("#exceptions_list option").each(function(){a.push($(this).val())}),""===a?$("#SceneException").hide():$("#SceneException").show()},$(this).toggleSceneException()},postProcess:function(){$("#episodeDir").fileBrowser({title:"Select Unprocessed Episode Folder",key:"postprocessPath"})},status:function(){$("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra"],textExtraction:{5:function(a){return $(a).data("seconds")},6:function(a){return $(a).data("seconds")}},headers:{5:{sorter:"digit"},6:{sorter:"digit"}}}),$("#queueStatusTable").tablesorter({widgets:["saveSort","zebra"],sortList:[[3,0],[4,0],[2,1]]})},restart:function(){var a=srPID,b=setTimeout(function(){setInterval(function(){$.post(srRoot+"/home/is-alive/",function(c){void 0!==c&&c.msg===a||($("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()),void 0!==c&&"nope"!==c.msg&&c.msg!==a&&(clearInterval(b),$("#restart_loading").hide(),$("#restart_success").show(),$("#refresh_message").show(),srPID=a=c.msg,b=setInterval(function(){$.post(srRoot+"/home/is-alive/",function(){clearInterval(b),setTimeout(function(){window.location=srRoot+"/"+srDefaultPage+"/"},2e3)},"jsonp")},100))},"jsonp").fail(function(){$("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()})},100)},500)}},manage:{init:function(){$.makeEpisodeRow=function(a,b,c,d,e){var f="";return f+=' <tr class="'+$("#row_class").val()+" show-"+a+'">',f+='  <td class="tableleft" align="center"><input type="checkbox" class="'+a+'-epcheck" name="'+a+"-"+b+"x"+c+'"'+(e?" checked":"")+"></td>",f+="  <td>"+b+"x"+c+"</td>",f+='  <td class="tableright" style="width: 100%">'+d+"</td>",f+=" </tr>"},$.makeSubtitleRow=function(a,b,c,d,e,f){var g="";if(g+='<tr class="good show-'+a+'">',g+='<td align="center"><input type="checkbox" class="'+a+'-epcheck" name="'+a+"-"+b+"x"+c+'"'+(f?" checked":"")+"></td>",g+='<td style="width: 2%;">'+b+"x"+c+"</td>",e.length>0){g+='<td style="width: 8%;">',e=e.split(",");for(var h in e)e.hasOwnProperty(h)&&(g+='<img src="'+srRoot+"/images/subtitles/flags/"+e[h]+'.png" width="16" height="11" alt="'+e[h]+'" />&nbsp;');g+="</td>"}else g+='<td style="width: 8%;">None</td>';return g+="<td>"+d+"</td>",g+="</tr>"}},index:function(){$(".resetsorting").on("click",function(){$("table").trigger("filterReset")}),$("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],textExtraction:{2:function(a){return($(a).find("img").attr("alt")||"unknown").toLowerCase()},3:function(a){return $(a).find("span").attr("title").toLowerCase()},4:function(a){return $(a).find("span").attr("title").toLowerCase()},5:function(a){return $(a).find("span").attr("title").toLowerCase()},6:function(a){return $(a).find("span").attr("title").toLowerCase()},7:function(a){return $(a).find("span").attr("title").toLowerCase()},8:function(a){return $(a).find("span").attr("title").toLowerCase()},9:function(a){return $(a).find("span").attr("title").toLowerCase()},10:function(a){return $(a).text().toLowerCase()},11:function(a){return $(a).text().toLowerCase()}},widgets:["zebra","filter","columnSelector"],headers:{0:{sorter:!1,filter:!1},1:{sorter:"loadingNames"},2:{sorter:"network"},3:{sorter:"quality"},4:{sorter:"sports"},5:{sorter:"scene"},6:{sorter:"anime"},7:{sorter:"flatfold"},8:{sorter:"paused"},9:{sorter:"subtitle"},10:{sorter:"default_ep_status"},11:{sorter:"status"},12:{sorter:!1},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1},16:{sorter:!1},17:{sorter:!1}},widgetOptions:{columnSelector_mediaquery:!1}}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#massUpdateTable"),"#popover-target")}),$(".submitMassEdit").on("click",function(){var a=[];if($(".editCheck").each(function(){this.checked===!0&&a.push($(this).attr("id").split("-")[1])}),0!==a.length){var b=$("<form method='post' action='"+srRoot+"/manage/massEdit'><input type='hidden' name='toEdit' value='"+a.join("|")+"'/></form>");b.appendTo("body"),b.submit()}}),$(".submitMassUpdate").on("click",function(){var a=[],b=[],c=[],d=[],e=[],f=[],g=[];$(".updateCheck").each(function(){this.checked===!0&&a.push($(this).attr("id").split("-")[1])}),$(".refreshCheck").each(function(){this.checked===!0&&b.push($(this).attr("id").split("-")[1])}),$(".renameCheck").each(function(){this.checked===!0&&c.push($(this).attr("id").split("-")[1])}),$(".subtitleCheck").each(function(){this.checked===!0&&d.push($(this).attr("id").split("-")[1])}),$(".removeCheck").each(function(){this.checked===!0&&f.push($(this).attr("id").split("-")[1])});var h=0;if($(".deleteCheck").each(function(){this.checked===!0&&h++}),h>=1&&$.confirm({title:"Delete Shows",text:"You have selected to delete "+h+" show(s).  Are you sure you wish to continue? All files will be removed from your system.",confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(){if($(".deleteCheck").each(function(){this.checked===!0&&e.push($(this).attr("id").split("-")[1])}),a.length+b.length+c.length+d.length+e.length+f.length+g.length===0)return!1;var h=srRoot+"/manage/massUpdate",i="toUpdate="+a.join("|")+"&toRefresh="+b.join("|")+"&toRename="+c.join("|")+"&toSubtitle="+d.join("|")+"&toDelete="+e.join("|")+"&toRemove="+f.join("|")+"&toMetadata="+g.join("|");$.post(h,i,function(){location.reload(!0)})}}),a.length+b.length+c.length+d.length+e.length+f.length+g.length===0)return!1;var i=srRoot+"/manage/massUpdate",j="toUpdate="+a.join("|")+"&toRefresh="+b.join("|")+"&toRename="+c.join("|")+"&toSubtitle="+d.join("|")+"&toDelete="+e.join("|")+"&toRemove="+f.join("|")+"&toMetadata="+g.join("|");$.post(i,j,function(){location.reload(!0)})}),[".editCheck",".updateCheck",".refreshCheck",".renameCheck",".deleteCheck",".removeCheck"].forEach(function(a){var b=null;$(a).on("click",function(c){if(!b||!c.shiftKey)return void(b=this);var d=this,e=0;$(a).each(function(){switch(e){case 2:return!1;case 1:this.disabled||(this.checked=b.checked)}this!==d&&this!==b||e++})})})},backlogOverview:function(){$("#pickShow").on("change",function(){var a=$(this).val();a&&$("html,body").animate({scrollTop:$("#show-"+a).offset().top-25},"slow")})},failedDownloads:function(){$("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra"],sortList:[[1,0]],headers:{3:{sorter:!1}}}),$("#limit").on("change",function(){window.location.href=srRoot+"/manage/failedDownloads/?limit="+$(this).val()}),$("#submitMassRemove").on("click",function(){var a=[];if($(".removeCheck").each(function(){this.checked===!0&&a.push($(this).attr("id").split("-")[1])}),0===a.length)return!1;$.post(srRoot+"/manage/failedDownloads","toRemove="+a.join("|"),function(){location.reload(!0)})}),$(".removeCheck").length&&$(".removeCheck").each(function(a){var b=null;$(a).click(function(c){if(!b||!c.shiftKey)return void(b=this);var d=this,e=0;$(a+":visible").each(function(){switch(e){case 2:return!1;case 1:this.checked=b.checked}this!==d&&this!==b||e++})})})},massEdit:function(){function a(a){var b=a.split("_");return b[b.length-1]}function b(a,b){$("#new_root_dir_"+b.whichId).val(a),$("#new_root_dir_"+b.whichId).change()}$(".new_root_dir").change(function(){var b=a($(this).attr("id"));$("#display_new_root_dir_"+b).html("<b>"+$(this).val()+"</b>")}),$(".edit_root_dir").click(function(){var c=a($(this).attr("id")),d=$("#new_root_dir_"+c).val();$(this).nFileBrowser(b,{initialDir:d,whichId:c})}),$(".delete_root_dir").click(function(){var b=a($(this).attr("id"));$("#new_root_dir_"+b).val(null),$("#display_new_root_dir_"+b).html("<b>DELETED</b>")}),SICKRAGE.common.QualityChooser.init()},episodeStatuses:function(){$(".allCheck").on("click",function(){var a=$(this).attr("id").split("-")[1];$("."+a+"-epcheck").prop("checked",$(this).prop("checked"))}),$(".get_more_eps").on("click",function(){var a=$(this).attr("id"),b=$("#allCheck-"+a).prop("checked"),c=$("tr#"+a),d=$(this).attr("data-clicked"),e=$(this).attr("value");d?"collapse"===e.toLowerCase()?($("table tr").filter(".show-"+a).hide(),$(this).prop("value","Expand")):"expand"===e.toLowerCase()&&($("table tr").filter(".show-"+a).show(),$(this).prop("value","Collapse")):($.getJSON(srRoot+"/manage/showEpisodeStatuses",{indexer_id:a,whichStatus:$("#oldStatus").val()},function(d){$.each(d,function(d,e){$.each(e,function(e,f){c.after($.makeEpisodeRow(a,d,e,f,b))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})},subtitleMissed:function(){$(".allCheck").on("click",function(){var a=$(this).attr("id").split("-")[1];$("."+a+"-epcheck").prop("checked",$(this).prop("checked"))}),$(".get_more_eps").on("click",function(){var a=$(this).attr("id"),b=$("#allCheck-"+a).prop("checked"),c=$("tr#"+a),d=$(this).attr("data-clicked"),e=$(this).attr("value");d?"Collapse"===e?($("table tr").filter(".show-"+a).hide(),$(this).prop("value","Expand")):"Expand"===e&&($("table tr").filter(".show-"+a).show(),$(this).prop("value","Collapse")):($.getJSON(srRoot+"/manage/showSubtitleMissed",{indexer_id:a,whichSubs:$("#selectSubLang").val()},function(d){$.each(d,function(d,e){$.each(e,function(e,f){c.after($.makeSubtitleRow(a,d,e,f.name,f.subtitles,b))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})}},history:{init:function(){},index:function(){$("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],sortList:[[0,1]],textExtraction:function(){if(isMeta("sickbeard.HISTORY_LAYOUT",["detailed"]))return{0:function(a){return $(a).find("time").attr("datetime")},4:function(a){return $(a).find("span").text().toLowerCase()}};var a={0:function(a){return $(a).find("time").attr("datetime")},2:function(a){return $(a).attr("provider").toLowerCase()}};return isMeta("sickbeard.USE_SUBTITLES",["True"])?(a[4]=function(a){return $(a).find("img").attr("title")},a[5]=function(a){return $(a).find("span").text().toLowerCase()}):a[4]=function(a){return $(a).find("span").text().toLowerCase()},a}(),headers:function(){return isMeta("sickbeard.HISTORY_LAYOUT",["detailed"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}:isMeta("sickbeard.USE_SUBTITLES",["True"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:!1},5:{sorter:"quality"},6:{sorter:!1,filter:!1}}:{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}}()}),$("#history_limit").on("change",function(){var a=srRoot+"/history/?limit="+$(this).val();window.location.href=a}),$("a.removehistory").on("click",function(){var a=[],b=0;return $(".removeCheck").each(function(){this.checked===!0&&(a.push(shiftReturn($(this).attr("id").split("-"))),b++)}),!(b<1)&&($.confirm({title:"Remove Logs",text:"You have selected to remove "+b+" download history log(s).<br /><br />This cannot be undone.<br />Are you sure you wish to continue?",confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(){var b=srRoot+"/history/removeHistory",c="toRemove="+a.join("|");$.post(b,c,function(){location.reload(!0)})}}),!1)}),[".removeCheck"].forEach(function(a){var b=null;$(a).on("click",function(c){if(!b||!c.shiftKey)return void(b=this);var d=this,e=0;$(a).each(function(){if(1!==e||this.disabled){if(2===e)return!1}else this.checked=b.checked;this!==d&&this!==b||e++})})})}},errorlogs:{init:function(){},index:function(){},viewlogs:function(){function a(){if("active"===$("#log_update_toggle").data("state")){var b="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val(),c=srRoot+"/errorlogs/viewlog/";$.post(c,b,function(a){$("pre").html($(a).find("pre").html())})}setTimeout(function(){"use strict";a()},500)}$("#min_level,#log_filter,#log_search").on("keyup change",__.debounce(function(){$("#log_search").val().length>0&&($('#log_filter option[value="<NONE>"]').prop("selected",!0),$("#min_level option[value=5]").prop("selected",!0)),$("#min_level").prop("disabled",!0),$("#log_filter").prop("disabled",!0),document.body.style.cursor="wait";var a=srRoot+"/errorlogs/viewlog/",b="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val();$.post(a,b,function(b){history.pushState("data","",a),$("pre").html($(b).find("pre").html()),$("#min_level").prop("disabled",!1),$("#log_filter").prop("disabled",!1),document.body.style.cursor="default"})},500)),a(),$("#log_update_toggle").click(function(){var a="active"===$(this).data("state");return $(this).data("state",a?"paused":"active"),$(this).find("i").toggleClass("fa-pause fa-play"),$(this).find("span").text(a?_("Resume"):_("Pause")),$(this).attr("title",a?_("Resume updating the log on this page."):_("Pause updating the log on this page.")),!1})}},schedule:{init:function(){},index:function(){if(isMeta("sickbeard.COMING_EPS_LAYOUT",["list"])){var a={date:0,show:2,network:5},b=getMeta("sickbeard.COMING_EPS_SORT"),c=b in a?[[a[b],0]]:[[0,0]];$(".resetsorting").on("click",function(){$("#showListTable").trigger("filterReset")}),$("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort"],sortList:c,textExtraction:{0:function(a){return $(a).find("time").attr("datetime")},1:function(a){return $(a).find("time").attr("datetime")},7:function(a){return $(a).find("span").text().toLowerCase()}},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:!1},9:{sorter:!1}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,filter_saveFilters:!0,columnSelector_mediaquery:!1,stickyHeaders_offset:50}}),$("#srRoot").ajaxEpSearch()}isMeta("sickbeard.COMING_EPS_LAYOUT",["banner","poster"])&&($("#srRoot").ajaxEpSearch(),$(".ep_summary").hide(),$(".ep_summaryTrigger").click(function(){$(this).next(".ep_summary").slideToggle("normal",function(){$(this).prev(".ep_summaryTrigger").attr("src",function(a,b){return $(this).next(".ep_summary").is(":visible")?b.replace("plus","minus"):b.replace("minus","plus")})})})),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTable"),"#popover-target")})}},addShows:{init:function(){$("#tabs").tabs({collapsible:!0,selected:metaToBool("sickbeard.SORT_ARTICLE")?-1:0}),$.initRemoteShowGrid=function(){$("#showsort").val("original"),$("#showsortdirection").val("asc"),$("#showsort").on("change",function(){var a;switch(this.value){case"original":a="original-order";break;case"rating":$("#container").isotope({sortBy:"random"}),a="rating";break;case"rating_votes":a=["rating","votes"];break;case"votes":a="votes";break;default:a="name"}$("#container").isotope({sortBy:a})}),$("#showsortdirection").on("change",function(){$("#container").isotope({sortAscending:"asc"===this.value})}),$("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name:function(a){var b=$(a).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?b:b.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt"}})},$.fn.loadRemoteShows=function(a,b,c){$(this).html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" />&nbsp;'+b),$(this).load(srRoot+a+" #container",function(a,b){"error"===b?$(this).empty().html(c):$.initRemoteShowGrid()})},$("#saveDefaultsButton").on("click",function(){var a=[],b=[];$("#anyQualities option:selected").each(function(b,c){a.push($(c).val())}),$("#bestQualities option:selected").each(function(a,c){b.push($(c).val())}),$.post(srRoot+"/config/general/saveAddShowDefaults",{defaultStatus:$("#statusSelect").val(),anyQualities:a.join(","),bestQualities:b.join(","),defaultSeasonFolders:$("#season_folders").prop("checked"),subtitles:$("#subtitles").prop("checked"),anime:$("#anime").prop("checked"),scene:$("#scene").prop("checked"),defaultStatusAfter:$("#statusSelectAfter").val()}),$(this).attr("disabled",!0)}),$("#statusSelect, #qualityPreset, #season_folders, #anyQualities, #bestQualities, #subtitles, #scene, #anime, #statusSelectAfter").change(function(){$("#saveDefaultsButton").attr("disabled",!1)}),SICKRAGE.common.QualityChooser.init()},index:function(){},newShow:function(){function a(){var a,b;a=$("input:radio[name=whichSeries]:checked").length?$("input:radio[name=whichSeries]:checked").val().split("|")[4]:$("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length?$("#providedName").val():"",SICKRAGE.common.updateBlackWhiteList(a);var c="Adding show <b>"+a+"</b> into <b>";if($("#rootDirs option:selected").length){var d=$("#rootDirs option:selected").val();b=d.indexOf("/")>=0?"/":d.indexOf("\\")>=0?"\\":"",d.substr(c.length-1)!==b&&(d+=b),d+="<i>||</i>"+b,c+=d}else c+=$("#fullShowPath").length&&$("#fullShowPath").val().length?$("#fullShowPath").val():"unknown dir.";c+="</b>",a.length?$.post(srRoot+"/addShows/sanitizeFileName",{name:a},function(a){$("#displayText").html(c.replace("||",a))}):$("#displayText").html(c.replace("||","??")),($("#rootDirs option:selected").length||$("#fullShowPath").length&&$("#fullShowPath").val().length)&&$("input:radio[name=whichSeries]:checked").length||$("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length?$("#addShowButton").attr("disabled",!1):$("#addShowButton").attr("disabled",!0)}function b(){if($("#nameToSearch").val().length){d&&d.abort();var b=$("#nameToSearch").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect").val();$("#searchResults").empty().html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" /> searching '+b+"..."),d=$.ajax({url:srRoot+"/addShows/searchIndexersForShowName",data:{search_term:$("#nameToSearch").val().trim(),lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:1e3*parseInt($("#indexer_timeout").val(),10),dataType:"json",error:function(){$("#searchResults").empty().html("search timed out, try again or try another indexer")},success:function(b){var c=!0,d='<fieldset>\n<legend class="legendStep">Search Results:</legend>\n',f="";0===b.results.length?d+="<b>No results found, try a different search.</b>":($.each(b.results,function(a,e){(c?(f=" checked",c=!1):f="",d+='<input type="radio" id="whichSeries" name="whichSeries" value="'+e.join("|").replace(/"/g,"")+'"'+f+" /> ",d+=b.langid&&""!==b.langid?'<a href="'+anonURL+e[2]+e[3]+"&lid="+b.langid+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+e[4]+"</b></a>":'<a href="'+anonURL+e[2]+e[3]+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+e[4]+"</b></a>",null!==e[5])&&(d+=new Date(e[5])>new Date?" (will debut on "+e[5]+")":" (started on "+e[5]+")");null!==e[0]&&(d+=" ["+e[0]+"]"),d+="<br>"}),d+="</ul>"),d+="</fieldset>",$("#searchResults").html(d),a(),e.loadsection(0)}})}}function c(a){$(".step").each(function(){$.data(this,"section")+1===a&&$(this).click()})}var d=null;$("#searchName").click(function(){b()}),$("#nameToSearch").length&&$("#nameToSearch").val().length&&$("#searchName").click(),$("#addShowButton").click(function(){if(!$('input:radio[name="whichSeries"]:checked').val()&&!$('input:hidden[name="whichSeries"]').val().length)return notifyModal("You must choose a show to continue"),!1;generateBlackWhiteList(),$("#addShowForm").submit()}),$("#skipShowButton").click(function(){$("#skipShow").val("1"),$("#addShowForm").submit()}),$("#nameToSearch").focus();var e=new formtowizard({formid:"addShowForm",revealfx:["slide",500],oninit:function(){a(),$("input:hidden[name=whichSeries]").length&&$("#fullShowPath").length&&c(3)}});$("#rootDirText").change(a),$("#searchResults").on("change","#whichSeries",a),$("#nameToSearch").keyup(function(a){13===a.keyCode&&$("#searchName").click()}),$("#anime").change(function(){a(),e.loadsection(2)}),$("#qualityPreset").change(function(){e.loadsection(2)})},addExistingShow:function(){function a(){var a="";$(".dir_check").each(function(b,c){$(c).is(":checked")&&(a.length&&(a+="&"),a+="rootDir="+encodeURIComponent($(c).attr("id")))}),$("#tableDiv").html('<img id="searchingAnim" src="'+srRoot+'/images/loading32.gif" height="32" width="32" /> loading folders...'),$.post(srRoot+"/addShows/massAddTable/",a,function(a){$("#tableDiv").html(a),$("#addRootDirTable").tablesorter({widgets:["zebra"],headers:{0:{sorter:!1}}})})}$("#tableDiv").on("click","#checkAll",function(){var a=this;$(".dirCheck").each(function(){this.checked=a.checked})}),$("#submitShowDirs").on("click",function(){var a=$("#addShowForm"),b=!1;if($(".dirCheck").each(function(){if(this.checked===!0){var c=$(this).attr("id"),d=$(this).closest("tr").find("select").val();$("<input>",{type:"hidden",name:"shows_to_add",value:d+"|"+c}).appendTo(a),b=!0}}),b===!1)return!1;$("<input>",{type:"hidden",name:"promptForSettings",value:$("#promptForSettings").prop("checked")?"on":"off"}).appendTo(a),a.submit()});var b="",c=function(){if(b===$("#rootDirText").val())return!1;b=$("#rootDirText").val(),$("#rootDirStaticList").html(""),$("#rootDirs option").each(function(a,b){$("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+$(b).val()+'" checked=checked> <label for="'+$(b).val()+'">'+$(b).val()+"</label></li>")}),a()};c(),$("#rootDirText").on("change",c),
$("#rootDirStaticList").on("click",".dir_check",a),$("#tableDiv").on("click",".showManage",function(a){a.preventDefault(),$("#tabs").tabs("option","active",0),$("html,body").animate({scrollTop:0},1e3)})},recommendedShows:function(){$("#recommendedShows").loadRemoteShows("/addShows/getRecommendedShows/","Loading recommended shows...","Trakt timed out, refresh page to try again")},trendingShows:function(){$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+$("#traktList").val(),"Loading trending shows...","Trakt timed out, refresh page to try again"),$("#traktlistselection").on("change",function(a){var b=a.target.value;window.history.replaceState({},document.title,"?traktList="+b),$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+b,"Loading trending shows...","Trakt timed out, refresh page to try again")})},popularShows:function(){$.initRemoteShowGrid()}}},UTIL={exec:function(a,b){var c=SICKRAGE;b=void 0===b?"init":b,""!==a&&c[a]&&"function"==typeof c[a][b]&&c[a][b]()},init:function(){var a=document.body,b=a.getAttribute("data-controller"),c=a.getAttribute("data-action");UTIL.exec("common"),UTIL.exec(b),UTIL.exec(b,c)}};navigator.userAgent.indexOf("PhantomJS")===-1&&$(document).ready(UTIL.init);