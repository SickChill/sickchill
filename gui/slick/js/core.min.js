function getMeta(t){return $('meta[data-var="'+t+'"]').data("content")}function configSuccess(){$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),window.location.href=srRoot+"/config/providers/"}),$("#email_show").trigger("notify"),$("#prowl_show").trigger("notify")}function metaToBool(t){let e=$('meta[data-var="'+t+'"]').data("content");return void 0===e?(console.log(t+" is empty, did you forget to add this to main.mako?"),e):!("false"===(e=isNaN(e)?e.toLowerCase():e.toString())||"none"===e||"0"===e)}function isMeta(t,e){return new RegExp(e.length>1?e.join("|"):e).test($('meta[data-var="'+t+'"]').data("content"))}function notifyModal(t){$("#site-notification-modal .modal-body").html(t),$("#site-notification-modal").modal()}function addSiteMessage(t,e,o){t=t||"danger",e=e||"",o=o||"",$.post(srRoot+"/ui/set_site_message",{level:t,tag:e,message:o},function(t){const e=$("#site-messages");if(void 0!==e){e.empty();for(let o in t)({}).hasOwnProperty.call(t,o)&&e.append('<div class="alert alert-'+t[o].level+' upgrade-notification hidden-print" id="site-message-'+o+'" role="alert"><span>'+t[o].message+'</span><span class="glyphicon glyphicon-check site-message-dismiss pull-right" data-id="'+o+'"/></div>')}}),$("#site-messages").on("click",".site-message-dismiss",function(){const t=$(this).data("id");$("#site-message-"+t).hide(),$.post(srRoot+"/ui/dismiss-site-message",{index:t})})}function shiftReturn(t){return t.length<=1?[]:(t.shift(),t)}const srRoot=getMeta("srRoot"),srDefaultPage=getMeta("srDefaultPage"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+srRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif" height="16" width="16" />';let srPID=getMeta("srPID");var __=_;window._=function(t){return t};var SICKRAGE={common:{init:function(){!function(){const t=document.getElementsByTagName("img");for(let e=0;e<t.length;e++)t[e].getAttribute("data-src")&&t[e].setAttribute("src",t[e].getAttribute("data-src"));metaToBool("sickbeard.SICKRAGE_BACKGROUND")&&($.backstretch(srRoot+"/ui/sickrage_background"),$(".backstretch").css("opacity",getMeta("sickbeard.FANART_BACKGROUND_OPACITY")).fadeIn("500"))}(),addSiteMessage(),$.confirm.options={confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(t){location.href=t.context.href}},$("a.shutdown").confirm({title:"Shutdown",text:"Are you sure you want to shutdown SickRage?"}),$("a.restart").confirm({title:"Restart",text:"Are you sure you want to restart SickRage?"}),$("a.removeshow").confirm({title:"Remove Show",text:'Are you sure you want to remove <span class="footerhighlight">'+$("#showtitle").data("showname")+'</span> from the database?<br><br><input type="checkbox" id="deleteFiles" name="deleteFiles"/>&nbsp;<label for="deleteFiles" class="red-text">Check to delete files as well. IRREVERSIBLE</label>',confirm:function(t){location.href=t.context.href+($("#deleteFiles")[0].checked?"&full=1":"")}}),$("a.clearhistory").confirm({title:"Clear History",text:"Are you sure you want to clear all download history?"}),$("a.trimhistory").confirm({title:"Trim History",text:"Are you sure you want to trim all download history older than 30 days?"}),$("a.submiterrors").confirm({title:"Submit Errors",text:'Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SickRage is updated and trigger<br> this error with debug enabled before submitting</span>'}),$("#config-components").tabs({activate:function(t,e){let o=$(this).data("lastOpenedPanel");o||(o=$(e.oldPanel)),$(this).data("topPositionTab")||$(this).data("topPositionTab",$(e.newPanel).position().top),$(e.newPanel).hide().fadeIn(0),o&&o.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")}),$(this).data("lastOpenedPanel",$(e.newPanel))}}),(navigator.maxTouchPoints||0)<2&&$(".dropdown-toggle").on("click",function(){const t=$(this);"true"===t.attr("aria-expanded")&&(window.location.href=t.attr("href"))}),metaToBool("sickbeard.FUZZY_DATING")&&($.timeago.settings.allowFuture=!0,$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},$("[datetime]").timeago()),$(document.body).on("click","a[data-no-redirect]",function(t){const e=$(t.currentTarget).preventDefault();return $.get(e.attr("href")),!1}),$(document.body).on("click",".bulkCheck",function(t){const e=$(t.currentTarget),o=e.attr("id");$("."+o+":visible").each(function(){$(this).prop("checked",e.is(":checked"))})}),$(".enabler").each(function(){$(this).is(":checked")||$("#content_"+$(this).attr("id")).hide()}),$(".enabler").on("change",function(){$(this).is(":checked")?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")})},QualityChooser:{setFromPresets:function(t){0!==parseInt(t,10)?($("#customQuality").hide(),$("#anyQualities").find("option").each(function(){const e=t&$(this).val();$(this).attr("selected",e>0&&"selected")}),$("#bestQualities").find("option").each(function(){const e=t&$(this).val()<<16;$(this).attr("selected",e>0&&"selected")})):$("#customQuality").show()},init:function(){const t=this,e=$("#qualityPreset");e.on("change",function(){t.setFromPresets(e.find(":selected").val())}),t.setFromPresets(e.find(":selected").val())}},updateBlackWhiteList:function(t){$("#white").children().remove(),$("#black").children().remove(),$("#pool").children().remove(),$("#anime").is(":checked")?($("#blackwhitelist").show(),t&&$.getJSON(srRoot+"/home/fetch_releasegroups",{show_name:t},function(t){"success"===t.result&&$.each(t.groups,function(t,e){const o=$("<option>");o.attr("value",e.name),o.html(e.name+" | "+e.rating+" | "+e.range),o.appendTo("#pool")})})):$("#blackwhitelist").hide()}},config:{init:function(){function t(){const t=parseInt($('input[name="git_auth_type"]').filter(":checked").val(),10);$('div[name="content_github_auth_type"]').each(function(e){e===t?$(this).show():$(this).hide()})}$("#config-components").tabs(),$(".viewIf").on("click",function(){$(this).is(":checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").on("click",function(){let t=$("#date_presets").val();$(this).is(":checked")&&"%x"===t?(t="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).is(":checked")||"1"!==$("#date_use_system_default").html()||(t="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),t&&$("#date_presets").val(t)}),$("#configForm").ajaxForm({beforeSubmit:function(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success:function(){setTimeout(configSuccess,2e3)}}),$("#api_key").on("click",function(){$("#api_key").select()}),$("#generate_new_apikey").on("click",function(){$.get(srRoot+"/config/general/generateApiKey",function(t){void 0===t.error?$("#api_key").val(t):notifyModal(t.error)})}),$("#branchCheckout").on("click",function(){const t=srRoot+"/home/branchCheckout?branch="+$("#branchVersion").val(),e=srRoot+"/home/getDBcompare";$.getJSON(e,function(e){if("success"===e.status)if("downgrade"===e.message)notifyModal("Can't switch branch as this will result in a database downgrade.");else{let o=!0;"upgrade"===e.message&&(o=confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")),o&&(window.location.href=t)}})}),t(),$('input[name="git_auth_type"]').on("click",t),$("#git_token").on("click",$("#git_token").select()),$("#create_access_token").on("click",function(){notifyModal('<p>Copy the generated token and paste it in the token input box.</p><p><a href="'+anonURL+'https://github.com/settings/tokens/new?description=SickRage&scopes=user,gist,public_repo" target="_blank"><input class="btn" type="button" value="Continue to Github..."></a></p>'),$("#git_token").select()}),$("#manage_tokens").on("click",function(){window.open(anonURL+"https://github.com/settings/tokens","_blank")})},index:function(){$("#log_dir").fileBrowser({title:_("Select log file folder location")}),$("#sickrage_background_path").fileBrowser({title:_("Select Background Image"),key:"sickrage_background_path",includeFiles:1,fileTypes:["images"]}),$("#custom_css_path").fileBrowser({title:_("Select CSS file"),key:"custom_css_path",includeFiles:1,fileTypes:["css"]});const t=$("#branchVersion"),e=$("#branchVersionLabel"),o=$("#branchCheckout");$.getJSON(srRoot+"/home/fetchRemoteBranches",function(n){if(n.length){const s=$("<option></option>");let i=null;for(let e=0;e<n.length;e++)(i=s.clone().text(n[e].name).attr("value",n[e].name)).prop("selected",Boolean(n[e].current)),i.appendTo(t);o.prop("disabled",!1),e.html(_("select branch to use (restart required)"))}else o.prop("disabled",!0),e.html(_("error: No branches found.")).css({color:"#FF0000"})})},backupRestore:function(){$("#Backup").on("click",function(){$("#Backup").attr("disabled",!0),$("#Backup-result").html(loading);const t=$("#backupDir").val();$.get(srRoot+"/config/backuprestore/backup",{backupDir:t}).done(function(t){$("#Backup-result").html(t),$("#Backup").attr("disabled",!1)})}),$("#Restore").on("click",function(){$("#Restore").attr("disabled",!0),$("#Restore-result").html(loading);const t=$("#backupFile").val();$.post(srRoot+"/config/backuprestore/restore",{backupFile:t}).done(function(t){$("#Restore-result").html(t),$("#Restore").attr("disabled",!1)})}),$("#backupDir").fileBrowser({title:_("Select backup folder to save to"),key:"backupPath"}),$("#backupFile").fileBrowser({title:_("Select backup files to restore"),key:"backupFile",includeFiles:1}),$("#config-components").tabs()},notifications:function(){function t(t){const e={};if(e.api=$("#pushbullet_api").val(),t&&$("#testPushbullet-result").html(loading),!e.api)return $("#testPushbullet-result").html(_("You didn't supply a Pushbullet api key")),$("#pushbullet_api").focus(),!1;$.post(srRoot+"/home/getPushbulletDevices",{api:e.api},function(o){e.devices=$.parseJSON(o).devices,e.currentDevice=$("#pushbullet_device").val(),$("#pushbullet_device_list").html("");for(let t=0;t<e.devices.length;t++)!0===e.devices[t].active&&(e.currentDevice===e.devices[t].iden?$("#pushbullet_device_list").append('<option value="'+e.devices[t].iden+'" selected>'+e.devices[t].nickname+"</option>"):$("#pushbullet_device_list").append('<option value="'+e.devices[t].iden+'">'+e.devices[t].nickname+"</option>"));$("#pushbullet_device_list").prepend('<option value="" '+(""===e.currentDevice?"selected":"")+">All devices</option>"),t&&$("#testPushbullet-result").html(t)}),$("#pushbullet_device_list").on("change",function(){$("#pushbullet_device").val($("#pushbullet_device_list").val()),$("#testPushbullet-result").html(_("Don't forget to save your new pushbullet settings."))}),$.post(srRoot+"/home/getPushbulletChannels",{api:e.api},function(o){if(e.channels=$.parseJSON(o).channels,e.currentChannel=$("#pushbullet_channel").val(),$("#pushbullet_channel_list").html(""),e.channels.length>0){for(let t=0;t<e.channels.length;t++)!0===e.channels[t].active?$("#pushbullet_channel_list").append('<option value="'+e.channels[t].tag+'" selected>'+e.channels[t].name+"</option>"):$("#pushbullet_channel_list").append('<option value="'+e.channels[t].tag+'">'+e.channels[t].name+"</option>");$("#pushbullet_channel_list").prepend('<option value="" '+(e.currentChannel?"selected":"")+">No Channel</option>"),$("#pushbullet_channel_list").prop("disabled",!1)}else $("#pushbullet_channel_list").prepend("<option value>No Channels</option>"),$("#pushbullet_channel_list").prop("disabled",!0);t&&$("#testPushbullet-result").html(t),$("#pushbullet_channel_list").on("change",function(){$("#pushbullet_channel").val($("#pushbullet_channel_list").val()),$("#testPushbullet-result").html(_("Don't forget to save your new pushbullet settings."))})})}function e(){$.getJSON(srRoot+"/home/loadShowNotifyLists",function(t){let e=null,o=null;if(0===t._size)return;const n=[];for(o in t)"_"!==o.charAt(0)&&n.push(t[o]);const s=n.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0});e='<option value="-1">-- Select --</option>';for(o in s)s[o].id&&s[o].name&&(e+='<option value="'+s[o].id+'">'+$("<div/>").text(s[o].name).html()+"</option>");$("#email_show").html(e),$("#email_show_list").val(""),$("#prowl_show").html(e),$("#prowl_show_list").val("")})}$("#testGrowl").on("click",function(){const t={};if(t.host=$.trim($("#growl_host").val()),t.password=$.trim($("#growl_password").val()),!t.host)return $("#testGrowl-result").html(_("Please fill out the necessary fields above.")),void $("#growl_host").addClass("warning");$("#growl_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testGrowl-result").html(loading),$.get(srRoot+"/home/testGrowl",{host:t.host,password:t.password}).done(function(t){$("#testGrowl-result").html(t),$("#testGrowl").prop("disabled",!1)})}),$("#testProwl").on("click",function(){const t={};if(t.api=$.trim($("#prowl_api").val()),t.priority=$("#prowl_priority").val(),!t.api)return $("#testProwl-result").html(_("Please fill out the necessary fields above.")),void $("#prowl_api").addClass("warning");$("#prowl_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testProwl-result").html(loading),$.get(srRoot+"/home/testProwl",{prowl_api:t.api,prowl_priority:t.priority}).done(function(t){$("#testProwl-result").html(t),$("#testProwl").prop("disabled",!1)})}),$("#testKODI").on("click",function(){const t={};if(t.host=$.trim($("#kodi_host").val()),t.username=$.trim($("#kodi_username").val()),t.password=$.trim($("#kodi_password").val()),!t.host)return $("#testKODI-result").html(_("Please fill out the necessary fields above.")),void $("#kodi_host").addClass("warning");$("#kodi_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testKODI-result").html(loading),$.get(srRoot+"/home/testKODI",{host:t.host,username:t.username,password:t.password}).done(function(t){$("#testKODI-result").html(t),$("#testKODI").prop("disabled",!1)})}),$("#testPHT").on("click",function(){const t={};if(t.client={},t.client.host=$.trim($("#plex_client_host").val()),t.client.username=$.trim($("#plex_client_username").val()),t.client.password=$.trim($("#plex_client_password").val()),!t.client.host)return $("#testPHT-result").html(_("Please fill out the necessary fields above.")),void $("#plex_client_host").addClass("warning");$("#plex_client_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPHT-result").html(loading),$.get(srRoot+"/home/testPHT",{host:t.client.host,username:t.client.username,password:t.client.password}).done(function(t){$("#testPHT-result").html(t),$("#testPHT").prop("disabled",!1)})}),$("#testPMS").on("click",function(){const t={};if(t.server={},t.server.host=$.trim($("#plex_server_host").val()),t.server.username=$.trim($("#plex_server_username").val()),t.server.password=$.trim($("#plex_server_password").val()),t.server.token=$.trim($("#plex_server_token").val()),!t.server.host)return $("#testPMS-result").html(_("Please fill out the necessary fields above.")),void $("#plex_server_host").addClass("warning");$("#plex_server_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMS-result").html(loading),$.get(srRoot+"/home/testPMS",{host:t.server.host,username:t.server.username,password:t.server.password,plex_server_token:t.server.token}).done(function(t){$("#testPMS-result").html(t),$("#testPMS").prop("disabled",!1)})}),$("#testEMBY").on("click",function(){const t={};if(t.host=$("#emby_host").val(),t.apikey=$("#emby_apikey").val(),!t.host||!t.apikey)return $("#testEMBY-result").html(_("Please fill out the necessary fields above.")),t.host?$("#emby_host").removeClass("warning"):$("#emby_host").addClass("warning"),void(t.apikey?$("#emby_apikey").removeClass("warning"):$("#emby_apikey").addClass("warning"));$("#emby_host,#emby_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testEMBY-result").html(loading),$.get(srRoot+"/home/testEMBY",{host:t.host,emby_apikey:t.apikey}).done(function(t){$("#testEMBY-result").html(t),$("#testEMBY").prop("disabled",!1)})}),$("#testBoxcar2").on("click",function(){const t={};if(t.accesstoken=$.trim($("#boxcar2_accesstoken").val()),!t.accesstoken)return $("#testBoxcar2-result").html(_("Please fill out the necessary fields above.")),void $("#boxcar2_accesstoken").addClass("warning");$("#boxcar2_accesstoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar2-result").html(loading),$.get(srRoot+"/home/testBoxcar2",{accesstoken:t.accesstoken}).done(function(t){$("#testBoxcar2-result").html(t),$("#testBoxcar2").prop("disabled",!1)})}),$("#testPushover").on("click",function(){const t={};if(t.userkey=$("#pushover_userkey").val(),t.apikey=$("#pushover_apikey").val(),!t.userkey||!t.apikey)return $("#testPushover-result").html(_("Please fill out the necessary fields above.")),t.userkey?$("#pushover_userkey").removeClass("warning"):$("#pushover_userkey").addClass("warning"),void(t.apikey?$("#pushover_apikey").removeClass("warning"):$("#pushover_apikey").addClass("warning"));$("#pushover_userkey,#pushover_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushover-result").html(loading),$.get(srRoot+"/home/testPushover",{userKey:t.userkey,apiKey:t.apikey}).done(function(t){$("#testPushover-result").html(t),$("#testPushover").prop("disabled",!1)})}),$("#testLibnotify").on("click",function(){$("#testLibnotify-result").html(loading),$.get(srRoot+"/home/testLibnotify",function(t){$("#testLibnotify-result").html(t)})}),$("#twitterStep1").on("click",function(){$("#testTwitter-result").html(loading),$.get(srRoot+"/home/twitterStep1",function(t){window.open(t)}).done(function(){$("#testTwitter-result").html(_("<b>Step 1:</b> Confirm Authorization"))})}),$("#twitterStep2").on("click",function(){const t={};if(t.key=$.trim($("#twitter_key").val()),!t.key)return $("#testTwitter-result").html(_("Please fill out the necessary fields above.")),void $("#twitter_key").addClass("warning");$("#twitter_key").removeClass("warning"),$("#testTwitter-result").html(loading),$.get(srRoot+"/home/twitterStep2",{key:t.key},function(t){$("#testTwitter-result").html(t)})}),$("#testTwitter").on("click",function(){$.post(srRoot+"/home/testTwitter",function(t){$("#testTwitter-result").html(t)})}),$("#testTwilio").on("click",function(){$("#testTwilio").addClass("disabled"),$.post(srRoot+"/home/testTwilio",function(t){$("#testTwilio-result").html(t)}).always(function(){$("#testTwilio").removeClass("disabled")})}),$("#testSlack").on("click",function(){$.post(srRoot+"/home/testSlack",function(t){$("#testSlack-result").html(t)})}),$("#testDiscord").on("click",function(){$.get(srRoot+"/home/testDiscord",function(t){$("#testDiscord-result").html(t)})}),$("#settingsNMJ").on("click",function(){const t={};if(!$("#nmj_host").val())return $("#nmj_host").focus(),void notifyModal("Please fill in the Popcorn IP address");$("#testNMJ-result").html(loading),t.host=$("#nmj_host").val(),$.post(srRoot+"/home/settingsNMJ",{host:t.host},function(t){null===t&&($("#nmj_database").removeAttr("readonly"),$("#nmj_mount").removeAttr("readonly"));const e=$.parseJSON(t);$("#testNMJ-result").html(e.message),$("#nmj_database").val(e.database),$("#nmj_mount").val(e.mount),e.database?$("#nmj_database").attr("readonly",!0):$("#nmj_database").removeAttr("readonly"),e.mount?$("#nmj_mount").attr("readonly",!0):$("#nmj_mount").removeAttr("readonly")})}),$("#testNMJ").on("click",function(){const t={};if(t.host=$.trim($("#nmj_host").val()),t.database=$("#nmj_database").val(),t.mount=$("#nmj_mount").val(),!t.host)return $("#testNMJ-result").html(_("Please fill out the necessary fields above.")),void $("#nmj_host").addClass("warning");$("#nmj_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJ-result").html(loading),$.post(srRoot+"/home/testNMJ",{host:t.host,database:t.database,mount:t.mount}).done(function(t){$("#testNMJ-result").html(t),$("#testNMJ").prop("disabled",!1)})}),$("#settingsNMJv2").on("click",function(){const t={};if(!$("#nmjv2_host").val())return $("#nmjv2_host").focus(),void notifyModal("Please fill in the Popcorn IP address","modal");$("#testNMJv2-result").html(loading),t.host=$("#nmjv2_host").val(),t.dbloc="";const e=document.getElementsByName("nmjv2_dbloc");for(let o=0;o<e.length;o++)if(e[o].checked){t.dbloc=e[o].value;break}t.dbinstance=$("#NMJv2db_instance").val(),$.post(srRoot+"/home/settingsNMJv2",{host:t.host,dbloc:t.dbloc,instance:t.dbinstance},function(t){null===t&&$("#nmjv2_database").removeAttr("readonly");const e=$.parseJSON(t);$("#testNMJv2-result").html(e.message),$("#nmjv2_database").val(e.database),e.database?$("#nmjv2_database").attr("readonly",!0):$("#nmjv2_database").removeAttr("readonly")})}),$("#testNMJv2").on("click",function(){const t={};if(t.host=$.trim($("#nmjv2_host").val()),!t.host)return $("#testNMJv2-result").html(_("Please fill out the necessary fields above.")),void $("#nmjv2_host").addClass("warning");$("#nmjv2_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJv2-result").html(loading),$.post(srRoot+"/home/testNMJv2",{host:t.host}).done(function(t){$("#testNMJv2-result").html(t),$("#testNMJv2").prop("disabled",!1)})}),$("#testFreeMobile").on("click",function(){const t={};if(t.id=$.trim($("#freemobile_id").val()),t.apikey=$.trim($("#freemobile_apikey").val()),!t.id||!t.apikey)return $("#testFreeMobile-result").html(_("Please fill out the necessary fields above.")),t.id?$("#freemobile_id").removeClass("warning"):$("#freemobile_id").addClass("warning"),void(t.apikey?$("#freemobile_apikey").removeClass("warning"):$("#freemobile_apikey").addClass("warning"));$("#freemobile_id,#freemobile_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testFreeMobile-result").html(loading),$.post(srRoot+"/home/testFreeMobile",{freemobile_id:t.id,freemobile_apikey:t.apikey}).done(function(t){$("#testFreeMobile-result").html(t),$("#testFreeMobile").prop("disabled",!1)})}),$("#testTelegram").on("click",function(){const t={};if(t.id=$.trim($("#telegram_id").val()),t.apikey=$.trim($("#telegram_apikey").val()),!t.id||!t.apikey)return $("#testTelegram-result").html(_("Please fill out the necessary fields above.")),t.id?$("#telegram_id").removeClass("warning"):$("#telegram_id").addClass("warning"),void(t.apikey?$("#telegram_apikey").removeClass("warning"):$("#telegram_apikey").addClass("warning"));$("#telegram_id,#telegram_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testTelegram-result").html(loading),$.post(srRoot+"/home/testTelegram",{telegram_id:t.id,telegram_apikey:t.apikey}).done(function(t){$("#testTelegram-result").html(t),$("#testTelegram").prop("disabled",!1)})}),$("#testJoin").on("click",function(){const t={};if(t.id=$.trim($("#join_id").val()),t.apikey=$.trim($("#join_apikey").val()),!t.id||!t.apikey)return $("#testJoin-result").html(_("Please fill out the necessary fields above.")),t.id?$("#join_id").removeClass("warning"):$("#join_id").addClass("warning"),void(t.apikey?$("#join_apikey").removeClass("warning"):$("#join_apikey").addClass("warning"));$("#join_id,#join_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testJoin-result").html(loading),$.post(srRoot+"/home/testJoin",{join_id:t.id,join_apikey:t.apikey}).done(function(t){$("#testJoin-result").html(t),$("#testJoin").prop("disabled",!1)})}),$("#TraktGetPin").on("click",function(){window.open($("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),$("#trakt_pin").removeClass("hide")}),$("#trakt_pin").on("keyup change",function(){0===$("#trakt_pin").val().length?($("#TraktGetPin").removeClass("hide"),$("#authTrakt").addClass("hide")):($("#TraktGetPin").addClass("hide"),$("#authTrakt").removeClass("hide"))}),$("#authTrakt").on("click",function(){const t={};t.pin=$("#trakt_pin").val(),0!==t.pin.length&&$.post(srRoot+"/home/getTraktToken",{trakt_pin:t.pin}).done(function(t){$("#testTrakt-result").html(t),$("#authTrakt").addClass("hide"),$("#trakt_pin").addClass("hide"),$("#TraktGetPin").addClass("hide")})}),$("#testTrakt").on("click",function(){const t={};return t.username=$.trim($("#trakt_username").val()),t.trendingBlacklist=$.trim($("#trakt_blacklist_name").val()),t.username?/\s/g.test(t.trendingBlacklist)?($("#testTrakt-result").html(_("Check blacklist name; the value needs to be a trakt slug")),void $("#trakt_blacklist_name").addClass("warning")):($("#trakt_username").removeClass("warning"),$("#trakt_blacklist_name").removeClass("warning"),$(this).prop("disabled",!0),$("#testTrakt-result").html(loading),void $.post(srRoot+"/home/testTrakt",{username:t.username,blacklist_name:t.trendingBlacklist}).done(function(t){$("#testTrakt-result").html(t),$("#testTrakt").prop("disabled",!1)})):($("#testTrakt-result").html(_("Please fill out the necessary fields above.")),void(t.username?$("#trakt_username").removeClass("warning"):$("#trakt_username").addClass("warning")))}),$("#testEmail").on("click",function(){const t=$("#testEmail-result");t.html(loading);const e=$("#email_host").val().length>0?$("#email_host").val():null,o=$("#email_port").val().length>0?$("#email_port").val():null,n=$("#email_tls").is(":checked")?1:0,s=$("#email_from").val().length>0?$("#email_from").val():"root@localhost",i=$("#email_user").val().trim(),a=$("#email_password").val();let r="",l="";null===e&&(r+='<li style="color: red;">You must specify an SMTP hostname!</li>'),null===o?r+='<li style="color: red;">You must specify an SMTP port!</li>':(null===o.match(/^\d+$/)||parseInt(o,10)>65535)&&(r+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'),r.length>0?(r="<ol>"+r+"</ol>",t.html(r)):null===(l=prompt("Enter an email address to send the test to:",null))||0===l.length||null===l.match(/.*@.*/)?t.html('<p style="color: red;">'+_("You must provide a recipient email address!")+"</p>"):$.post(srRoot+"/home/testEmail",{host:e,port:o,smtp_from:s,use_tls:n,user:i,pwd:a,to:l},function(t){$("#testEmail-result").html(t)})}),$("#testNMA").on("click",function(){const t={};if(t.api=$.trim($("#nma_api").val()),t.priority=$("#nma_priority").val(),!t.api)return $("#testNMA-result").html(_("Please fill out the necessary fields above.")),void $("#nma_api").addClass("warning");$("#nma_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMA-result").html(loading),$.post(srRoot+"/home/testNMA",{nma_api:t.api,nma_priority:t.priority}).done(function(t){$("#testNMA-result").html(t),$("#testNMA").prop("disabled",!1)})}),$("#testPushalot").on("click",function(){const t={};if(t.authToken=$.trim($("#pushalot_authorizationtoken").val()),!t.authToken)return $("#testPushalot-result").html(_("Please fill out the necessary fields above.")),void $("#pushalot_authorizationtoken").addClass("warning");$("#pushalot_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushalot-result").html(loading),$.post(srRoot+"/home/testPushalot",{authorizationToken:t.authToken}).done(function(t){$("#testPushalot-result").html(t),$("#testPushalot").prop("disabled",!1)})}),$("#testPushbullet").on("click",function(){const t={};if(t.api=$.trim($("#pushbullet_api").val()),!t.api)return $("#testPushbullet-result").html(_("Please fill out the necessary fields above.")),void $("#pushbullet_api").addClass("warning");$("#pushbullet_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushbullet-result").html(loading),$.post(srRoot+"/home/testPushbullet",{api:t.api}).done(function(t){$("#testPushbullet-result").html(t),$("#testPushbullet").prop("disabled",!1)})}),$("#getPushbulletDevices").on("click",function(){t("Device list updated. Please choose a device to push to.")}),t(),$("#email_show").on("change",function(){const t=parseInt($("#email_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(e){e._size>0&&$("#email_show_list").val(t>=0?e[t.toString()].list:"")})}),$("#prowl_show").on("change",function(){const t=parseInt($("#prowl_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(e){e._size>0&&$("#prowl_show_list").val(t>=0?e[t.toString()].prowl_notify_list:"")})}),e(),$("#email_show").on("notify",function(){e()}),$("#prowl_show").on("notify",function(){e()}),$("#email_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},function(){e()})}),$("#prowl_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#prowl_show").val(),prowlAPIs:$("#prowl_show_list").val()},function(){e()})}),$("#use_plex_server").on("click",function(){$(this).is(":checked")?$(".plexinfo").removeClass("hide"):$(".plexinfo").addClass("hide")})},postProcessing:function(){function t(){$.post(srRoot+"/config/postProcessing/isRarSupported",function(t){"supported"!==t&&($("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#unpack").qtip("toggle",!0),$("#unpack").css("background-color","#FFFFDD"))})}function e(){const t={};t.pattern=$("#naming_pattern").val(),t.multi=$("#naming_multi_ep :selected").val(),t.animeType=$('input[name="naming_anime"]:checked').val(),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:t.pattern,anime_type:3},function(t){t?($("#naming_example").text(t+".ext"),$("#naming_example_div").show()):$("#naming_example_div").hide()}),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:t.pattern,multi:t.multi,anime_type:3},function(t){t?($("#naming_example_multi").text(t+".ext"),$("#naming_example_multi_div").show()):$("#naming_example_multi_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:t.pattern,multi:t.multi,anime_type:t.animeType},function(t){let e;"invalid"===t?(e=_("This pattern is invalid."),$("#naming_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===t?(e=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):(e=_("This pattern is valid."),$("#naming_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF")),$("#naming_pattern").attr("title",e)})}function o(){const t=$("#naming_abd_pattern").val();$.post(srRoot+"/config/postProcessing/testNaming",{pattern:t,abd:"True"},function(t){t?($("#naming_abd_example").text(t+".ext"),$("#naming_abd_example_div").show()):$("#naming_abd_example_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:t,abd:"True"},function(t){let e;"invalid"===t?(e=_("This pattern is invalid."),$("#naming_abd_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"===t?(e=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_abd_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFFFDD")):(e=_("This pattern is valid."),$("#naming_abd_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_abd_pattern").qtip("toggle",!1),$("#naming_abd_pattern").css("background-color","#FFFFFF")),$("#naming_abd_pattern").attr("title",e)})}function n(){const t=$("#naming_sports_pattern").val();$.post(srRoot+"/config/postProcessing/testNaming",{pattern:t,sports:"True"},function(t){t?($("#naming_sports_example").text(t+".ext"),$("#naming_sports_example_div").show()):$("#naming_sports_example_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:t,sports:"True"},function(t){let e;"invalid"===t?(e=_("This pattern is invalid."),$("#naming_sports_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"===t?(e=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_sports_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFFFDD")):(e=_("This pattern is valid."),$("#naming_sports_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_sports_pattern").qtip("toggle",!1),$("#naming_sports_pattern").css("background-color","#FFFFFF")),$("#naming_sports_pattern").attr("title",e)})}function s(){const t={};t.pattern=$("#naming_anime_pattern").val(),t.multi=$("#naming_anime_multi_ep :selected").val(),t.animeType=$('input[name="naming_anime"]:checked').val(),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:t.pattern,anime_type:t.animeType},function(t){t?($("#naming_example_anime").text(t+".ext"),$("#naming_example_anime_div").show()):$("#naming_example_anime_div").hide()}),$.post(srRoot+"/config/postProcessing/testNaming",{pattern:t.pattern,multi:t.multi,anime_type:t.animeType},function(t){t?($("#naming_example_multi_anime").text(t+".ext"),$("#naming_example_multi_anime_div").show()):$("#naming_example_multi_anime_div").hide()}),$.post(srRoot+"/config/postProcessing/isNamingValid",{pattern:t.pattern,multi:t.multi,anime_type:t.animeType},function(t){let e;"invalid"===t?(e=_("This pattern is invalid."),$("#naming_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===t?(e=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):(e=_("This pattern is valid."),$("#naming_pattern").qtip("option",{"content.text":e,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF")),$("#naming_pattern").attr("title",e)})}function i(){"custom..."===$("#name_presets :selected").val().toLowerCase()?$("#naming_custom").show():($("#naming_custom").hide(),$("#naming_pattern").val($("#name_presets :selected").attr("id"))),e()}function a(){"custom..."===$("#name_abd_presets :selected").val().toLowerCase()?$("#naming_abd_custom").show():($("#naming_abd_custom").hide(),$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))),o()}function r(){"custom..."===$("#name_sports_presets :selected").val().toLowerCase()?$("#naming_sports_custom").show():($("#naming_sports_custom").hide(),$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))),n()}function l(){"custom..."===$("#name_anime_presets :selected").val().toLowerCase()?$("#naming_anime_custom").show():($("#naming_anime_custom").hide(),$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))),s()}$("#config-components").tabs(),$("#tv_download_dir").fileBrowser({title:_("Select TV Download Directory")}),$("#unpack_dir").fileBrowser({title:_("Select Unpack Directory")});const c=function(){let t=0;return function(e,o){clearTimeout(t),t=setTimeout(e,o)}}();1!==parseInt($("#unpack").val(),10)&&$("#content_unpack").hide(),$("#unpack").on("change",function(){const e=parseInt(this.value,10);2!==e&&0!==e||($("#content_unpack").fadeOut("fast","linear"),$("#unpack").qtip("toggle",!1)),1===e&&($("#content_unpack").fadeIn("fast","linear"),t())}),$("#name_presets").on("change",i),$("#name_abd_presets").on("change",a),$("#naming_custom_abd").on("change",a),$("#name_sports_presets").on("change",r),$("#naming_custom_sports").on("change",r),$("#name_anime_presets").on("change",l),$("#naming_custom_anime").on("change",l),$('input[name="naming_anime"]').on("click",l),$("#naming_multi_ep").on("change",e),$("#naming_pattern").on("focusout",e),$("#naming_pattern").on("keyup",function(){c(e,500)}),$("#naming_anime_multi_ep").on("change",s),$("#naming_anime_pattern").on("focusout",s),$("#naming_anime_pattern").on("keyup",function(){c(s,500)}),$("#naming_abd_pattern").on("focusout",e),$("#naming_abd_pattern").on("keyup",function(){c(o,500)}),$("#naming_sports_pattern").on("focusout",e),$("#naming_sports_pattern").on("keyup",function(){c(n,500)}),$("#naming_anime_pattern").on("focusout",e),$("#naming_anime_pattern").on("keyup",function(){c(s,500)}),$("#show_naming_key").on("click",function(){$("#naming_key").toggle()}),$("#show_naming_abd_key").on("click",function(){$("#naming_abd_key").toggle()}),$("#show_naming_sports_key").on("click",function(){$("#naming_sports_key").toggle()}),$("#show_naming_anime_key").on("click",function(){$("#naming_anime_key").toggle()}),$("#do_custom").on("click",function(){$("#naming_pattern").val($("#name_presets :selected").attr("id")),$("#naming_custom").show(),$("#naming_pattern").focus()}),i(),a(),r(),l(),$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()}),$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){const t=$(this).attr("id");$("#metadataType :selected").val()===t?$(this).show():$(this).hide()})},$(this).showHideMetadata(),$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(!1)}),$.fn.refreshMetadataConfig=function(t){let e=0,o="";$(".metadataDiv").each(function(){const t=$(this).attr("id"),n=[],s=$("#"+t+"_show_metadata").is(":checked"),i=$("#"+t+"_episode_metadata").is(":checked"),a=$("#"+t+"_fanart").is(":checked"),r=$("#"+t+"_poster").is(":checked"),l=$("#"+t+"_banner").is(":checked"),c=$("#"+t+"_episode_thumbnails").is(":checked"),d=$("#"+t+"_season_posters").is(":checked"),h=$("#"+t+"_season_banners").is(":checked"),u=$("#"+t+"_season_all_poster").is(":checked"),p=$("#"+t+"_season_all_banner").is(":checked");n.push(s?"1":"0"),n.push(i?"1":"0"),n.push(a?"1":"0"),n.push(r?"1":"0"),n.push(l?"1":"0"),n.push(c?"1":"0"),n.push(d?"1":"0"),n.push(h?"1":"0"),n.push(u?"1":"0"),n.push(p?"1":"0");let m=0;for(let t=0;t<n.length;t++)m+=parseInt(n[t],10);m>e&&(e=m,o=t),$("#"+t+"_eg_show_metadata").attr("class",s?"enabled":"disabled"),$("#"+t+"_eg_episode_metadata").attr("class",i?"enabled":"disabled"),$("#"+t+"_eg_fanart").attr("class",a?"enabled":"disabled"),$("#"+t+"_eg_poster").attr("class",r?"enabled":"disabled"),$("#"+t+"_eg_banner").attr("class",l?"enabled":"disabled"),$("#"+t+"_eg_episode_thumbnails").attr("class",c?"enabled":"disabled"),$("#"+t+"_eg_season_posters").attr("class",d?"enabled":"disabled"),$("#"+t+"_eg_season_banners").attr("class",h?"enabled":"disabled"),$("#"+t+"_eg_season_all_poster").attr("class",u?"enabled":"disabled"),$("#"+t+"_eg_season_all_banner").attr("class",p?"enabled":"disabled"),$("#"+t+"_data").val(n.join("|"))}),""!==o&&t&&($("#metadataType option[value="+o+"]").attr("selected","selected"),$(this).showHideMetadata())},$(this).refreshMetadataConfig(!0),$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search:function(){$("#config-components").tabs(),$("#nzb_dir").fileBrowser({title:_("Select .nzb black hole/watch location")}),$("#torrent_dir").fileBrowser({title:_("Select .torrent black hole/watch location")}),$("#torrent_path").fileBrowser({title:_("Select .torrent download location")}),$.fn.nzbMethodHandler=function(){const t=$("#nzb_method :selected").val();$("#nzb_method_icon").removeClass(function(t,e){return(e.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),$("#nzb_method_icon").addClass("add-client-icon-"+t.replace("_","-")),$("#blackhole_settings").hide(),$("#sabnzbd_settings").hide(),$("#testSABnzbd").hide(),$("#testSABnzbd_result").hide(),$("#nzbget_settings").hide(),$("#download_station_settings").hide(),$("#testDSM").hide(),$("#testDSM_result").hide(),"blackhole"===t.toLowerCase()?$("#blackhole_settings").show():"nzbget"===t.toLowerCase()?$("#nzbget_settings").show():"download_station"===t.toLowerCase()?($("#download_station_settings").show(),$("#testDSM").show(),$("#testDSM_result").show()):($("#sabnzbd_settings").show(),$("#testSABnzbd").show(),$("#testSABnzbd_result").show())},$.torrentMethodHandler=function(){$("#options_torrent_clients").hide(),$("#options_torrent_blackhole").hide();const t=$("#torrent_method :selected").val();let e="#options_torrent_blackhole",o="";$("#torrent_method_icon").removeClass(function(t,e){return(e.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),$("#torrent_method_icon").addClass("add-client-icon-"+t.replace("_","-")),"blackhole"!==t.toLowerCase()&&($("#label_warning_deluge").hide(),$("#label_anime_warning_deluge").hide(),$("#host_desc_torrent").show(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_auth_type_option").hide(),$("#torrent_path_option").show(),$("#torrent_path_option").find(".fileBrowser").show(),$("#torrent_seed_time_option").hide(),$("#torrent_high_bandwidth_option").hide(),$("#torrent_label_option").show(),$("#torrent_label_anime_option").show(),$("#path_synology").hide(),$("#torrent_paused_option").show(),$("#torrent_rpcurl_option").hide(),$("#torrent_host_option").show(),"utorrent"===t.toLowerCase()?(o="uTorrent",$("#torrent_path_option").hide(),$("#torrent_seed_time_label").text(_("Minimum seeding time is")),$("#torrent_seed_time_option").show(),$("#host_desc_torrent").text(_("URL to your uTorrent client (e.g. http://localhost:8000)"))):"transmission"===t.toLowerCase()?(o="Transmission",$("#torrent_seed_time_label").text(_("Stop seeding when inactive for")),$("#torrent_seed_time_option").show(),$("#torrent_high_bandwidth_option").show(),$("#torrent_label_option").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_rpcurl_option").show(),$("#host_desc_torrent").text(_("URL to your Transmission client (e.g. http://localhost:9091)"))):"deluge"===t.toLowerCase()?(o="Deluge",$("#torrent_verify_cert_option").show(),$("#torrent_verify_deluge").show(),$("#torrent_verify_rtorrent").hide(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#host_desc_torrent").text(_("URL to your Deluge client (e.g. http://localhost:8112)"))):"deluged"===t.toLowerCase()?(o="Deluge",$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_username_option").show(),$("#host_desc_torrent").text(_("IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)"))):"download_station"===t.toLowerCase()?(o="Synology DS",$("#torrent_label_option").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_path_option").find(".fileBrowser").hide(),$("#host_desc_torrent").text(_("URL to your Synology DS client (e.g. http://localhost:5000)")),$("#path_synology").show()):"rtorrent"===t.toLowerCase()?(o="rTorrent",$("#host_desc_torrent").html(_("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)")),$("#torrent_verify_cert_option").show(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").show(),$("#torrent_auth_type_option").show()):"qbittorrent"===t.toLowerCase()?(o="qbittorrent",$("#torrent_path_option").hide(),$("#label_warning_qbittorrent").show(),$("#label_anime_warning_qbittorrent").show(),$("#host_desc_torrent").text(_("URL to your qBittorrent client (e.g. http://localhost:8080)"))):"mlnet"===t.toLowerCase()?(o="mlnet",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#host_desc_torrent").text(_("URL to your MLDonkey (e.g. http://localhost:4080)"))):"putio"===t.toLowerCase()&&(o="putio",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_verify_cert_option").hide(),$("#torrent_verify_deluge").hide(),$("#torrent_verify_rtorrent").hide(),$("#torrent_label_anime_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_host_option").hide(),$("#host_desc_torrent").text(_("URL to your putio client (e.g. http://localhost:8080)")),$('label[for="torrent_password"]').html('<a href="'+anonURL+'https://app.put.io/oauth/apps/new" target="_blank">'+_("Create a new OAuth app for put.io")+"</a>"),$("#username_title.component-title").text(_("Put.io Parent Folder")),$("#password_title.component-title").text(_("Put.io OAuth Token"))),$("#host_title").text(o+" host:port"),$("#username_title").text(o+" username"),$("#password_title").text(o+" password"),$("#torrent_client").text(o),$("#rpcurl_title").text(o+" RPC URL"),e="#options_torrent_clients"),$(e).show()},$("#torrent_host").on("input",function(){"rtorrent"===$("#torrent_method :selected").val().toLowerCase()&&("scgi://"===$("#torrent_host").val().substr(0,7)?($("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#torrent_password_option").hide(),$("#torrent_password").prop("value",""),$("#torrent_auth_type_option").hide(),$("#torrent_auth_type option[value=none]").attr("selected","selected")):($("#torrent_username_option").show(),$("#torrent_password_option").show(),$("#torrent_auth_type_option").show()))}),$("#nzb_method").on("change",$(this).nzbMethodHandler),$(this).nzbMethodHandler(),$("#testSABnzbd").on("click",function(){const t={};$("#testSABnzbd_result").html(loading),t.host=$("#sab_host").val(),t.username=$("#sab_username").val(),t.password=$("#sab_password").val(),t.apiKey=$("#sab_apikey").val(),$.post(srRoot+"/home/testSABnzbd",{host:t.host,username:t.username,password:t.password,apikey:t.apiKey},function(t){$("#testSABnzbd_result").html(t)})}),$("#testDSM").on("click",function(){const t={};$("#testDSM_result").html(loading),t.host=$("#syno_dsm_host").val(),t.username=$("#syno_dsm_user").val(),t.password=$("#syno_dsm_pass").val(),$.post(srRoot+"/home/testDSM",{host:t.host,username:t.username,password:t.password},function(t){$("#testDSM_result").html(t)})}),$("#torrent_method").on("change",$.torrentMethodHandler),$.torrentMethodHandler(),$("#test_torrent").on("click",function(){const t={};$("#test_torrent_result").html(loading),t.method=$("#torrent_method :selected").val(),t.host=$("#torrent_host").val(),t.username=$("#torrent_username").val(),t.password=$("#torrent_password").val(),$.post(srRoot+"/home/testTorrent",{torrent_method:t.method,host:t.host,username:t.username,password:t.password},function(t){$("#test_torrent_result").html(t)})})},subtitles:function(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){const t=$(this).attr("id");$("#editAService :selected").val()+"Div"===t?$(this).show():$(this).hide()})},$.fn.addService=function(t,e,o,n,s,i){if(null===o.match("/$")&&(o+="/"),0===$("#service_order_list > #"+t).length&&!1!==i){let n="";n+='<li class="ui-state-default" id="'+t+'"> ',n+='<input type="checkbox" id="enable_'+t+'" class="service_enabler" CHECKED> ',n+='<a href="'+anonURL+o+'" class="imgLink" target="_new">',n+='<img src="'+srRoot+'/images/services/newznab.gif" alt="'+e+'" width="16" height="16"></a> ',n+=e+"</li>",$("#service_order_list").append(n),$("#service_order_list").sortable("refresh")}},$.fn.deleteService=function(t){$("#service_order_list > #"+t).remove()},$.fn.refreshServiceList=function(){const t=$("#service_order_list").sortable("toArray"),e=[];$.each(t,function(t,o){const n=$("#enable_"+o).is(":checked")?"1":"0";e.push(o+":"+n)}),$("#service_order").val(e.join(" "))},$("#editAService").on("change",function(){$(this).showHideServices()}),$(".service_enabler").on("click",function(){$(this).refreshServiceList()}),$(this).showHideServices(),$("#service_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshServiceList()},create:function(){$(this).refreshServiceList()}}),$("#service_order_list").disableSelection()},providers:function(){console.log("This function need to be filled with ConfigProviders.js but can't be as we've got scope issues currently.")}},home:{init:function(){$("#showTabs").tabs({activate:function(){$(".show-grid").isotope("layout")}})},index:function(){function t(t){let e=0,o=0,n=0,s=0;t<125?(n=3,s=4):t<175?(e=9,o=40,n=4,s=5):(e=11,o=50,n=6,s=6),$("#posterPopup").remove(),void 0===e?$(".show-details").hide():($(".show-details").show(),$(".show-dlstats, .show-quality").css("fontSize",e),$(".show-network-image").css("width",o)),$(".show-container").css({width:t,borderWidth:s,borderRadius:n})}$(".resetsorting").on("click",function(){$("table").trigger("filterReset")}),$("#filterShowName").on("input",__.debounce(function(){$(".show-grid").isotope({filter:function(){return $(this).find(".show-title").html().trim().toLowerCase().indexOf($("#filterShowName").val().toLowerCase())>-1}})},500));let e;"undefined"!=typeof Storage&&(e=parseInt(localStorage.getItem("posterSize"),10)),("number"!=typeof e||isNaN(e))&&(e=188),t(e),$("#posterSizeSlider").slider({min:75,max:250,value:e,change:function(e,o){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",o.value),t(o.value),$(".show-grid").isotope("layout")}}),$("#rootDirSelect").on("change",function(){$("#rootDirForm").submit()}),$(".progressbar").each(function(){const t=$(this).data("progress-percentage"),e=100===t?100:t>80?80:t>60?60:t>40?40:20;$(this).progressbar({value:t}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+e)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()}),$("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0:function(t){return $(t).find("time").attr("datetime")},1:function(t){return $(t).find("time").attr("datetime")},3:function(t){return $(t).find("span").prop("title").toLowerCase()},4:function(t){return $(t).find("span").text().toLowerCase()},5:function(t){return $(t).find("span:first").text()},6:function(t){return $(t).data("show-size")},7:function(t){return $(t).find("span").attr("title").toLowerCase()}},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"eps"},6:{sorter:"digit"},7:{filter:"parsed"}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,stickyHeaders_offset:50,filter_saveFilters:!0,filter_functions:{5:function(t,e,o){let n=!1;const s=Math.floor(e%1*1e3),i={"<":function(t,e){return t<e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e},">":function(t,e){return t>e}};if(""===o)n=!0;else{let t=o.match(/(<|<=|>=|>)\s?(\d+)/i);t&&(0,i[t[1]])(s,parseInt(t[2],10))&&(n=!0),(t=o.match(/(\d+)\s(-|to)\s+(\d+)/i))&&("-"!==t[2]&&"to"!==t[2]||s>=parseInt(t[1],10)&&s<=parseInt(t[3],10)&&(n=!0)),(t=o.match(/(=)?\s?(\d+)\s?(=)?/i))&&("="!==t[1]&&"="!==t[3]||parseInt(t[2],10)===s&&(n=!0)),!isNaN(parseFloat(o))&&isFinite(o)&&parseInt(o,10)===s&&(n=!0)}return n}},columnSelector_mediaquery:!1},sortStable:!0,sortAppend:[[2,0]]}),$(".show-grid").imagesLoaded(function(){$(".loading-spinner").hide(),$(".show-grid").show().isotope({itemSelector:".show-container",sortBy:getMeta("sickbeard.POSTER_SORTBY"),sortAscending:getMeta("sickbeard.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:!0},getSortData:{name:function(t){const e=$(t).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?e:e.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},network:"[data-network]",date:function(t){const e=$(t).attr("data-date");return e.length&&parseInt(e,10)||Number.POSITIVE_INFINITY},progress:function(t){const e=$(t).attr("data-progress");return e.length&&parseInt(e,10)||Number.NEGATIVE_INFINITY}}});let t=null;$(".show-container").on("mouseenter",function(){const e=$(this);"none"===e.find(".show-details").css("display")&&(t=setTimeout(function(){t=null,$("#posterPopup").remove();const o=e.clone().attr({id:"posterPopup"}),n=e.offset().left,s=e.offset().top;o.css({position:"absolute",margin:0,top:s,left:n,zIndex:9999}),o.find(".show-details").show(),o.on("mouseleave",function(){$(this).remove()}),o.appendTo("body");let i=(s+e.height())/2-219,a=(n+e.width())/2-125;const r=$(window).scrollTop(),l=$(window).scrollLeft(),c=r+$(window).innerHeight(),d=l+$(window).innerWidth();i<r+5&&(i=r+5),a<l+5&&(a=l+5),i+438+5>c&&(i=c-438-5),a+250+5>d&&(a=d-250-5),o.animate({top:i,left:a,width:250,height:438})},300))}).on("mouseleave",function(){null!==t&&clearTimeout(t)})}),$("#postersort").on("change",function(){$(".show-grid").isotope({sortBy:$(this).val()}),$.post($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))}),$("#postersortdirection").on("change",function(){$(".show-grid").isotope({sortAscending:"true"===$(this).val()}),$.post($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTableShows"),"#popover-target"),metaToBool("sickbeard.ANIME_SPLIT_HOME")&&$.tablesorter.columnSelector.attachTo($("#showListTableAnime"),"#popover-target")})},displayShow:function(){function t(t){t.on("click.disabled",!1),t.prop("enableClick","1"),t.fadeTo("fast",1)}function e(t){t.off("click.disabled"),t.prop("enableClick","0"),t.fadeTo("fast",.5)}function o(t,e,o,n){const s=$("#showID").val(),i=$("#indexer").val();""===o&&(o=null),""===n&&(n=null),$.getJSON(srRoot+"/home/setSceneNumbering",{show:s,indexer:i,forSeason:t,forEpisode:e,sceneSeason:o,sceneEpisode:n},function(o){null===o.sceneSeason||null===o.sceneEpisode?$("#sceneSeasonXEpisode_"+s+"_"+t+"_"+e).val(""):$("#sceneSeasonXEpisode_"+s+"_"+t+"_"+e).val(o.sceneSeason+"x"+o.sceneEpisode),o.success||notifyModal(o.errorMessage?o.errorMessage:"Update failed.")})}function n(t,e){const o=$("#showID").val(),n=$("#indexer").val();""===e&&(e=null),$.getJSON(srRoot+"/home/setSceneNumbering",{show:o,indexer:n,forAbsolute:t,sceneAbsolute:e},function(e){null===e.sceneAbsolute?$("#sceneAbsolute_"+o+"_"+t).val(""):$("#sceneAbsolute_"+o+"_"+t).val(e.sceneAbsolute),e.success||notifyModal(e.errorMessage?e.errorMessage:"Update failed.")})}function s(t,e){return t?($(e).css({"background-color":"#90EE90",color:"#FFF","font-weight":"bold"}),!0):($(e).css({"background-color":"#FF0000",color:"#FFF!important","font-weight":"bold"}),!1)}metaToBool("sickbeard.FANART_BACKGROUND")&&($.backstretch(srRoot+"/showPoster/?show="+$("#showID").attr("value")+"&which=fanart"),$(".backstretch").css("opacity",getMeta("sickbeard.FANART_BACKGROUND_OPACITY")).fadeIn("500")),$(".displayShowTable").tablesorter({widgets:["saveSort","stickyHeaders","columnSelector"],widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox"/>{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked",stickyHeaders_offset:50}}),$(".displayShowTable").ajaxEpSearch({colorRow:!0}),$(".epSubtitlesSearch").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;e($(this));const o=$(this).parent().siblings(".col-subtitles"),n=$(this).children("span");return n.prop("class","loading-spinner16"),n.prop("title","Searching"),$.getJSON($(this).attr("href"),function(e){if("failure"!==e.result.toLowerCase()&&"no subtitles downloaded"!==e.result.toLowerCase()){const s=e.subtitles.split(",");o.empty(),$.each(s,function(t,e){""!==e&&o.append($("<img/>").attr({src:srRoot+"/images/subtitles/flags/"+e+".png",alt:e,width:16,height:11}))}),n.prop("class","displayshow-icon-sub"),t($(this))}else n.prop("class","displayshow-icon-disable");n.prop("title",e.result)}),!1}),$(".epRetrySubtitlesSearch").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;const o=$(this),n=$("#confirmSubtitleDownloadModal");return $("#confirmSubtitleDownloadModal .btn.btn-success").on("click",function(){e(o),n.modal("hide");const s=o.children("img");s.hide(),o.append($("<span/>").attr({class:"loading-spinner16",title:"Searching"}));const i=o.children("span");return $.getJSON(o.prop("href"),function(t){"failure"===t.result.toLowerCase()?(i.prop("class","displayshow-icon-disable"),i.prop("title","Failed")):(s.prop("title","Success"),s.prop("alt","Success"),i.hide(),s.show())}),t(o),!1}),n.modal("show"),!1}),$("#seasonJump").on("change",function(){const t=$("#seasonJump option:selected").val();if(t&&"jump"!==t){const e=$("#seasonJump option:selected").data("season");$("html,body").animate({scrollTop:$('[name ="'+t.substring(1)+'"]').offset().top-50},"slow"),$("#collapseSeason-"+e).collapse("show"),location.hash=t}$(this).val("jump")}),$("#prevShow").on("click",function(){$("#pickShow option:selected").prev("option").prop("selected","selected"),$("#pickShow").change()}),$("#nextShow").on("click",function(){$("#pickShow option:selected").next("option").prop("selected","selected"),$("#pickShow").change()}),$("#changeStatus").on("click",function(){const t=[];if($(".epCheck").each(function(){!0===this.checked&&t.push($(this).attr("id"))}),0===t.length)return!1;const e=srRoot+"/home/setStatus",o="show="+$("#showID").attr("value")+"&eps="+t.join("|")+"&status="+$("#statusSelect").val();$.post(e,o,function(){location.reload(!0)})}),$(".seasonCheck").on("click",function(){const t=this,e=$(t).attr("id");$("#collapseSeason-"+e).collapse("show"),$('.epCheck:visible[id^="'+e+'x"]').each(function(){this.checked=t.checked})});let i=null;$(".epCheck").on("click",function(t){if(!i||!t.shiftKey)return void(i=this);const e=this;let o=0;$(".epCheck").each(function(){if(2===o)return!1;1===o&&(this.checked=i.checked),this!==e&&this!==i||o++})}),$(".seriesCheck").on("click",function(){$(".epCheck:visible").each(function(){this.checked=!0}),$(".seasonCheck:visible").each(function(){this.checked=!0})}),$(".clearAll").on("click",function(){$(".epCheck:visible").each(function(){this.checked=!1}),$(".seasonCheck:visible").each(function(){this.checked=!1})}),$("#pickShow").on("change",function(){const t=$(this).val();0!==t&&(window.location.href=srRoot+"/home/displayShow?show="+t)}),$("#checkboxControls input").on("change",function(){const t=$(this).attr("id");$(this).showHideRows(t)}),$("#checkboxControls input").each(function(){const t=$(this).is(":checked");$("tr."+$(this).attr("id")).each(function(){t?$(this).show():$(this).hide()})}),$.fn.showHideRows=function(t){const e=$("#checkboxControls > input, #"+t).is(":checked");$("tr."+t).each(function(){e?$(this).show():$(this).hide()}),$("tr.seasonheader").each(function(){let t=0;const e=$(this).attr("id");$("tr."+e+" :visible").each(function(){t++}),0===t?($(this).hide(),$("#"+e+"-cols").hide()):($(this).show(),$("#"+e+"-cols").show())})},$(".sceneSeasonXEpisode").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));let t=$(this).attr("data-for-season"),e=$(this).attr("data-for-episode"),n=$(this).val().match(/^(\d+)x(\d+)$/i),i=$(this).val().match(/^(\d+)$/i),a=null,r=null,l=!1;n?(a=n[1],r=n[2],l=s(!0,$(this))):i?(a=t,r=i[1],l=s(!0,$(this))):l=s(!1,$(this)),l&&o(t,e,a,r)}),$(".sceneAbsolute").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));let t=$(this).attr("data-for-absolute"),e=$(this).val().match(/^(\d{1,3})$/i),o=null;e&&(o=e[1]),n(t,o)}),$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each(function(t,e){$(e).html($("<span/>").width(12*$(e).text()))})},$(".imdbstars").generateStars(),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$(".displayShowTable").each(function(t,e){$.tablesorter.columnSelector.attachTo(e,"#popover-target")})}),$(function(){$(".collapse.toggle").on("hide.bs.collapse",function(){const t=/collapseSeason-([0-9]+)/g.exec(this.id);$("#showseason-"+t[1]).text(_("Show Episodes"))}),$(".collapse.toggle").on("show.bs.collapse",function(){const t=/collapseSeason-([0-9]+)/g.exec(this.id);$("#showseason-"+t[1]).text(_("Hide Episodes"))})})},editShow:function(){$("#location").fileBrowser({title:_("Select Show Location")}),SICKRAGE.common.QualityChooser.init(),$("#submit").on("click",function(){const t=$("#exceptions_list").find("optgroup").get().map(function(t){return[$(t).data("season"),$(t).find("option:enabled").get().map(function(t){const e=$(t).val();return encodeURIComponent(e)}).join("|")].join(":")}).filter(function(t){return t});$("#exceptions").val(t),metaToBool("show.is_anime")&&generateBlackWhiteList()}),$("#addSceneName").on("click",function(){const t=$("#SceneSeason").find(":selected").data("season"),e=$("#SceneName").val(),o=$("#exceptions_list").find('[data-season="'+t+'"]').get()[0],n=$(o).find("option.empty");if($(o).find("option:not(.empty)").get().map(function(t){return $(t).val()}).indexOf(e)>-1||""===e.trim())return void $("#SceneName").val("");const s=$("<option data-season="+t+">").text(e).val(e);$(o).append(s),n.remove(),$("#SceneName").val("")}),$("#removeSceneName").on("click",function(){const t=$("#exceptions_list").find("option:selected"),e=t.closest("optgroup");if(e.find("option").length<2){const t=$('<option disabled class="empty">');t.text(_("None")),e.append(t)}t.remove()})},postProcess:function(){$("#episodeDir").fileBrowser({title:_("Select Unprocessed Episode Folder"),key:"postprocessPath"})},status:function(){$("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra"],textExtraction:{5:function(t){return $(t).data("seconds")},6:function(t){return $(t).data("seconds")}},headers:{5:{sorter:"digit"},6:{sorter:"digit"}}}),$("#queueStatusTable").tablesorter({widgets:["saveSort","zebra"],sortList:[[3,0],[4,0],[2,1]]})},restart:function(){let t=srPID,e=setTimeout(function(){setInterval(function(){$.post(srRoot+"/home/is-alive/",function(o){void 0!==o&&o.msg===t||($("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()),void 0!==o&&"nope"!==o.msg&&o.msg!==t&&(clearInterval(e),$("#restart_loading").hide(),$("#restart_success").show(),$("#refresh_message").show(),srPID=o.msg,t=o.msg,e=setInterval(function(){$.post(srRoot+"/home/is-alive/",function(){clearInterval(e),setTimeout(function(){window.location=srRoot+"/"+srDefaultPage+"/"},2e3)},"jsonp")},100))},"jsonp").fail(function(){$("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()})},100)},500)}},manage:{init:function(){$.makeEpisodeRow=function(t,e,o,n,s){let i="";return i+=' <tr class="'+$("#row_class").val()+" show-"+t+'">',i+='  <td class="tableleft" align="center"><input type="checkbox" class="'+t+'-epcheck" name="'+t+"-"+e+"x"+o+'"'+(s?" checked":"")+"></td>",i+="  <td>"+e+"x"+o+"</td>",i+='  <td class="tableright" style="width: 100%">'+n+"</td>",i+=" </tr>"},$.makeSubtitleRow=function(t,e,o,n,s,i){let a="";if(a+='<tr class="good show-'+t+'">',a+='<td align="center"><input type="checkbox" class="'+t+'-epcheck" name="'+t+"-"+e+"x"+o+'"'+(i?" checked":"")+"></td>",a+='<td style="width: 2%;">'+e+"x"+o+"</td>",s.length>0){a+='<td style="width: 8%;">',s=s.split(",");for(let t in s)({}).hasOwnProperty.call(s,t)&&(a+='<img src="'+srRoot+"/images/subtitles/flags/"+s[t]+'.png" width="16" height="11" alt="'+s[t]+'" />&nbsp;');a+="</td>"}else a+='<td style="width: 8%;">None</td>';return a+="<td>"+n+"</td>",a+="</tr>"}},index:function(){$(".resetsorting").on("click",function(){$("table").trigger("filterReset")}),$("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],textExtraction:{2:function(t){return($(t).find("img").attr("alt")||"unknown").toLowerCase()},3:function(t){return $(t).find("span").attr("title").toLowerCase()},4:function(t){return $(t).find("span").attr("title").toLowerCase()},5:function(t){return $(t).find("span").attr("title").toLowerCase()},6:function(t){return $(t).find("span").attr("title").toLowerCase()},7:function(t){return $(t).find("span").attr("title").toLowerCase()},8:function(t){return $(t).find("span").attr("title").toLowerCase()},9:function(t){return $(t).find("span").attr("title").toLowerCase()},10:function(t){return $(t).text().toLowerCase()},11:function(t){return $(t).text().toLowerCase()}},widgets:["zebra","filter","columnSelector"],headers:{0:{sorter:!1,filter:!1},1:{sorter:"loadingNames"},2:{sorter:"network"},3:{sorter:"quality"},4:{sorter:"sports"},5:{sorter:"scene"},6:{sorter:"anime"},7:{sorter:"flatfold"},8:{sorter:"paused"},9:{sorter:"subtitle"},10:{sorter:"default_ep_status"},11:{sorter:"status"},12:{sorter:!1},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1},16:{sorter:!1},17:{sorter:!1}},widgetOptions:{columnSelector_mediaquery:!1}}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#massUpdateTable"),"#popover-target")}),$(".submitMassEdit").on("click",function(){const t=[];if($(".editCheck").each(function(){!0===this.checked&&t.push($(this).attr("id").split("-")[1])}),0===t.length)return;const e=$("<form method='post' action='"+srRoot+"/manage/massEdit'><input type='hidden' name='toEdit' value='"+t.join("|")+"'/></form>");e.appendTo("body"),e.submit()}),$(".submitMassUpdate").on("click",function(){const t=[],e=[],o=[],n=[],s=[],i=[],a=[];$(".updateCheck").each(function(){!0===this.checked&&t.push($(this).attr("id").split("-")[1])}),$(".refreshCheck").each(function(){!0===this.checked&&e.push($(this).attr("id").split("-")[1])}),$(".renameCheck").each(function(){!0===this.checked&&o.push($(this).attr("id").split("-")[1])}),$(".subtitleCheck").each(function(){!0===this.checked&&n.push($(this).attr("id").split("-")[1])}),$(".removeCheck").each(function(){!0===this.checked&&i.push($(this).attr("id").split("-")[1])});let r=0;if($(".deleteCheck").each(function(){!0===this.checked&&r++}),r>=1&&$.confirm({title:"Delete Shows",text:"You have selected to delete "+r+" show(s).  Are you sure you wish to continue? All files will be removed from your system.",confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(){if($(".deleteCheck").each(function(){!0===this.checked&&s.push($(this).attr("id").split("-")[1])}),t.length+e.length+o.length+n.length+s.length+i.length+a.length===0)return!1;const r=srRoot+"/manage/massUpdate",l="toUpdate="+t.join("|")+"&toRefresh="+e.join("|")+"&toRename="+o.join("|")+"&toSubtitle="+n.join("|")+"&toDelete="+s.join("|")+"&toRemove="+i.join("|")+"&toMetadata="+a.join("|");$.post(r,l,function(){location.reload(!0)})}}),t.length+e.length+o.length+n.length+s.length+i.length+a.length===0)return!1;const l=srRoot+"/manage/massUpdate",c="toUpdate="+t.join("|")+"&toRefresh="+e.join("|")+"&toRename="+o.join("|")+"&toSubtitle="+n.join("|")+"&toDelete="+s.join("|")+"&toRemove="+i.join("|")+"&toMetadata="+a.join("|");$.post(l,c,function(){location.reload(!0)})}),[".editCheck",".updateCheck",".refreshCheck",".renameCheck",".deleteCheck",".removeCheck"].forEach(function(t){let e=null;$(t).on("click",function(o){if(!e||!o.shiftKey)return void(e=this);const n=this;let s=0;$(t).each(function(){if(2===s)return!1;1!==s||this.disabled||(this.checked=e.checked),this!==n&&this!==e||s++})})})},backlogOverview:function(){$("#pickShow").on("change",function(t){const e=$(t.currentTarget).val();e&&$("html,body").animate({scrollTop:$("#show-"+e).offset().top-25},"slow")})},failedDownloads:function(){$("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra"],sortList:[[1,0]],headers:{3:{sorter:!1}}}),$("#limit").on("change",function(t){window.location.href=srRoot+"/manage/failedDownloads/?limit="+$(t.currentTarget).val()}),$("#submitMassRemove").on("click",function(){const t=[];if($(".removeCheck").each(function(){!0===this.checked&&t.push($(this).attr("id").split("-")[1])}),0===t.length)return!1;$.post(srRoot+"/manage/failedDownloads","toRemove="+t.join("|"),function(){location.reload(!0)})}),$(".removeCheck").length&&$(".removeCheck").each(function(t){let e=null;$(t).on("click",function(o){if(!e||!o.shiftKey)return void(e=this);const n=this;let s=0;$(t+":visible").each(function(){if(2===s)return!1;1===s&&(this.checked=e.checked),this!==n&&this!==e||s++})})})},massEdit:function(){function t(t){const e=t.split("_");return e[e.length-1]}function e(t,e){$("#new_root_dir_"+e.whichId).val(t),$("#new_root_dir_"+e.whichId).change()}$(".new_root_dir").on("change",function(){const e=t($(this).attr("id"));$("#display_new_root_dir_"+e).html("<b>"+$(this).val()+"</b>")}),$(".edit_root_dir").on("click",function(){const o=t($(this).attr("id")),n=$("#new_root_dir_"+o).val();$(this).nFileBrowser(e,{initialDir:n,whichId:o})}),$(".delete_root_dir").on("click",function(){const e=t($(this).attr("id"));$("#new_root_dir_"+e).val(null),$("#display_new_root_dir_"+e).html("<b>"+_("DELETED")+"</b>")}),SICKRAGE.common.QualityChooser.init()},episodeStatuses:function(){$(".allCheck").on("click",function(){const t=$(this).attr("id").split("-")[1];$("."+t+"-epcheck").prop("checked",$(this).is(":checked"))}),$(".get_more_eps").on("click",function(){const t=$(this).attr("id"),e=$("#allCheck-"+t).is(":checked"),o=$("tr#"+t),n=$(this).attr("data-clicked"),s=$(this).attr("value");n?"collapse"===s.toLowerCase()?($("table tr").filter(".show-"+t).hide(),$(this).prop("value","Expand")):"expand"===s.toLowerCase()&&($("table tr").filter(".show-"+t).show(),$(this).prop("value","Collapse")):($.getJSON(srRoot+"/manage/showEpisodeStatuses",{indexer_id:t,whichStatus:$("#oldStatus").val()},function(n){$.each(n,function(n,s){$.each(s,function(s,i){o.after($.makeEpisodeRow(t,n,s,i,e))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})},subtitleMissed:function(){$(".allCheck").on("click",function(){const t=$(this).attr("id").split("-")[1];$("."+t+"-epcheck").prop("checked",$(this).is(":checked"))}),$(".get_more_eps").on("click",function(){const t=$(this).attr("id"),e=$("#allCheck-"+t).is(":checked"),o=$("tr#"+t),n=$(this).attr("data-clicked"),s=$(this).attr("value");n?"Collapse"===s?($("table tr").filter(".show-"+t).hide(),$(this).prop("value","Expand")):"Expand"===s&&($("table tr").filter(".show-"+t).show(),$(this).prop("value","Collapse")):($.getJSON(srRoot+"/manage/showSubtitleMissed",{indexer_id:t,whichSubs:$("#selectSubLang").val()},function(n){$.each(n,function(n,s){$.each(s,function(s,i){o.after($.makeSubtitleRow(t,n,s,i.name,i.subtitles,e))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})}},history:{init:function(){},index:function(){$("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],sortList:[[0,1]],textExtraction:function(){if(isMeta("sickbeard.HISTORY_LAYOUT",["detailed"]))return{0:function(t){return $(t).find("time").attr("datetime")},4:function(t){return $(t).find("span").text().toLowerCase()}};const t={0:function(t){return $(t).find("time").attr("datetime")},2:function(t){return $(t).attr("provider").toLowerCase()}};return isMeta("sickbeard.USE_SUBTITLES",["True"])?(t[4]=function(t){return $(t).find("img").attr("title")},t[5]=function(t){return $(t).find("span").text().toLowerCase()}):t[4]=function(t){return $(t).find("span").text().toLowerCase()},t}(),headers:isMeta("sickbeard.HISTORY_LAYOUT",["detailed"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}:isMeta("sickbeard.USE_SUBTITLES",["True"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:!1},5:{sorter:"quality"},6:{sorter:!1,filter:!1}}:{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}}),$("#history_limit").on("change",function(){const t=srRoot+"/history/?limit="+$(this).val();window.location.href=t}),$("a.removehistory").on("click",function(){const t=[];let e=0;return $(".removeCheck").each(function(){!0===this.checked&&(t.push(shiftReturn($(this).attr("id").split("-"))),e++)}),!(e<1)&&($.confirm({title:"Remove Logs",text:"You have selected to remove "+e+" download history log(s).<br /><br />This cannot be undone.<br />Are you sure you wish to continue?",confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm:function(){const e=srRoot+"/history/removeHistory",o="toRemove="+t.join("|");$.post(e,o,function(){location.reload(!0)})}}),!1)}),[".removeCheck"].forEach(function(t){let e=null;$(t).on("click",function(o){if(!e||!o.shiftKey)return void(e=this);const n=this;let s=0;$(t).each(function(){if(1!==s||this.disabled){if(2===s)return!1}else this.checked=e.checked;this!==n&&this!==e||s++})})})}},errorlogs:{init:function(){},index:function(){},viewlogs:function(){function t(){if("active"===$("#log_update_toggle").data("state")){const t="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val(),e=srRoot+"/errorlogs/viewlog/";$.post(e,t,function(t){$("pre").html($(t).find("pre").html())})}setTimeout(t,500)}$("#min_level,#log_filter,#log_search").on("keyup change",__.debounce(function(){$("#log_search").val().length>0&&($('#log_filter option[value="<NONE>"]').prop("selected",!0),$("#min_level option[value=5]").prop("selected",!0)),$("#min_level").prop("disabled",!0),$("#log_filter").prop("disabled",!0),document.body.style.cursor="wait";const t=srRoot+"/errorlogs/viewlog/",e="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val();$.post(t,e,function(e){history.pushState("data","",t),$("pre").html($(e).find("pre").html()),$("#min_level").prop("disabled",!1),$("#log_filter").prop("disabled",!1),document.body.style.cursor="default"})},500)),t(),$("#log_update_toggle").on("click",function(){const t="active"===$(this).data("state");return $(this).data("state",t?"paused":"active"),$(this).find("i").toggleClass("fa-pause fa-play"),$(this).find("span").text(t?_("Resume"):_("Pause")),$(this).attr("title",t?_("Resume updating the log on this page."):_("Pause updating the log on this page.")),!1})}},schedule:{init:function(){$(".btn-cal-subscribe").attr("href",document.location.href.replace(/https?/,"webcal").replace(/schedule.*/,"calendar"))},index:function(){if(isMeta("sickbeard.COMING_EPS_LAYOUT",["list"])){const t={date:0,show:2,network:5},e=getMeta("sickbeard.COMING_EPS_SORT"),o=e in t?[[t[e],0]]:[[0,0]];$(".resetsorting").on("click",function(){$("#showListTable").trigger("filterReset")}),$("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort"],sortList:o,textExtraction:{0:function(t){return $(t).find("time").attr("datetime")},1:function(t){return $(t).find("time").attr("datetime")},7:function(t){return $(t).find("span").text().toLowerCase()}},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:!1},9:{sorter:!1}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,filter_saveFilters:!0,columnSelector_mediaquery:!1,stickyHeaders_offset:50}}),$(document).ajaxEpSearch()}isMeta("sickbeard.COMING_EPS_LAYOUT",["banner","poster"])&&($(document).ajaxEpSearch(),$(".ep_summary").hide(),$(".ep_summaryTrigger").on("click",function(){$(this).next(".ep_summary").slideToggle("normal",function(){$(this).prev(".ep_summaryTrigger").attr("src",function(t,e){return $(this).next(".ep_summary").is(":visible")?e.replace("plus","minus"):e.replace("minus","plus")})})})),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTable"),"#popover-target")})}},addShows:{init:function(){$("#tabs").tabs({collapsible:!0,selected:metaToBool("sickbeard.SORT_ARTICLE")?-1:0}),$.initRemoteShowGrid=function(){$("#showsort").val("original"),$("#showsortdirection").val("asc"),$("#showsort").on("change",function(){let t;switch(this.value){case"original":t="original-order";break;case"rating":$("#container").isotope({sortBy:"random"}),t="rating";break;case"rating_votes":t=["rating","votes"];break;case"votes":t="votes";break;default:t="name"}$("#container").isotope({sortBy:t})}),$("#showsortdirection").on("change",function(){$("#container").isotope({sortAscending:"asc"===this.value})}),$("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name:function(t){const e=$(t).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?e:e.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt"}})},$.loadTraktImages=function(){const t=srRoot+"/addShows/getTrendingShowImage";let e=0;$("img.trakt-image").each(function(){const o=$(this).attr("data-src-indexer-id");o?(setTimeout(function(){$.post(t,{indexerId:o},function(t){t&&$('img.trakt-image[data-src-indexer-id="'+t+'"]').attr("src",$('img.trakt-image[data-src-indexer-id="'+t+'"]').attr("data-src-cache"))})},300+300*e),e++):$(this).attr("src",$(this).attr("data-src-cache"))})},$.fn.loadRemoteShows=function(t,e,o){$(this).html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" />&nbsp;'+e),$(this).load(srRoot+t+" #container",function(t,e){"error"===e?$(this).empty().html(o):($.initRemoteShowGrid(),$.loadTraktImages())})},$("#saveDefaultsButton").on("click",function(){const t=[],e=[];$("#anyQualities option:selected").each(function(e,o){t.push($(o).val())}),$("#bestQualities option:selected").each(function(t,o){e.push($(o).val())}),$.post(srRoot+"/config/general/saveAddShowDefaults",{defaultStatus:$("#statusSelect").val(),anyQualities:t.join(","),bestQualities:e.join(","),defaultSeasonFolders:$("#season_folders").is(":checked"),subtitles:$("#subtitles").is(":checked"),anime:$("#anime").is(":checked"),scene:$("#scene").is(":checked"),defaultStatusAfter:$("#statusSelectAfter").val()}),$(this).attr("disabled",!0)}),$("#statusSelect, #qualityPreset, #season_folders, #anyQualities, #bestQualities, #subtitles, #scene, #anime, #statusSelectAfter").on("change",function(){$("#saveDefaultsButton").attr("disabled",!1)}),SICKRAGE.common.QualityChooser.init()},index:function(){},newShow:function(){const t=function(){let t={showName:"",dir:"unknown dir.",sepChar:""};return $("input:radio[name=whichSeries]:checked").length?t.showName=$("input:radio[name=whichSeries]:checked").val().split("|")[4]:$("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length&&(t.showName=$("#providedName").val()),SICKRAGE.common.updateBlackWhiteList(t.showName),$("#rootDirs option:selected").length?(t.dir=$("#rootDirs option:selected").val(),t.dir.indexOf("/")>=0?t.sepChar="/":t.dir.indexOf("\\")>=0&&(t.sepChar="\\"),t.dir.trim(t.sepChar),t.dir+=t.sepChar):$("#fullShowPath").val()&&(t.dir=$("#fullShowPath").val()),t.showName.length?$.post(srRoot+"/addShows/sanitizeFileName",{name:t.showName},function(e){$("#desc-show-name").text(t.showName),$("#desc-directory-name").html(t.dir+e+t.sepChar)}):($("#desc-show-name").text(t.showName),$("#desc-directory-name").html(t.dir)),$("#desc-quality-name").text($("#qualityPreset option:selected").text()),($("input:radio[name=whichSeries]:checked").val()||$("input:hidden[name=whichSeries]").val())&&($("#rootDirs option:selected").val()||$("#fullShowPath").val())?void $("#addShowButton").attr("disabled",!1):$("#addShowButton").attr("disabled",!0)},e=function(){$("#blackwhitelist").toggle($("#anime").prop("checked"))},o=function(t){let e='<div class="row"><div class="col-lg-6 col-md-12"><table class="sickbeardTable new-show-table"><thead><tr><th style="width:40px;">&nbsp;</th><th>Show Name</th><th>Premiere</th><th>Indexer</th></tr><thead>';const o=t.findIndex(function(t){return!t.inShowList});return t.forEach(function(t,n){e+='<tr class="'+(t.inShowList?"in-list":"")+'"><td><input type="radio" class="whichSeries" name="whichSeries" value="'+t.obj+'" '+(o===n?"checked ":"")+(t.inShowList?"disabled":"")+"/></td><td>"+function(){let e="<a href=";return t.inShowList?e+='"/home/displayShow?show='+t.id+'"':e+='"'+t.url+'" target="_blank"',e+=">"+t.title+"</a>"}()+"</td><td>"+t.debut+"</td><td>"+t.indexer+"</td></tr>"}),e+="</table></div></div>"};let n=null;$("#search-button").on("click",function(){if(!$("#show-name").val())return;n&&n.abort();const e=_($("#show-name").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect option:selected").text());$("#searchResults").empty().html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" /> '+_("searching {searchingFor}...").replace(/{searchingFor}/,e)),n=$.ajax({url:srRoot+"/addShows/searchIndexersForShowName",data:{search_term:$("#show-name").val().trim(),lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:1e3*parseInt($("#indexer_timeout").val(),10),dataType:"json",error:function(){$("#searchResults").empty().html(_("search timed out, try again or try another indexer")),$(".next-steps").hide()},success:function(e){let n='<legend class="legendStep">#2 Pick a Show</legend>';if(0===e.results.length)n+="<b>No results found, try a different search.</b>",$(".next-steps").hide();else{let t=[];$.each(e.results,function(o,n){let s={obj:n.join("|").replace(/"/g,""),indexer:n[0],id:n[3],title:n[4],debut:n[5],inShowList:n[6],url:anonURL+n[2]+n[3]};e.langid&&(s.url+="&lid="+e.langid),t.push(s)}),n+=o(t),$(".next-steps").show()}$("#searchResults").html(n),t()}})}),$("#addShowButton").on("click",function(){if(!$('input:radio[name="whichSeries"]:checked').val())return notifyModal("You must choose a show to continue"),!1;generateBlackWhiteList(),$("#addShowForm").submit()}),$("#anime").on("click",function(){e(),t()}),$("#skipShowButton").on("click",function(){$("#skipShow").val("1"),$("#addShowForm").submit()}),$("#rootDirText").change(t),$("#qualityPreset").change(t),$("#searchResults").on("change",".whichSeries",t),$("#show-name").on("focus keyup",function(t){13===t.keyCode&&$("#search-button").click()}),$("#show-name").val()&&$("#search-button").click(),t(),e()},addExistingShow:function(){function t(){let t="";$(".dir_check").each(function(e,o){$(o).is(":checked")&&(t.length&&(t+="&"),t+="rootDir="+encodeURIComponent($(o).attr("id")))}),$("#tableDiv").html('<img id="searchingAnim" src="'+srRoot+'/images/loading32.gif" height="32" width="32" /> '+_("loading folders...")),$.post(srRoot+"/addShows/massAddTable/",t,function(t){$("#tableDiv").html(t),$("#addRootDirTable").tablesorter({widgets:["zebra"],headers:{0:{sorter:!1}}})})}$("#tableDiv").on("click","#checkAll",function(){const t=this;$(".dirCheck").each(function(){this.checked=t.checked})}),$("#submitShowDirs").on("click",function(){const t=$("#addShowForm");let e=!1;if($(".dirCheck").each(function(){if(!0===this.checked){const o=$(this).attr("id"),n=$(this).closest("tr").find("select").val();$("<input>",{type:"hidden",name:"shows_to_add",value:n+"|"+o}).appendTo(t),e=!0}}),!1===e)return!1;$("<input>",{type:"hidden",name:"promptForSettings",value:$("#promptForSettings").is(":checked")?"on":"off"}).appendTo(t),t.submit()});let e="";const o=function(){if(e===$("#rootDirText").val())return!1;e=$("#rootDirText").val(),$("#rootDirStaticList").html(""),$("#rootDirs option").each(function(t,e){$("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+$(e).val()+'" checked=checked> <label for="'+$(e).val()+'">'+$(e).val()+"</label></li>")}),t()};o(),$("#rootDirText").on("change",o),$("#rootDirStaticList").on("click",".dir_check",t),$("#tableDiv").on("click",".showManage",function(t){t.preventDefault(),$("#tabs").tabs("option","active",0),$("html,body").animate({scrollTop:0},1e3)})},recommendedShows:function(){$("#recommendedShows").loadRemoteShows("/addShows/getRecommendedShows/","Loading recommended shows...","Trakt timed out, refresh page to try again")},trendingShows:function(){$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+$("#traktList").val(),"Loading trending shows...","Trakt timed out, refresh page to try again"),$("#traktlistselection").on("change",function(t){const e=t.target.value;window.history.replaceState({},document.title,"?traktList="+e),$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+e,"Loading trending shows...","Trakt timed out, refresh page to try again")})},popularShows:function(){$.initRemoteShowGrid()}}};const UTIL={exec:function(t,e){const o=SICKRAGE;e=void 0===e?"init":e,""!==t&&o[t]&&"function"==typeof o[t][e]&&o[t][e]()},init:function(){const t=document.body,e=t.getAttribute("data-controller"),o=t.getAttribute("data-action");UTIL.exec("common"),UTIL.exec(e),UTIL.exec(e,o)}};$.getJSON(srRoot+"/ui/locale.json",function(t){window.gt=void 0===t?new Gettext:new Gettext(t.messages),window._=function(t){return gt.gettext(t)},window._n=function(t,e,o){return gt.ngettext(t,e,o)},-1===navigator.userAgent.indexOf("PhantomJS")&&$(document).ready(UTIL.init)});