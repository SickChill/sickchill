function getMeta(e){return $('meta[data-var="'+e+'"]').data("content")}const scRoot=getMeta("scRoot"),srDefaultPage=getMeta("srDefaultPage"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+scRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+scRoot+"/images/loading16"+themeSpinner+'.gif" height="16" width="16" />';let srPID=getMeta("srPID");function configSuccess(){$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),window.location.href=scRoot+"/config/providers/"}),$("#email_show").trigger("notify"),$("#prowl_show").trigger("notify")}function metaToBool(e){let t=$('meta[data-var="'+e+'"]').data("content");return void 0===t?(console.log(e+" is empty, did you forget to add this to main.mako?"),t):!("false"===(t=(t=Number.isNaN(t)?t.toLowerCase():t.toString()).toLowerCase())||"none"===t||"0"===t)}function isMeta(e,t){return new RegExp(t.length>1?t.join("|"):t).test($('meta[data-var="'+e+'"]').data("content"))}function notifyModal(e){$("#site-notification-modal .modal-body").html(e),$("#site-notification-modal").modal()}function addSiteMessage(e,t,o){e=e||"danger",t=t||"",o=o||"",$.post(scRoot+"/ui/set_site_message",{level:e,tag:t,message:o},e=>{const t=$("#site-messages");if(void 0!==t){t.empty();for(const o in e)({}).hasOwnProperty.call(e,o)&&t.append('<div class="alert alert-'+e[o].level+' upgrade-notification hidden-print" id="site-message-'+o+'" role="alert"><span>'+e[o].message+'</span><span class="glyphicon glyphicon-check site-message-dismiss pull-right" data-id="'+o+'"/></div>')}}),$("#site-messages").on("click",".site-message-dismiss",function(){const e=$(this).data("id");$("#site-message-"+e).hide(),$.post(scRoot+"/ui/dismiss-site-message",{index:e})})}function shiftReturn(e){return e.length<=1?[]:(e.shift(),e)}const __=_;window._=function(e){return e};const SICKCHILL={common:{init(){!function(){const e=document.querySelectorAll("img");for(const t of e)t.getAttribute("data-src")&&t.setAttribute("src",t.getAttribute("data-src"));metaToBool("settings.SICKCHILL_BACKGROUND")&&($.backstretch(scRoot+"/ui/sickchill_background"),$(".backstretch").css("opacity",getMeta("settings.FANART_BACKGROUND_OPACITY")).fadeIn("500"))}(),addSiteMessage(),$.confirm.options={confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm(e){location.href=e.context.href}},$("a.shutdown").confirm({title:"Shutdown",text:"Are you sure you want to shutdown SickChill?"}),$("a.restart").confirm({title:"Restart",text:"Are you sure you want to restart SickChill?"}),$("a.removeshow").confirm({title:"Remove Show",text:'Are you sure you want to remove <span class="footerhighlight">'+$("#showtitle").data("showname")+'</span> from the database?<br><br><input type="checkbox" id="deleteFiles" name="deleteFiles"/>&nbsp;<label for="deleteFiles" class="red-text">Check to delete files as well. IRREVERSIBLE</label>',confirm(e){location.href=e.context.href+($("#deleteFiles")[0].checked?"&full=1":"")}}),$("a.clearhistory").confirm({title:"Clear History",text:"Are you sure you want to clear all download history?"}),$("a.trimhistory").confirm({title:"Trim History",text:"Are you sure you want to trim all download history older than 30 days?"}),$("a.submiterrors").confirm({title:"Submit Errors",text:'Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SickChill is updated and trigger<br> this error with debug enabled before submitting</span>'}),$("#config-components").tabs({activate(e,t){let o=$(this).data("lastOpenedPanel");o||(o=$(t.oldPanel)),$(this).data("topPositionTab")||$(this).data("topPositionTab",$(t.newPanel).position().top),$(t.newPanel).hide().fadeIn(0),o&&o.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")}),$(this).data("lastOpenedPanel",$(t.newPanel))}}),(navigator.maxTouchPoints||0)<2&&$(".dropdown-toggle").on("click",function(){const e=$(this);"true"===e.attr("aria-expanded")&&(window.location.href=e.attr("href"))}),metaToBool("settings.FUZZY_DATING")&&($.timeago.settings.allowFuture=!0,$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},$("[datetime]").timeago()),$(document.body).on("click","a[data-no-redirect]",e=>{const t=$(e.currentTarget).preventDefault();return $.get(t.attr("href")),!1}),$(document.body).on("click",".bulkCheck",e=>{const t=$(e.currentTarget),o=t.attr("id");$("."+o+":visible").each(function(){$(this).prop("checked",t.is(":checked"))})}),$(".enabler").each(function(){$(this).is(":checked")||$("#content_"+$(this).attr("id")).hide()}),$(".enabler").on("change",function(){$(this).is(":checked")?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")})},QualityChooser:{setFromPresets(e){0!==Number.parseInt(e,10)?($("#customQuality").hide(),$("#anyQualities").find("option").each(function(){const t=e&$(this).val();$(this).attr("selected",t>0&&"selected")}),$("#bestQualities").find("option").each(function(){const t=e&$(this).val()<<16;$(this).attr("selected",t>0&&"selected")})):$("#customQuality").show()},init(){const e=this,t=$("#qualityPreset");t.on("change",()=>{e.setFromPresets(t.find(":selected").val())}),e.setFromPresets(t.find(":selected").val())}},updateBlackWhiteList(e){$("#white").children().remove(),$("#black").children().remove(),$("#pool").children().remove(),$("#anime").is(":checked")?($("#blackwhitelist").show(),e&&$.getJSON(scRoot+"/home/fetch_releasegroups",{show_name:e},e=>{"success"===e.result&&$.each(e.groups,(e,t)=>{const o=$("<option>");o.attr("value",t.name),o.html(t.name+" | "+t.rating+" | "+t.range),o.appendTo("#pool")})})):$("#blackwhitelist").hide()}},config:{init(){$("#config-components").tabs(),$(".viewIf").on("click",function(){$(this).is(":checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").on("click",function(){let e=$("#date_presets").val();$(this).is(":checked")&&"%x"===e?(e="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).is(":checked")||"1"!==$("#date_use_system_default").html()||(e="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),e&&$("#date_presets").val(e)}),$("#configForm").ajaxForm({beforeSubmit(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after('<span><img src="'+scRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success(){setTimeout(configSuccess,2e3)}}),$("#api_key").on("click",()=>{$("#api_key").select()}),$("#generate_new_apikey").on("click",()=>{$.get(scRoot+"/config/general/generateApiKey",e=>{void 0===e.error?$("#api_key").val(e):notifyModal(e.error)})}),$("#branchCheckout").on("click",()=>{const e=scRoot+"/home/branchCheckout?branch="+$("#branchVersion").val(),t=scRoot+"/home/compare_db_version";$.getJSON(t,t=>{if("success"===t.status)if("downgrade"===t.message)notifyModal("Can't switch branch as this will result in a database downgrade.");else{let o=!0;"upgrade"===t.message&&(o=confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")),o&&(window.location.href=e)}})}),$("#git_token").on("click",$("#git_token").select()),$("#create_access_token").on("click",()=>{notifyModal('<p>Copy the generated token and paste it in the token input box.</p><p>Provide permissions for repo:status, public_repo, write:discussion, read:discussion, user, gist, and notifications</p><p><a href="'+anonURL+'https://github.com/settings/tokens/new?description=SickChill&scopes=user,gist,public_repo" target="_blank"><input class="btn" type="button" value="Continue to Github..."></a></p>'),$("#git_token").select()}),$("#manage_tokens").on("click",()=>{window.open(anonURL+"https://github.com/settings/tokens","_blank")})},index(){$("#sickchill_background_path").fileBrowser({title:_("Select Background Image"),key:"sickchill_background_path",includeFiles:1,fileTypes:["images"]}),$("#custom_css_path").fileBrowser({title:_("Select CSS file"),key:"custom_css_path",includeFiles:1,fileTypes:["css"]});const e=$("#branchVersion"),t=$("#branchVersionLabel"),o=$("#branchCheckout");$.getJSON(scRoot+"/home/fetchRemoteBranches",s=>{if(s.length>0){const i=$("<option></option>");let a=null;for(const t of s)(a=i.clone().text(t.name).attr("value",t.name)).prop("selected",Boolean(t.current)),a.appendTo(e);o.prop("disabled",!1),t.html(_("select branch to use (restart required)"))}else o.prop("disabled",!0),t.html(_("error: No branches found.")).css({color:"#FF0000"})})},backupRestore(){$("#Backup").on("click",()=>{$("#Backup").attr("disabled",!0),$("#Backup-result").html(loading);const e=$("#backupDir").val();$.get(scRoot+"/config/backuprestore/backup",{backupDir:e}).done(e=>{$("#Backup-result").html(e),$("#Backup").attr("disabled",!1)})}),$("#Restore").on("click",()=>{$("#Restore").attr("disabled",!0),$("#Restore-result").html(loading);const e=$("#backupFile").val();$.post(scRoot+"/config/backuprestore/restore",{backupFile:e}).done(e=>{$("#Restore-result").html(e),$("#Restore").attr("disabled",!1)})}),$("#backupDir").fileBrowser({title:_("Select backup folder to save to"),key:"backupPath"}),$("#backupFile").fileBrowser({title:_("Select backup files to restore"),key:"backupFile",includeFiles:1}),$("#config-components").tabs()},notifications(){function e(e){const t={};if(t.api=$("#pushbullet_api").val(),e&&$("#testPushbullet-result").html(loading),!t.api)return $("#testPushbullet-result").html(_("You didn't supply a Pushbullet api key")),$("#pushbullet_api").focus(),!1;$.post(scRoot+"/home/getPushbulletDevices",{api:t.api},o=>{t.devices=$.parseJSON(o).devices,t.currentDevice=$("#pushbullet_device").val(),$("#pushbullet_device_list").html("");for(let e=0;e<t.devices.length;e++)!0===t.devices[e].active&&(t.currentDevice===t.devices[e].iden?$("#pushbullet_device_list").append('<option value="'+t.devices[e].iden+'" selected>'+t.devices[e].nickname+"</option>"):$("#pushbullet_device_list").append('<option value="'+t.devices[e].iden+'">'+t.devices[e].nickname+"</option>"));$("#pushbullet_device_list").prepend('<option value="" '+(""===t.currentDevice?"selected":"")+">All devices</option>"),e&&$("#testPushbullet-result").html(e)}),$("#pushbullet_device_list").on("change",()=>{$("#pushbullet_device").val($("#pushbullet_device_list").val()),$("#testPushbullet-result").html(_("Don't forget to save your new pushbullet settings."))}),$.post(scRoot+"/home/getPushbulletChannels",{api:t.api},o=>{if(t.channels=$.parseJSON(o).channels,t.currentChannel=$("#pushbullet_channel").val(),$("#pushbullet_channel_list").html(""),t.channels.length>0){for(let e=0;e<t.channels.length;e++)!0===t.channels[e].active?$("#pushbullet_channel_list").append('<option value="'+t.channels[e].tag+'" selected>'+t.channels[e].name+"</option>"):$("#pushbullet_channel_list").append('<option value="'+t.channels[e].tag+'">'+t.channels[e].name+"</option>");$("#pushbullet_channel_list").prepend('<option value="" '+(t.currentChannel?"selected":"")+">No Channel</option>"),$("#pushbullet_channel_list").prop("disabled",!1)}else $("#pushbullet_channel_list").prepend("<option value>No Channels</option>"),$("#pushbullet_channel_list").prop("disabled",!0);e&&$("#testPushbullet-result").html(e),$("#pushbullet_channel_list").on("change",()=>{$("#pushbullet_channel").val($("#pushbullet_channel_list").val()),$("#testPushbullet-result").html(_("Don't forget to save your new pushbullet settings."))})})}function t(){$.getJSON(scRoot+"/home/loadShowNotifyLists",e=>{if(0===e._size)return;const t=[];for(const o in e)({}).hasOwnProperty.call(e,o)&&"_"!==o.charAt(0)&&t.push(e[o]);const o=t.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);let s='<option value="-1">-- Select --</option>';for(const e in o)({}).hasOwnProperty.call(o,e)&&o[e].id&&o[e].name&&(s+='<option value="'+o[e].id+'">'+$("<div>").text(o[e].name).html()+"</option>");$("#email_show").html(s),$("#email_show_list").val(""),$("#prowl_show").html(s),$("#prowl_show_list").val("")})}$("#testGrowl").on("click",function(){const e={};if(e.host=$.trim($("#growl_host").val()),e.password=$.trim($("#growl_password").val()),!e.host)return $("#testGrowl-result").html(_("Please fill out the necessary fields above.")),void $("#growl_host").addClass("warning");$("#growl_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testGrowl-result").html(loading),$.get(scRoot+"/home/testGrowl",{host:e.host,password:e.password}).done(e=>{$("#testGrowl-result").html(e),$("#testGrowl").prop("disabled",!1)})}),$("#testProwl").on("click",function(){const e={};if(e.api=$.trim($("#prowl_api").val()),e.priority=$("#prowl_priority").val(),!e.api)return $("#testProwl-result").html(_("Please fill out the necessary fields above.")),void $("#prowl_api").addClass("warning");$("#prowl_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testProwl-result").html(loading),$.get(scRoot+"/home/testProwl",{prowl_api:e.api,prowl_priority:e.priority}).done(e=>{$("#testProwl-result").html(e),$("#testProwl").prop("disabled",!1)})}),$("#testKODI").on("click",function(){const e={};if(e.host=$.trim($("#kodi_host").val()),e.username=$.trim($("#kodi_username").val()),e.password=$.trim($("#kodi_password").val()),!e.host)return $("#testKODI-result").html(_("Please fill out the necessary fields above.")),void $("#kodi_host").addClass("warning");$("#kodi_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testKODI-result").html(loading),$.get(scRoot+"/home/testKODI",{host:e.host,username:e.username,password:e.password}).done(e=>{$("#testKODI-result").html(e),$("#testKODI").prop("disabled",!1)})}),$("#testPHT").on("click",function(){const e={client:{}};if(e.client.host=$.trim($("#plex_client_host").val()),e.client.username=$.trim($("#plex_client_username").val()),e.client.password=$.trim($("#plex_client_password").val()),!e.client.host)return $("#testPHT-result").html(_("Please fill out the necessary fields above.")),void $("#plex_client_host").addClass("warning");$("#plex_client_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPHT-result").html(loading),$.get(scRoot+"/home/testPHT",{host:e.client.host,username:e.client.username,password:e.client.password}).done(e=>{$("#testPHT-result").html(e),$("#testPHT").prop("disabled",!1)})}),$("#testPMS").on("click",function(){const e={server:{}};if(e.server.host=$.trim($("#plex_server_host").val()),e.server.username=$.trim($("#plex_server_username").val()),e.server.password=$.trim($("#plex_server_password").val()),e.server.token=$.trim($("#plex_server_token").val()),!e.server.host)return $("#testPMS-result").html(_("Please fill out the necessary fields above.")),void $("#plex_server_host").addClass("warning");$("#plex_server_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMS-result").html(loading),$.get(scRoot+"/home/testPMS",{host:e.server.host,username:e.server.username,password:e.server.password,plex_server_token:e.server.token}).done(e=>{$("#testPMS-result").html(e),$("#testPMS").prop("disabled",!1)})}),$("#testEMBY").on("click",function(){const e={};if(e.host=$("#emby_host").val(),e.apikey=$("#emby_apikey").val(),!e.host||!e.apikey)return $("#testEMBY-result").html(_("Please fill out the necessary fields above.")),e.host?$("#emby_host").removeClass("warning"):$("#emby_host").addClass("warning"),void(e.apikey?$("#emby_apikey").removeClass("warning"):$("#emby_apikey").addClass("warning"));$("#emby_host,#emby_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testEMBY-result").html(loading),$.get(scRoot+"/home/testEMBY",{host:e.host,emby_apikey:e.apikey}).done(e=>{$("#testEMBY-result").html(e),$("#testEMBY").prop("disabled",!1)})}),$("#testBoxcar2").on("click",function(){const e={};if(e.accesstoken=$.trim($("#boxcar2_accesstoken").val()),!e.accesstoken)return $("#testBoxcar2-result").html(_("Please fill out the necessary fields above.")),void $("#boxcar2_accesstoken").addClass("warning");$("#boxcar2_accesstoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar2-result").html(loading),$.get(scRoot+"/home/testBoxcar2",{accesstoken:e.accesstoken}).done(e=>{$("#testBoxcar2-result").html(e),$("#testBoxcar2").prop("disabled",!1)})}),$("#testPushover").on("click",function(){const e={};if(e.userkey=$("#pushover_userkey").val(),e.apikey=$("#pushover_apikey").val(),!e.userkey||!e.apikey)return $("#testPushover-result").html(_("Please fill out the necessary fields above.")),e.userkey?$("#pushover_userkey").removeClass("warning"):$("#pushover_userkey").addClass("warning"),void(e.apikey?$("#pushover_apikey").removeClass("warning"):$("#pushover_apikey").addClass("warning"));$("#pushover_userkey,#pushover_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushover-result").html(loading),$.get(scRoot+"/home/testPushover",{userKey:e.userkey,apiKey:e.apikey}).done(e=>{$("#testPushover-result").html(e),$("#testPushover").prop("disabled",!1)})}),$("#testLibnotify").on("click",()=>{$("#testLibnotify-result").html(loading),$.get(scRoot+"/home/testLibnotify",e=>{$("#testLibnotify-result").html(e)})}),$("#twitterStep1").on("click",()=>{$("#testTwitter-result").html(loading),$.get(scRoot+"/home/twitterStep1",e=>{window.open(e)}).done(()=>{$("#testTwitter-result").html(_("<b>Step 1:</b> Confirm Authorization"))})}),$("#twitterStep2").on("click",()=>{const e={};if(e.key=$.trim($("#twitter_key").val()),!e.key)return $("#testTwitter-result").html(_("Please fill out the necessary fields above.")),void $("#twitter_key").addClass("warning");$("#twitter_key").removeClass("warning"),$("#testTwitter-result").html(loading),$.get(scRoot+"/home/twitterStep2",{key:e.key},e=>{$("#testTwitter-result").html(e)})}),$("#testTwitter").on("click",()=>{$.post(scRoot+"/home/testTwitter",e=>{$("#testTwitter-result").html(e)})}),$("#testTwilio").on("click",()=>{$("#testTwilio").addClass("disabled"),$.post(scRoot+"/home/testTwilio",e=>{$("#testTwilio-result").html(e)}).always(()=>{$("#testTwilio").removeClass("disabled")})}),$("#testSlack").on("click",()=>{$.post(scRoot+"/home/testSlack",e=>{$("#testSlack-result").html(e)})}),$("#testRocketChat").on("click",()=>{$.post(scRoot+"/home/testRocketChat",e=>{$("#testRocketChat-result").html(e)})}),$("#testMatrix").on("click",()=>{$.post(scRoot+"/home/testMatrix",e=>{$("#testMatrix-result").html(e)})}),$("#testDiscord").on("click",()=>{$.get(scRoot+"/home/testDiscord",e=>{$("#testDiscord-result").html(e)})}),$("#settingsNMJ").on("click",()=>{const e={};if(!$("#nmj_host").val())return $("#nmj_host").focus(),void notifyModal("Please fill in the Popcorn IP address");$("#testNMJ-result").html(loading),e.host=$("#nmj_host").val(),$.post(scRoot+"/home/settingsNMJ",{host:e.host},e=>{null===e&&($("#nmj_database").removeAttr("readonly"),$("#nmj_mount").removeAttr("readonly"));const t=$.parseJSON(e);$("#testNMJ-result").html(t.message),$("#nmj_database").val(t.database),$("#nmj_mount").val(t.mount),t.database?$("#nmj_database").attr("readonly",!0):$("#nmj_database").removeAttr("readonly"),t.mount?$("#nmj_mount").attr("readonly",!0):$("#nmj_mount").removeAttr("readonly")})}),$("#testNMJ").on("click",function(){const e={};if(e.host=$.trim($("#nmj_host").val()),e.database=$("#nmj_database").val(),e.mount=$("#nmj_mount").val(),!e.host)return $("#testNMJ-result").html(_("Please fill out the necessary fields above.")),void $("#nmj_host").addClass("warning");$("#nmj_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJ-result").html(loading),$.post(scRoot+"/home/testNMJ",{host:e.host,database:e.database,mount:e.mount}).done(e=>{$("#testNMJ-result").html(e),$("#testNMJ").prop("disabled",!1)})}),$("#settingsNMJv2").on("click",()=>{const e={};if(!$("#nmjv2_host").val())return $("#nmjv2_host").focus(),void notifyModal("Please fill in the Popcorn IP address","modal");$("#testNMJv2-result").html(loading),e.host=$("#nmjv2_host").val(),e.dbloc="";const t=document.getElementsByName("nmjv2_dbloc");for(const o of t)if(o.checked){e.dbloc=o.value;break}e.dbinstance=$("#NMJv2db_instance").val(),$.post(scRoot+"/home/settingsNMJv2",{host:e.host,dbloc:e.dbloc,instance:e.dbinstance},e=>{null===e&&$("#nmjv2_database").removeAttr("readonly");const t=$.parseJSON(e);$("#testNMJv2-result").html(t.message),$("#nmjv2_database").val(t.database),t.database?$("#nmjv2_database").attr("readonly",!0):$("#nmjv2_database").removeAttr("readonly")})}),$("#testNMJv2").on("click",function(){const e={};if(e.host=$.trim($("#nmjv2_host").val()),!e.host)return $("#testNMJv2-result").html(_("Please fill out the necessary fields above.")),void $("#nmjv2_host").addClass("warning");$("#nmjv2_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJv2-result").html(loading),$.post(scRoot+"/home/testNMJv2",{host:e.host}).done(e=>{$("#testNMJv2-result").html(e),$("#testNMJv2").prop("disabled",!1)})}),$("#testFreeMobile").on("click",function(){const e={};if(e.id=$.trim($("#freemobile_id").val()),e.apikey=$.trim($("#freemobile_apikey").val()),!e.id||!e.apikey)return $("#testFreeMobile-result").html(_("Please fill out the necessary fields above.")),e.id?$("#freemobile_id").removeClass("warning"):$("#freemobile_id").addClass("warning"),void(e.apikey?$("#freemobile_apikey").removeClass("warning"):$("#freemobile_apikey").addClass("warning"));$("#freemobile_id,#freemobile_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testFreeMobile-result").html(loading),$.post(scRoot+"/home/testFreeMobile",{freemobile_id:e.id,freemobile_apikey:e.apikey}).done(e=>{$("#testFreeMobile-result").html(e),$("#testFreeMobile").prop("disabled",!1)})}),$("#testTelegram").on("click",function(){const e={};if(e.id=$.trim($("#telegram_id").val()),e.apikey=$.trim($("#telegram_apikey").val()),!e.id||!e.apikey)return $("#testTelegram-result").html(_("Please fill out the necessary fields above.")),e.id?$("#telegram_id").removeClass("warning"):$("#telegram_id").addClass("warning"),void(e.apikey?$("#telegram_apikey").removeClass("warning"):$("#telegram_apikey").addClass("warning"));$("#telegram_id,#telegram_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testTelegram-result").html(loading),$.post(scRoot+"/home/testTelegram",{telegram_id:e.id,telegram_apikey:e.apikey}).done(e=>{$("#testTelegram-result").html(e),$("#testTelegram").prop("disabled",!1)})}),$("#testJoin").on("click",function(){const e={};if(e.id=$.trim($("#join_id").val()),e.apikey=$.trim($("#join_apikey").val()),!e.id||!e.apikey)return $("#testJoin-result").html(_("Please fill out the necessary fields above.")),e.id?$("#join_id").removeClass("warning"):$("#join_id").addClass("warning"),void(e.apikey?$("#join_apikey").removeClass("warning"):$("#join_apikey").addClass("warning"));$("#join_id,#join_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testJoin-result").html(loading),$.post(scRoot+"/home/testJoin",{join_id:e.id,join_apikey:e.apikey}).done(e=>{$("#testJoin-result").html(e),$("#testJoin").prop("disabled",!1)})}),$("#TraktGetPin").on("click",()=>{window.open($("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),$("#trakt_pin").removeClass("hide")}),$("#trakt_pin").on("keyup change",()=>{0===$("#trakt_pin").val().length?($("#TraktGetPin").removeClass("hide"),$("#authTrakt").addClass("hide")):($("#TraktGetPin").addClass("hide"),$("#authTrakt").removeClass("hide"))}),$("#authTrakt").on("click",()=>{const e={};e.pin=$("#trakt_pin").val(),0!==e.pin.length&&$.post(scRoot+"/home/getTraktToken",{trakt_pin:e.pin}).done(e=>{$("#testTrakt-result").html(e),$("#authTrakt").addClass("hide"),$("#trakt_pin").addClass("hide"),$("#TraktGetPin").addClass("hide")})}),$("#testTrakt").on("click",function(){const e={};return e.username=$.trim($("#trakt_username").val()),e.trendingBlacklist=$.trim($("#trakt_blacklist_name").val()),e.username?/\s/g.test(e.trendingBlacklist)?($("#testTrakt-result").html(_("Check blacklist name; the value needs to be a trakt slug")),void $("#trakt_blacklist_name").addClass("warning")):($("#trakt_username").removeClass("warning"),$("#trakt_blacklist_name").removeClass("warning"),$(this).prop("disabled",!0),$("#testTrakt-result").html(loading),void $.post(scRoot+"/home/testTrakt",{username:e.username,blacklist_name:e.trendingBlacklist}).done(e=>{$("#testTrakt-result").html(e),$("#testTrakt").prop("disabled",!1)})):($("#testTrakt-result").html(_("Please fill out the necessary fields above.")),void(e.username?$("#trakt_username").removeClass("warning"):$("#trakt_username").addClass("warning")))}),$("#testEmail").on("click",()=>{const e=$("#testEmail-result");e.html(loading);const t=$("#email_host").val().length>0?$("#email_host").val():null,o=$("#email_port").val().length>0?$("#email_port").val():null,s=$("#email_tls").is(":checked")?1:0,i=$("#email_from").val().length>0?$("#email_from").val():"root@localhost",a=$("#email_user").val().trim(),n=$("#email_password").val();let r="",l="";null===t&&(r+='<li style="color: red;">You must specify an SMTP hostname!</li>'),null===o?r+='<li style="color: red;">You must specify an SMTP port!</li>':(null===o.match(/^\d+$/)||Number.parseInt(o,10)>65535)&&(r+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'),r.length>0?(r="<ol>"+r+"</ol>",e.html(r)):null===(l=prompt("Enter an email address to send the test to:",null))||0===l.length||null===l.match(/.*@.*/)?e.html('<p style="color: red;">'+_("You must provide a recipient email address!")+"</p>"):$.post(scRoot+"/home/testEmail",{host:t,port:o,smtp_from:i,use_tls:s,user:a,pwd:n,to:l},e=>{$("#testEmail-result").html(e)})}),$("#testPushalot").on("click",function(){const e={};if(e.authToken=$.trim($("#pushalot_authorizationtoken").val()),!e.authToken)return $("#testPushalot-result").html(_("Please fill out the necessary fields above.")),void $("#pushalot_authorizationtoken").addClass("warning");$("#pushalot_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushalot-result").html(loading),$.post(scRoot+"/home/testPushalot",{authorizationToken:e.authToken}).done(e=>{$("#testPushalot-result").html(e),$("#testPushalot").prop("disabled",!1)})}),$("#testPushbullet").on("click",function(){const e={};if(e.api=$.trim($("#pushbullet_api").val()),!e.api)return $("#testPushbullet-result").html(_("Please fill out the necessary fields above.")),void $("#pushbullet_api").addClass("warning");$("#pushbullet_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushbullet-result").html(loading),$.post(scRoot+"/home/testPushbullet",{api:e.api}).done(e=>{$("#testPushbullet-result").html(e),$("#testPushbullet").prop("disabled",!1)})}),$("#getPushbulletDevices").on("click",()=>{e("Device list updated. Please choose a device to push to.")}),e(),$("#email_show").on("change",()=>{const e=Number.parseInt($("#email_show").val(),10);$.getJSON(scRoot+"/home/loadShowNotifyLists",t=>{t._size>0&&$("#email_show_list").val(e>=0?t[e.toString()].list:"")})}),$("#prowl_show").on("change",()=>{const e=Number.parseInt($("#prowl_show").val(),10);$.getJSON(scRoot+"/home/loadShowNotifyLists",t=>{t._size>0&&$("#prowl_show_list").val(e>=0?t[e.toString()].prowl_notify_list:"")})}),t(),$("#email_show").on("notify",()=>{t()}),$("#prowl_show").on("notify",()=>{t()}),$("#email_show_save").on("click",()=>{$.post(scRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},()=>{t()})}),$("#prowl_show_save").on("click",()=>{$.post(scRoot+"/home/saveShowNotifyList",{show:$("#prowl_show").val(),prowlAPIs:$("#prowl_show_list").val()},()=>{t()})}),$("#use_plex_server").on("click",function(){$(this).is(":checked")?$(".plexinfo").removeClass("hide"):$(".plexinfo").addClass("hide")})},postProcessing(){$("#config-components").tabs(),$("#tv_download_dir").fileBrowser({title:_("Select TV Download Directory")}),$("#unpack_dir").fileBrowser({title:_("Select Unpack Directory")});const e=function(){let e=0;return function(t,o){clearTimeout(e),e=setTimeout(t,o)}}();function t(){const e={};e.pattern=$("#naming_pattern").val(),e.multi=$("#naming_multi_ep :selected").val(),e.animeType=$('input[name="naming_anime"]:checked').val(),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern},e=>{e?($("#naming_example").text(e+".ext"),$("#naming_example_div").show()):$("#naming_example_div").hide()}),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern,multi:e.multi},e=>{e?($("#naming_example_multi").text(e+".ext"),$("#naming_example_multi_div").show()):$("#naming_example_multi_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e.pattern,multi:e.multi},e=>{let t;"invalid"===e?(t=_("This pattern is invalid."),$("#naming_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):(t=_("This pattern is valid."),$("#naming_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF")),$("#naming_pattern").attr("title",t)})}function o(){const e=$("#naming_abd_pattern").val();$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e,abd:"True"},e=>{e?($("#naming_abd_example").text(e+".ext"),$("#naming_abd_example_div").show()):$("#naming_abd_example_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e,abd:"True"},e=>{let t;"invalid"===e?(t=_("This pattern is invalid."),$("#naming_abd_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_abd_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFFFDD")):(t=_("This pattern is valid."),$("#naming_abd_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_abd_pattern").qtip("toggle",!1),$("#naming_abd_pattern").css("background-color","#FFFFFF")),$("#naming_abd_pattern").attr("title",t)})}function s(){const e=$("#naming_sports_pattern").val();$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e,sports:"True"},e=>{e?($("#naming_sports_example").text(e+".ext"),$("#naming_sports_example_div").show()):$("#naming_sports_example_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e,sports:"True"},e=>{let t;"invalid"===e?(t=_("This pattern is invalid."),$("#naming_sports_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_sports_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFFFDD")):(t=_("This pattern is valid."),$("#naming_sports_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_sports_pattern").qtip("toggle",!1),$("#naming_sports_pattern").css("background-color","#FFFFFF")),$("#naming_sports_pattern").attr("title",t)})}function i(){const e={};e.pattern=$("#naming_anime_pattern").val(),e.multi=$("#naming_anime_multi_ep :selected").val(),e.animeType=$('input[name="naming_anime"]:checked').val(),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern,anime_type:e.animeType},e=>{e?($("#naming_example_anime").text(e+".ext"),$("#naming_example_anime_div").show()):$("#naming_example_anime_div").hide()}),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern,multi:e.multi,anime_type:e.animeType},e=>{e?($("#naming_example_multi_anime").text(e+".ext"),$("#naming_example_multi_anime_div").show()):$("#naming_example_multi_anime_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e.pattern,multi:e.multi,anime_type:e.animeType},e=>{let t;const o=$("#naming_anime_pattern");"invalid"===e?(t=_("This pattern is invalid."),o.qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),o.qtip("toggle",!0),o.css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),o.qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),o.qtip("toggle",!0),o.css("background-color","#FFFFDD")):(t=_("This pattern is valid."),o.qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),o.qtip("toggle",!1),o.css("background-color","#FFFFFF")),o.attr("title",t)})}function a(){"custom..."===$("#name_presets :selected").val().toLowerCase()?$("#naming_custom").show():($("#naming_custom").hide(),$("#naming_pattern").val($("#name_presets :selected").attr("id"))),t()}function n(){"custom..."===$("#name_abd_presets :selected").val().toLowerCase()?$("#naming_abd_custom").show():($("#naming_abd_custom").hide(),$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))),o()}function r(){"custom..."===$("#name_sports_presets :selected").val().toLowerCase()?$("#naming_sports_custom").show():($("#naming_sports_custom").hide(),$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))),s()}function l(){"custom..."===$("#name_anime_presets :selected").val().toLowerCase()?$("#naming_anime_custom").show():($("#naming_anime_custom").hide(),$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))),i()}1!==Number.parseInt($("#unpack").val(),10)&&$("#content_unpack").hide(),$("#unpack").on("change",function(){const e=Number.parseInt(this.value,10);2!==e&&0!==e||($("#content_unpack").fadeOut("fast","linear"),$("#unpack").qtip("toggle",!1)),1===e&&($("#content_unpack").fadeIn("fast","linear"),$.post(scRoot+"/config/postProcessing/isRarSupported",e=>{"supported"!==e&&($("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#unpack").qtip("toggle",!0),$("#unpack").css("background-color","#FFFFDD"))}))}),$("#name_presets").on("change",a),$("#name_abd_presets").on("change",n),$("#naming_custom_abd").on("change",n),$("#name_sports_presets").on("change",r),$("#naming_custom_sports").on("change",r),$("#name_anime_presets").on("change",l),$("#naming_custom_anime").on("change",l),$('input[name="naming_anime"]').on("click",l),$("#naming_multi_ep").on("change",t),$("#naming_pattern").on("focusout",t),$("#naming_pattern").on("keyup",()=>{e(t,500)}),$("#naming_anime_multi_ep").on("change",i),$("#naming_anime_pattern").on("focusout",i),$("#naming_anime_pattern").on("keyup",()=>{e(i,500)}),$("#naming_abd_pattern").on("focusout",t),$("#naming_abd_pattern").on("keyup",()=>{e(o,500)}),$("#naming_sports_pattern").on("focusout",t),$("#naming_sports_pattern").on("keyup",()=>{e(s,500)}),$("#naming_anime_pattern").on("focusout",t),$("#naming_anime_pattern").on("keyup",()=>{e(i,500)}),$("#show_naming_key").on("click",()=>{$("#naming_key").toggle()}),$("#show_naming_abd_key").on("click",()=>{$("#naming_abd_key").toggle()}),$("#show_naming_sports_key").on("click",()=>{$("#naming_sports_key").toggle()}),$("#show_naming_anime_key").on("click",()=>{$("#naming_anime_key").toggle()}),$("#do_custom").on("click",()=>{$("#naming_pattern").val($("#name_presets :selected").attr("id")),$("#naming_custom").show(),$("#naming_pattern").focus()}),a(),n(),r(),l(),$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()}),$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){const e=$(this).attr("id");$("#metadataType :selected").val()===e?$(this).show():$(this).hide()})},$(this).showHideMetadata(),$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(!1)}),$.fn.refreshMetadataConfig=function(e){let t=0,o="";$(".metadataDiv").each(function(){const e=$(this).attr("id"),s=[],i=$("#"+e+"_show_metadata").is(":checked"),a=$("#"+e+"_episode_metadata").is(":checked"),n=$("#"+e+"_fanart").is(":checked"),r=$("#"+e+"_poster").is(":checked"),l=$("#"+e+"_banner").is(":checked"),c=$("#"+e+"_episode_thumbnails").is(":checked"),d=$("#"+e+"_season_posters").is(":checked"),h=$("#"+e+"_season_banners").is(":checked"),p=$("#"+e+"_season_all_poster").is(":checked"),u=$("#"+e+"_season_all_banner").is(":checked");s.push(i?"1":"0"),s.push(a?"1":"0"),s.push(n?"1":"0"),s.push(r?"1":"0"),s.push(l?"1":"0"),s.push(c?"1":"0"),s.push(d?"1":"0"),s.push(h?"1":"0"),s.push(p?"1":"0"),s.push(u?"1":"0");let m=0;for(const e of s)m+=Number.parseInt(e,10);m>t&&(t=m,o=e),$("#"+e+"_eg_show_metadata").attr("class",i?"enabled":"disabled"),$("#"+e+"_eg_episode_metadata").attr("class",a?"enabled":"disabled"),$("#"+e+"_eg_fanart").attr("class",n?"enabled":"disabled"),$("#"+e+"_eg_poster").attr("class",r?"enabled":"disabled"),$("#"+e+"_eg_banner").attr("class",l?"enabled":"disabled"),$("#"+e+"_eg_episode_thumbnails").attr("class",c?"enabled":"disabled"),$("#"+e+"_eg_season_posters").attr("class",d?"enabled":"disabled"),$("#"+e+"_eg_season_banners").attr("class",h?"enabled":"disabled"),$("#"+e+"_eg_season_all_poster").attr("class",p?"enabled":"disabled"),$("#"+e+"_eg_season_all_banner").attr("class",u?"enabled":"disabled"),$("#"+e+"_data").val(s.join("|"))}),""!==o&&e&&($("#metadataType option[value="+o+"]").attr("selected","selected"),$(this).showHideMetadata())},$(this).refreshMetadataConfig(!0),$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search(){$("#config-components").tabs(),$("#nzb_dir").fileBrowser({title:_("Select .nzb black hole/watch location")}),$("#torrent_dir").fileBrowser({title:_("Select torrent black hole/watch location")}),$("#torrent_path").fileBrowser({title:_("Select torrent download location")}),$("#torrent_path_incomplete").fileBrowser({title:_("Select torrent incomplete download location")}),$.fn.nzbMethodHandler=function(){const e=$("#nzb_method :selected").val();$("#nzb_method_icon").removeClass((e,t)=>(t.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")),$("#nzb_method_icon").addClass("add-client-icon-"+e.replace("_","-")),$("#blackhole_settings").hide(),$("#sabnzbd_settings").hide(),$("#testSABnzbd").hide(),$("#testSABnzbd_result").hide(),$("#nzbget_settings").hide(),$("#download_station_settings").hide(),$("#testDSM").hide(),$("#testDSM_result").hide(),"blackhole"===e.toLowerCase()?$("#blackhole_settings").show():"nzbget"===e.toLowerCase()?$("#nzbget_settings").show():"download_station"===e.toLowerCase()?($("#host_title").text("Synology host:port"),$("#username_title").text("Synology Username"),$("#password_title").text("Synology Password"),$("#download_station_settings").show(),$("#testDSM").show(),$("#testDSM_result").show()):($("#sabnzbd_settings").show(),$("#testSABnzbd").show(),$("#testSABnzbd_result").show())},$.torrentMethodHandler=(()=>{$("#options_torrent_clients").hide(),$("#options_torrent_blackhole").hide();const e=$("#torrent_method :selected").val();let t="#options_torrent_blackhole",o="";$("#torrent_method_icon").removeClass((e,t)=>(t.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")),$("#torrent_method_icon").addClass("add-client-icon-"+e.replace("_","-")),"blackhole"!==e.toLowerCase()&&($("#torrent_host_option").show(),$("#host_desc_torrent").show(),$("#torrent_rpcurl_option").hide(),$("#torrent_auth_type_option").hide(),$("#torrent_verify_cert_option").hide(),$('label[for="torrent_verify_cert"]').text(_("verify SSL certificates for HTTPS requests")),$("#username_title.component-title").text(_("Client username")),$("#torrent_username_option").show(),$("#password_title.component-title").text(_("Client password")),$("#torrent_password_option").show(),$('label[for="torrent_password"]').text(_("(blank for none)")),$("#torrent_path_option").show(),$("#torrent_path_option").find(".fileBrowser").show(),$("#torrent_path_incomplete_option").hide(),$("#path_synology").hide(),$("#torrent_seed_time_option").hide(),$("#torrent_high_bandwidth_option").hide(),$("#torrent_paused_option").show(),$("#torrent_label_option").show(),$("#label_warning_deluge").hide(),$("#label_anime_warning_deluge").hide(),$("#test_torrent_result").text(_("Click below to test")),"utorrent"===e.toLowerCase()?(o="uTorrent",$("#torrent_path_option").hide(),$("#torrent_seed_time_label").text(_("Minimum seeding time is")),$("#torrent_seed_time_option").show(),$("#host_desc_torrent").text(_("URL to your uTorrent client (e.g. http://localhost:8000)"))):"transmission"===e.toLowerCase()?(o="Transmission",$("#torrent_seed_time_label").text(_("Stop seeding when inactive for")),$("#torrent_seed_time_option").show(),$("#torrent_high_bandwidth_option").show(),$("#torrent_path_incomplete_option").show(),$("#torrent_label_option").hide(),$("#torrent_rpcurl_option").show(),$("#host_desc_torrent").text(_("URL to your Transmission client (e.g. http://localhost:9091)"))):e.toLowerCase().startsWith("deluge")?($("#torrent_verify_cert_option").show(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_path_incomplete_option").show(),"deluged"===e.toLowerCase()?(o="Deluge Daemon",$("#torrent_username_option").show(),$("#host_desc_torrent").text(_("IP or Hostname of your Deluge Daemon (e.g. http://localhost:58846)"))):(o="Deluge",$("#torrent_username").prop("value",""),$("#torrent_username_option").hide(),$("#host_desc_torrent").text(_("URL to your Deluge client (e.g. http://localhost:8112)"))),$('label[for="torrent_verify_cert"]').text(_('disable if you get "Deluge: Authentication Error" in your log'))):"download_station"===e.toLowerCase()?(o="Synology DS",$("#torrent_label_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_path_option").find(".fileBrowser").hide(),$("#host_desc_torrent").text(_("URL to your Synology DS client (e.g. http://localhost:5000)")),$("#path_synology").show()):"rtorrent"===e.toLowerCase()?(o="rTorrent",$("#host_desc_torrent").html(_("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)")),$("#torrent_verify_cert_option").show(),$("#torrent_auth_type_option").show()):"qbittorrent"===e.toLowerCase()?(o="qBittorrent",$("#torrent_path_option").hide(),$("#label_warning_qbittorrent").show(),$("#label_anime_warning_qbittorrent").show(),$("#torrent_verify_cert_option").show(),$("#host_desc_torrent").text(_("URL to your qBittorrent client (e.g. http://localhost:8080)"))):"mlnet"===e.toLowerCase()?(o="mlnet",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_paused_option").hide(),$("#host_desc_torrent").text(_("URL to your MLDonkey (e.g. http://localhost:4080)"))):"putio"===e.toLowerCase()&&(o="putio",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_host_option").hide(),$("#host_desc_torrent").text(_("URL to your putio client (e.g. http://localhost:8080)")),$('label[for="torrent_password"]').html('<a href="'+anonURL+'https://app.put.io/oauth/apps/new" target="_blank">'+_("Create a new OAuth app for put.io")+"</a>"),$("#username_title.component-title").text(_("Put.io Parent Folder")),$("#password_title.component-title").text(_("Put.io OAuth Token"))),$("#host_title").text(o+" host:port"),$("#username_title").text(o+" Username"),$("#password_title").text(o+" Password"),$("#torrent_client").text(o),$("#rpcurl_title").text(o+" RPC URL"),t="#options_torrent_clients"),$(t).show()}),$("#torrent_host").on("input",()=>{if($("#torrent_method :selected").val().toLowerCase().startsWith("rtorrent")){"scgi://"===$("#torrent_host").val().slice(0,7)?($("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#torrent_password_option").hide(),$("#torrent_password").prop("value",""),$("#torrent_auth_type_option").hide(),$("#torrent_auth_type option[value=none]").attr("selected","selected")):($("#torrent_username_option").show(),$("#torrent_password_option").show(),$("#torrent_auth_type_option").show())}}),$("#nzb_method").on("change",$(this).nzbMethodHandler),$(this).nzbMethodHandler(),$("#testSABnzbd").on("click",()=>{const e={};$("#testSABnzbd_result").html(loading),e.host=$("#sab_host").val(),e.username=$("#sab_username").val(),e.password=$("#sab_password").val(),e.apiKey=$("#sab_apikey").val(),$.post(scRoot+"/home/testSABnzbd",{host:e.host,username:e.username,password:e.password,apikey:e.apiKey},e=>{$("#testSABnzbd_result").html(e)})}),$("#testDSM").on("click",()=>{const e={};$("#testDSM_result").html(loading),e.host=$("#syno_dsm_host").val(),e.username=$("#syno_dsm_user").val(),e.password=$("#syno_dsm_pass").val(),$.post(scRoot+"/home/testDSM",{host:e.host,username:e.username,password:e.password},e=>{$("#testDSM_result").html(e)})}),$("#torrent_method").on("change",$.torrentMethodHandler),$.torrentMethodHandler(),$("#test_torrent").on("click",()=>{const e={};$("#test_torrent_result").html(loading),e.method=$("#torrent_method :selected").val(),e.host=$("#torrent_host").val(),e.username=$("#torrent_username").val(),e.password=$("#torrent_password").val(),$.post(scRoot+"/home/testTorrent",{torrent_method:e.method,host:e.host,username:e.username,password:e.password},e=>{$("#test_torrent_result").html(e)})})},subtitles(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){const e=$(this).attr("id");$("#editAService :selected").val()+"Div"===e?$(this).show():$(this).hide()})},$.fn.addService=function(e,t,o,s,i,a){if(null===o.match("/$")&&(o+="/"),0===$("#service_order_list > #"+e).length&&!1!==a){let s="";s+='<li class="ui-state-default" id="'+e+'"> ',s+='<input type="checkbox" id="enable_'+e+'" class="service_enabler" CHECKED> ',s+='<a href="'+anonURL+o+'" class="imgLink" target="_new">',s+='<img src="'+scRoot+'/images/services/newznab.gif" alt="'+t+'" width="16" height="16"></a> ',s+=t+"</li>",$("#service_order_list").append(s),$("#service_order_list").sortable("refresh")}},$.fn.deleteService=function(e){$("#service_order_list > #"+e).remove()},$.fn.refreshServiceList=function(){const e=$("#service_order_list").sortable("toArray"),t=[];$.each(e,(e,o)=>{const s=$("#enable_"+o).is(":checked")?"1":"0";t.push(o+":"+s)}),$("#service_order").val(t.join(" "))},$("#editAService").on("change",function(){$(this).showHideServices()}),$(".service_enabler").on("click",function(){$(this).refreshServiceList()}),$(this).showHideServices(),$("#service_order_list").sortable({placeholder:"ui-state-highlight",update(){$(this).refreshServiceList()},create(){$(this).refreshServiceList()}}),$("#service_order_list").disableSelection()},providers(){console.log("This function need to be filled with ConfigProviders.js but can't be as we've got scope issues currently.")}},home:{init(){$("#showTabs").tabs({activate(){$(".show-grid").isotope("layout")}})},index(){function e(e){let t=0,o=0,s=0,i=0;e<125?(s=3,i=4):e<175?(t=9,o=40,s=4,i=5):(t=11,o=50,s=6,i=6),$("#posterPopup").remove(),void 0===t?$(".show-details").hide():($(".show-details").show(),$(".show-dlstats, .show-quality").css("fontSize",t),$(".show-network-image").css("width",o)),$(".show-container").css({width:e,borderWidth:i,borderRadius:s})}let t;$(".resetsorting").on("click",()=>{$("table").trigger("filterReset")}),$("#filterShowName").on("input",__.debounce(()=>{$(".show-grid").isotope({filter(){return $(this).find(".show-title").html().trim().toLowerCase().includes($("#filterShowName").val().toLowerCase())}})},500)),"undefined"!=typeof Storage&&(t=Number.parseInt(localStorage.getItem("posterSize"),10)),("number"!=typeof t||Number.isNaN(t))&&(t=188),e(t),$("#posterSizeSlider").slider({min:75,max:250,value:t,change(t,o){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",o.value),e(o.value),$(".show-grid").isotope("layout")}}),$("#rootDirSelect").on("change",()=>{$("#rootDirForm").submit()}),$(".progressbar").each(function(){const e=$(this).data("progress-percentage"),t=Math.max(20,e-e%20);$(this).progressbar({value:e}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+t)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()}),$("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0:e=>$(e).find("time").attr("datetime"),1:e=>$(e).find("time").attr("datetime"),2:e=>latinize($(e).text().normalize("NFC")),3:e=>($(e).find("span").prop("title")||"zunknown").toLowerCase(),4:e=>$(e).find("span").text().toLowerCase(),5(e){const t=$(e).find("div").attr("data-progress-sort");let o;return o=void 0===t?Number.NEGATIVE_INFINITY:t.length&&Number.parseFloat(t)||Number.NEGATIVE_INFINITY},6:e=>$(e).data("show-size"),7:e=>($(e).find("span").attr("title")||"No").toLowerCase()},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"digit"},6:{sorter:"digit"},7:{filter:"parsed"}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,stickyHeaders_offset:50,filter_saveFilters:!1,filter_functions:{5(e,t,o){let s=!1;const i=Math.floor(t%1*1e3),a={"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,">":(e,t)=>e>t};if(""===o)s=!0;else{let e=o.match(/(<|<=|>=|>)\s?(\d+)/i);if(e){(0,a[e[1]])(i,Number.parseInt(e[2],10))&&(s=!0)}(e=o.match(/(\d+)\s(-|to)\s+(\d+)/i))&&("-"!==e[2]&&"to"!==e[2]||i>=Number.parseInt(e[1],10)&&i<=Number.parseInt(e[3],10)&&(s=!0)),(e=o.match(/(=)?\s?(\d+)\s?(=)?/i))&&("="!==e[1]&&"="!==e[3]||Number.parseInt(e[2],10)===i&&(s=!0)),!Number.isNaN(Number.parseFloat(o))&&Number.isFinite(o)&&Number.parseInt(o,10)===i&&(s=!0)}return s}},columnSelector_mediaquery:!1},sortStable:!0,sortAppend:[[2,0]]}),$(".show-grid").imagesLoaded(()=>{const e="date"===getMeta("settings.POSTER_SORTBY")?["status","date","name"]:getMeta("settings.POSTER_SORTBY");$(".loading-spinner").hide(),$(".show-grid").show().isotope({itemSelector:".show-container",sortBy:e,sortAscending:getMeta("settings.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:!0},getSortData:{name(e){const t=$(e).attr("data-name")||"";return latinize((metaToBool("settings.SORT_ARTICLE")?t:t.replace(/^((?:the|a|an)\s)/i,"")).toLowerCase().normalize("NFC"))},network:"[data-network]",date(e){const t=$(e).attr("data-date");return t.length&&Number.parseInt(t,10)||Number.POSITIVE_INFINITY},progress(e){const t=$(e).attr("data-progress-sort");return t.length&&Number.parseFloat(t)||Number.NEGATIVE_INFINITY},status:"[data-status]"}});let t=null;$(".show-container").on("mouseenter",function(){const e=$(this);"none"===e.find(".show-details").css("display")&&(t=setTimeout(()=>{t=null,$("#posterPopup").remove();const o=e.clone().attr({id:"posterPopup"}),s=e.offset().left,i=e.offset().top;o.css({position:"absolute",margin:0,top:i,left:s,zIndex:9999}),o.find(".show-details").show(),o.on("mouseleave",function(){$(this).remove()}),o.appendTo("body");let a=(i+e.height())/2-219,n=(s+e.width())/2-125;const r=$(window).scrollTop(),l=$(window).scrollLeft(),c=r+$(window).innerHeight(),d=l+$(window).innerWidth();a<r+5&&(a=r+5),n<l+5&&(n=l+5),a+438+5>c&&(a=c-438-5),n+250+5>d&&(n=d-250-5),o.animate({top:a,left:n,width:250,height:438})},300))}).on("mouseleave",()=>{null!==t&&clearTimeout(t)})}),$("#layout").on("change",function(){window.location.href=$(this).find("option:selected").val()}),$("#postersort").on("change",function(){$(".show-grid").isotope({sortBy:"date"===$(this).val()?["status","date","name"]:$(this).val()}),$.post($(this).find("option:selected").data("sort"))}),$("#postersortdirection").on("change",function(){$(".show-grid").isotope({sortAscending:"true"===$(this).val()}),$.post($(this).find("option:selected").data("sort"))}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$.tablesorter.columnSelector.attachTo($("#showListTableShows"),"#popover-target"),metaToBool("settings.ANIME_SPLIT_HOME")&&$.tablesorter.columnSelector.attachTo($("#showListTableAnime"),"#popover-target")})},displayShow(){if(metaToBool("settings.FANART_BACKGROUND")){const e=getMeta("showBackgroundImage")||scRoot+"/cache/images/"+$("#showID").attr("value")+".fanart.jpg";$.backstretch(e),$(".backstretch").css("opacity",getMeta("settings.FANART_BACKGROUND_OPACITY")).fadeIn("500")}function e(e){e.on("click.disabled",!1),e.prop("enableClick","1"),e.fadeTo("fast",1)}function t(e){e.off("click.disabled"),e.prop("enableClick","0"),e.fadeTo("fast",.5)}$(".displayShowTable").tablesorter({widgets:["saveSort","stickyHeaders","columnSelector"],widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox"/>{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked",stickyHeaders_offset:50}}),$(".displayShowTable").ajaxEpSearch({colorRow:!0}),$(".play-on-kodi").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;const o=$(this),s=$("#playOnKodiModal");return $("#playOnKodiModal .btn.btn-success").on("click",()=>{t(o),s.modal("hide");const i=o.children("img");i.hide(),o.append($("<span/>").attr({class:"loading-spinner16",title:"Playing"}));const a=o.children("span"),n=$("#kodi-play-host").val();return $.getJSON(o.prop("href")+"&host="+n,e=>{"failure"===e.result.toLowerCase()?(a.prop("class","displayshow-icon-disable"),a.prop("title","Failed")):(i.prop("title","Success"),i.prop("alt","Success"),a.hide(),i.show())}),e(o),!1}),s.modal("show"),!1}),$(".epSubtitlesSearch").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;t($(this));const o=$(this).parent().siblings(".col-subtitles"),s=$(this).children("span");return s.prop("class","loading-spinner16"),s.prop("title","Searching"),$.getJSON($(this).attr("href"),function(t){if("failure"!==t.result.toLowerCase()&&"no subtitles downloaded"!==t.result.toLowerCase()){const i=t.subtitles.split(",");o.empty(),$.each(i,(e,t)=>{""!==t&&o.append($("<img/>",{src:scRoot+"/images/subtitles/flags/"+t+".png",alt:t,width:16,height:11}))}),s.prop("class","displayshow-icon-sub"),e($(this))}else s.prop("class","displayshow-icon-disable");s.prop("title",t.result)}),!1}),$(".epRetrySubtitlesSearch").on("click",function(){if("0"===$(this).prop("enableClick"))return!1;const o=$(this),s=$("#confirmSubtitleDownloadModal");return $("#confirmSubtitleDownloadModal .btn.btn-success").on("click",()=>{t(o),s.modal("hide");const i=o.children("img");i.hide(),o.append($("<span/>").attr({class:"loading-spinner16",title:"Searching"}));const a=o.children("span");return $.getJSON(o.prop("href"),e=>{"failure"===e.result.toLowerCase()?(a.prop("class","displayshow-icon-disable"),a.prop("title","Failed")):(i.prop("title","Success"),i.prop("alt","Success"),a.hide(),i.show())}),e(o),!1}),s.modal("show"),!1}),$("#seasonJump").on("change",()=>{const e=$("#seasonJump option:selected"),t=e.val();if(t&&"jump"!==t){const o=e.data("season");$("html,body").animate({scrollTop:$("#"+t.slice(1)).offset().top-50},"slow"),$("#collapseSeason-"+o).collapse("show"),location.hash=t}$(this).val("jump")}),$("#seasonJumpLinks a").on("click",e=>{const t=$(e.target).data("season");return $("html,body").animate({scrollTop:$("#"+t).offset().top-50},"slow"),$("#collapseSeason-"+t).collapse("show"),location.hash=t,!1}),$("#prevShow").on("click",()=>{$("#pickShow option:selected").prev("option").prop("selected","selected"),$("#pickShow").change()}),$("#nextShow").on("click",()=>{$("#pickShow option:selected").next("option").prop("selected","selected"),$("#pickShow").change()}),$("#changeStatus").on("click",()=>{const e=[];if($(".epCheck").each(function(){!0===this.checked&&e.push($(this).attr("id"))}),0===e.length)return!1;const t=scRoot+"/home/setStatus",o="show="+$("#showID").attr("value")+"&eps="+e.join("|")+"&status="+$("#statusSelect").val();$.post(t,o,()=>{location.reload(!0)})}),$(".seasonCheck").on("click",function(){const e=this,t=$(e).attr("id");$("#collapseSeason-"+t).collapse("show"),$('.epCheck:visible[id^="'+t+'x"]').each(function(){this.checked=e.checked})});let o=null;function s(e,t){return e?($(t).css({"background-color":"#90EE90",color:"#FFF","font-weight":"bold"}),!0):($(t).css({"background-color":"#FF0000",color:"#FFF!important","font-weight":"bold"}),!1)}$(".epCheck").on("click",function(e){if(!o||!e.shiftKey)return void(o=this);const t=this;let s=0;$(".epCheck").each(function(){if(2===s)return!1;1===s&&(this.checked=o.checked),this!==t&&this!==o||s++})}),$(".seriesCheck").on("click",()=>{$(".epCheck:visible").each(function(){this.checked=!0}),$(".seasonCheck:visible").each(function(){this.checked=!0})}),$(".clearAll").on("click",()=>{$(".epCheck:visible").each(function(){this.checked=!1}),$(".seasonCheck:visible").each(function(){this.checked=!1})}),$("#pickShow").on("change",function(){const e=$(this).val();0!==e&&(window.location.href=scRoot+"/home/displayShow?show="+e)}),$("#checkboxControls input").on("change",function(){const e=$(this).attr("id");$(this).showHideRows(e)}),$("#checkboxControls input").each(function(){const e=$(this).is(":checked");$("tr."+$(this).attr("id")).each(function(){e?$(this).show():$(this).hide()})}),$.fn.showHideRows=function(e){const t=$("#checkboxControls > input, #"+e).is(":checked");$("tr."+e).each(function(){t?$(this).show():$(this).hide()}),$("div.seasonheader").each(function(){let e=0;const t=$(this).attr("data-season-id");$("tr.season-"+t+" :visible").each(()=>{e++}),0===e?($(this).hide(),$("#"+t+"-cols").hide()):($(this).show(),$("#"+t+"-cols").show())})},$(".sceneSeasonXEpisode").on("change",function(){$(this).val($(this).val().replace(/[^\dxX]*/g,""));const e=$(this).attr("data-for-season"),t=$(this).attr("data-for-episode"),o=$(this).val().match(/^(\d+)x(\d+)$/i),i=$(this).val().match(/^(\d+)$/i);let a=null,n=null,r=!1;o?(a=o[1],n=o[2],r=s(!0,$(this))):i?(a=e,n=i[1],r=s(!0,$(this))):r=s(!1,$(this)),r&&function(e,t,o,s){const i=$("#showID").val(),a=$("#indexer").val();""===o&&(o=null),""===s&&(s=null),$.getJSON(scRoot+"/home/setSceneNumbering",{show:i,indexer:a,forSeason:e,forEpisode:t,sceneSeason:o,sceneEpisode:s},o=>{null===o.sceneSeason||null===o.sceneEpisode?$("#sceneSeasonXEpisode_"+i+"_"+e+"_"+t).val(""):$("#sceneSeasonXEpisode_"+i+"_"+e+"_"+t).val(o.sceneSeason+"x"+o.sceneEpisode),o.success||(o.errorMessage?notifyModal(o.errorMessage):notifyModal("Update failed."))})}(e,t,a,n)}),$(".sceneAbsolute").on("change",function(){$(this).val($(this).val().replace(/[^\dxX]*/g,""));const e=$(this).attr("data-for-absolute"),t=$(this).val().match(/^(\d{1,3})$/i);let o=null;t&&(o=t[1]),function(e,t){const o=$("#showID").val(),s=$("#indexer").val();""===t&&(t=null),$.getJSON(scRoot+"/home/setSceneNumbering",{show:o,indexer:s,forAbsolute:e,sceneAbsolute:t},t=>{null===t.sceneAbsolute?$("#sceneAbsolute_"+o+"_"+e).val(""):$("#sceneAbsolute_"+o+"_"+e).val(t.sceneAbsolute),t.success||(t.errorMessage?notifyModal(t.errorMessage):notifyModal("Update failed."))})}(e,o)}),$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each((e,t)=>{$(t).html($("<span/>").width(12*$(t).text()))})},$(".imdbstars").generateStars(),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$(".displayShowTable").each((e,t)=>{$.tablesorter.columnSelector.attachTo(t,"#popover-target")})}),$(()=>{$(".collapse.toggle").on("hide.bs.collapse",function(){const e=/collapseSeason-(\d+)/g.exec(this.id);$("#showseason-"+e[1]).text(_("Show Episodes"))}),$(".collapse.toggle").on("show.bs.collapse",function(){const e=/collapseSeason-(\d+)/g.exec(this.id);$("#showseason-"+e[1]).text(_("Hide Episodes"))})})},editShow(){$("#location").fileBrowser({title:_("Select Show Location")}),SICKCHILL.common.QualityChooser.init(),$("#submit").on("click",()=>{const e=$("#exceptions_list").find("optgroup").get().map(e=>{const t=$(e).data("season"),o=$(e).find("option:enabled").get().map(e=>{const t=$(e).val();return encodeURIComponent(t)}).join("|");return 0===o.length?null:[t,o].join(":")}).filter(e=>e);$("#exceptions").val(e),metaToBool("show.is_anime")&&generateBlackWhiteList()}),$("#addSceneName").on("click",()=>{const e=$("#SceneSeason").find(":selected").data("season"),t=$("#SceneName").val(),o=$('.exceptions_list optgroup[data-season="'+e+'"]').get()[0],s=$(o).find("option.empty");if(new Set($(o).find("option:not(.empty)").get().map(e=>$(e).val())).has(t)||""===t.trim())return void $("#SceneName").val("");const i=$("<option data-season="+e+">").text(t).val(t);$(o).append(i),s.remove(),$("#SceneName").val("")}),$("#removeSceneName").on("click",()=>{const e=$("#exceptions_list").find("option:selected"),t=e.closest("optgroup");if(t.find("option").length<2){const e=$('<option disabled class="empty">');e.text(_("None")),t.append(e)}e.remove()}),$(".custom-image").imageSelector()},manual_search_show_releases(){$("#manualSearchShowTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],textExtraction:{0:e=>$(e).attr("title")},headers:{3:{sorter:"quality"},4:{sorter:"metric"},7:{sorter:!1,filter:!1}},widgetOptions:{filter_hideFilters:!0}})},postProcess(){$("#episodeDir").fileBrowser({title:_("Select Unprocessed Episode Folder"),key:"postprocessPath"})},status(){$("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra"],textExtraction:{5:e=>$(e).data("seconds"),6:e=>$(e).data("seconds")},headers:{5:{sorter:"digit"},6:{sorter:"digit"}}}),$("#queueStatusTable").tablesorter({widgets:["saveSort","zebra"],sortList:[[3,0],[4,0],[2,1]]})},restart(){let e=srPID,t=setTimeout(()=>{setInterval(()=>{$.post(scRoot+"/home/is-alive/",o=>{void 0!==o&&o.msg===e||($("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()),void 0!==o&&"nope"!==o.msg&&o.msg!==e&&(clearInterval(t),$("#restart_loading").hide(),$("#restart_success").show(),$("#refresh_message").show(),srPID=o.msg,e=o.msg,t=setInterval(()=>{$.post(scRoot+"/home/is-alive/",()=>{clearInterval(t),setTimeout(()=>{window.location=scRoot+"/"+srDefaultPage+"/"},3e3)},"jsonp")},1e3))},"jsonp").fail(()=>{$("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()})},1e3)},5e3)}},manage:{init(){$.makeEpisodeRow=function(e,t,o,s,i){let a="";return a+=' <tr class="'+$("#row_class").val()+" show-"+e+'">',a+='  <td class="tableleft" align="center"><input type="checkbox" class="'+e+'-epcheck" name="'+e+"-"+t+"x"+o+'"'+(i?" checked":"")+"></td>",a+="  <td>"+t+"x"+o+"</td>",a+='  <td class="tableright" style="width: 100%">'+s+"</td>",a+=" </tr>"},$.makeSubtitleRow=function(e,t,o,s,i,a){let n="";if(n+='<tr class="good show-'+e+'">',n+='<td align="center"><input type="checkbox" class="'+e+'-epcheck" name="'+e+"-"+t+"x"+o+'"'+(a?" checked":"")+"></td>",n+='<td style="width: 2%;">'+t+"x"+o+"</td>",i.length>0){n+='<td style="width: 8%;">',i=i.split(",");for(const e in i)({}).hasOwnProperty.call(i,e)&&(n+='<img src="'+scRoot+"/images/subtitles/flags/"+i[e]+'.png" width="16" height="11" alt="'+i[e]+'" />&nbsp;');n+="</td>"}else n+='<td style="width: 8%;">None</td>';return n+="<td>"+s+"</td>",n+="</tr>"}},index(){$(".resetsorting").on("click",()=>{$("table").trigger("filterReset")}),$("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],textExtraction:{2:e=>($(e).find("img").attr("alt")||"unknown").toLowerCase(),3:e=>$(e).find("span").attr("title").toLowerCase(),4:e=>$(e).find("span").attr("title").toLowerCase(),5:e=>$(e).find("span").attr("title").toLowerCase(),6:e=>$(e).find("span").attr("title").toLowerCase(),7:e=>$(e).find("span").attr("title").toLowerCase(),8:e=>$(e).find("span").attr("title").toLowerCase(),9:e=>$(e).find("span").attr("title").toLowerCase(),10:e=>$(e).text().toLowerCase(),11:e=>$(e).text().toLowerCase()},widgets:["zebra","filter","columnSelector"],headers:{0:{sorter:!1,filter:!1},1:{sorter:"loadingNames"},2:{sorter:"network"},3:{sorter:"quality"},4:{sorter:"sports"},5:{sorter:"scene"},6:{sorter:"anime"},7:{sorter:"flatfold"},8:{sorter:"paused"},9:{sorter:"subtitle"},10:{sorter:"default_ep_status"},11:{sorter:"status"},12:{sorter:!1},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1},16:{sorter:!1},17:{sorter:!1}},widgetOptions:{columnSelector_mediaquery:!1}}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$.tablesorter.columnSelector.attachTo($("#massUpdateTable"),"#popover-target")}),$(".submitMassEdit").on("click",()=>{const e=[];if($(".editCheck").each(function(){!0===this.checked&&e.push($(this).attr("id").split("-")[1])}),0===e.length)return;const t=$("<form method='post' action='"+scRoot+"/manage/massEdit'><input type='hidden' name='toEdit' value='"+e.join("|")+"'/></form>");t.appendTo("body"),t.submit()}),$(".submitMassUpdate").on("click",()=>{const e=[],t=[],o=[],s=[],i=[],a=[],n=[];$(".updateCheck").each(function(){!0===this.checked&&e.push($(this).attr("id").split("-")[1])}),$(".refreshCheck").each(function(){!0===this.checked&&t.push($(this).attr("id").split("-")[1])}),$(".renameCheck").each(function(){!0===this.checked&&o.push($(this).attr("id").split("-")[1])}),$(".subtitleCheck").each(function(){!0===this.checked&&s.push($(this).attr("id").split("-")[1])}),$(".removeCheck").each(function(){!0===this.checked&&a.push($(this).attr("id").split("-")[1])});let r=0;if($(".deleteCheck").each(function(){!0===this.checked&&r++}),r>=1&&$.confirm({title:"Delete Shows",text:"You have selected to delete "+r+" show(s).  Are you sure you wish to continue? All files will be removed from your system.",confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm(){if($(".deleteCheck").each(function(){!0===this.checked&&i.push($(this).attr("id").split("-")[1])}),e.length+t.length+o.length+s.length+i.length+a.length+n.length===0)return!1;const r=scRoot+"/manage/massUpdate",l="toUpdate="+e.join("|")+"&toRefresh="+t.join("|")+"&toRename="+o.join("|")+"&toSubtitle="+s.join("|")+"&toDelete="+i.join("|")+"&toRemove="+a.join("|")+"&toMetadata="+n.join("|");$.post(r,l,()=>{location.reload(!0)})}}),e.length+t.length+o.length+s.length+i.length+a.length+n.length===0)return!1;const l=scRoot+"/manage/massUpdate",c="toUpdate="+e.join("|")+"&toRefresh="+t.join("|")+"&toRename="+o.join("|")+"&toSubtitle="+s.join("|")+"&toDelete="+i.join("|")+"&toRemove="+a.join("|")+"&toMetadata="+n.join("|");$.post(l,c,()=>{location.reload(!0)})}),[".editCheck",".updateCheck",".refreshCheck",".renameCheck",".deleteCheck",".removeCheck"].forEach(e=>{let t=null;$(e).on("click",function(o){if(!t||!o.shiftKey)return void(t=this);const s=this;let i=0;$(e).each(function(){if(2===i)return!1;1!==i||this.disabled||(this.checked=t.checked),this!==s&&this!==t||i++})})})},backlogOverview(){$("#pickShow").on("change",e=>{const t=$(e.currentTarget).val();t&&$("html,body").animate({scrollTop:$("#show-"+t).offset().top-25},"slow")})},failedDownloads(){$("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra"],sortList:[[1,0]],headers:{3:{sorter:!1}}}),$("#limit").on("change",e=>{window.location.href=scRoot+"/manage/failedDownloads/?limit="+$(e.currentTarget).val()}),$("#submitMassRemove").on("click",()=>{const e=[];if($(".removeCheck").each(function(){!0===this.checked&&e.push($(this).attr("id").split("-")[1])}),0===e.length)return!1;$.post(scRoot+"/manage/failedDownloads","toRemove="+e.join("|"),()=>{location.reload(!0)})}),$(".removeCheck").length>0&&$(".removeCheck").each(e=>{let t=null;$(e).on("click",function(o){if(!t||!o.shiftKey)return void(t=this);const s=this;let i=0;$(e+":visible").each(function(){if(2===i)return!1;1===i&&(this.checked=t.checked),this!==s&&this!==t||i++})})})},massEdit(){function e(e){const t=e.split("_");return t[t.length-1]}function t(e,t){$("#new_root_dir_"+t.whichId).val(e),$("#new_root_dir_"+t.whichId).change()}$(".new_root_dir").on("change",function(){const t=e($(this).attr("id"));$("#display_new_root_dir_"+t).html("<b>"+$(this).val()+"</b>")}),$(".edit_root_dir").on("click",function(){const o=e($(this).attr("id")),s=$("#new_root_dir_"+o).val();$(this).nFileBrowser(t,{initialDir:s,whichId:o})}),$(".delete_root_dir").on("click",function(){const t=e($(this).attr("id"));$("#new_root_dir_"+t).val(null),$("#display_new_root_dir_"+t).html("<b>"+_("DELETED")+"</b>")}),SICKCHILL.common.QualityChooser.init()},episodeStatuses(){$(".allCheck").on("click",function(){const e=$(this).attr("id").split("-")[1];$("."+e+"-epcheck").prop("checked",$(this).is(":checked"))}),$(".get_more_eps").on("click",function(){const e=$(this).attr("id"),t=$("#allCheck-"+e).is(":checked"),o=$("tr#"+e),s=$(this).attr("data-clicked"),i=$(this).attr("value");s?"collapse"===i.toLowerCase()?($(".show-"+e).hide(),$(this).prop("value","Expand")):"expand"===i.toLowerCase()&&($(".show-"+e).show(),$(this).prop("value","Collapse")):($.getJSON(scRoot+"/manage/showEpisodeStatuses",{indexer_id:e,whichStatus:$("#oldStatus").val()},s=>{$.each(s,(s,i)=>{$.each(i,(i,a)=>{o.after($.makeEpisodeRow(e,s,i,a,t))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".deselectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})},subtitleMissed(){$(".allCheck").on("click",function(){const e=$(this).attr("id").split("-")[1];$("."+e+"-epcheck").prop("checked",$(this).is(":checked"))}),$(".get_more_eps").on("click",function(){const e=$(this).attr("id"),t=$("#allCheck-"+e).is(":checked"),o=$("tr#"+e),s=$(this).attr("data-clicked"),i=$(this).attr("value");s?"Collapse"===i?($(".show-"+e).hide(),$(this).prop("value","Expand")):"Expand"===i&&($(".show-"+e).show(),$(this).prop("value","Collapse")):($.getJSON(scRoot+"/manage/showSubtitleMissed",{indexer_id:e,whichSubs:$("#selectSubLang").val()},s=>{$.each(s,(s,i)=>{$.each(i,(i,a)=>{o.after($.makeSubtitleRow(e,s,i,a.name,a.subtitles,t))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".deselectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})}},history:{init(){},index(){$("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],sortList:[[0,1]],textExtraction:function(){if(isMeta("settings.HISTORY_LAYOUT",["detailed"]))return{0:e=>$(e).find("time").attr("datetime"),4:e=>$(e).find("span").text().toLowerCase()};const e={0:e=>$(e).find("time").attr("datetime"),2:e=>$(e).attr("provider").toLowerCase()};return isMeta("settings.USE_SUBTITLES",["True"])?(e[4]=function(e){return $(e).find("img").attr("title")},e[5]=function(e){return $(e).find("span").text().toLowerCase()}):e[4]=function(e){return $(e).find("span").text().toLowerCase()},e}(),headers:isMeta("settings.HISTORY_LAYOUT",["detailed"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}:isMeta("settings.USE_SUBTITLES",["True"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:!1},5:{sorter:"quality"},6:{sorter:!1,filter:!1}}:{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}}),$("#layout").on("change",function(){window.location.href=$(this).find("option:selected").val()}),$("#history_limit").on("change",function(){window.location.href=scRoot+"/history/?limit="+$(this).val()}),$("a.removehistory").on("click",()=>{const e=[];let t=0;return $(".removeCheck").each(function(){!0===this.checked&&(e.push(shiftReturn($(this).attr("id").split("-"))),t++)}),!(t<1)&&($.confirm({title:"Remove Logs",text:"You have selected to remove "+t+" download history log(s).<br /><br />This cannot be undone.<br />Are you sure you wish to continue?",confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm(){const t=scRoot+"/history/removeHistory",o="toRemove="+e.join("|");$.post(t,o,()=>{location.reload(!0)})}}),!1)}),[".removeCheck"].forEach(e=>{let t=null;$(e).on("click",function(o){if(!t||!o.shiftKey)return void(t=this);const s=this;let i=0;$(e).each(function(){if(1!==i||this.disabled){if(2===i)return!1}else this.checked=t.checked;this!==s&&this!==t||i++})})})}},errorlogs:{init(){},index(){},viewlogs(){$("#min_level,#log_filter,#log_search").on("keyup change",__.debounce(()=>{$("#log_search").val().length>0&&($('#log_filter option[value="<NONE>"]').prop("selected",!0),$("#min_level option[value=5]").prop("selected",!0)),$("#min_level").prop("disabled",!0),$("#log_filter").prop("disabled",!0),document.body.style.cursor="wait";const e=scRoot+"/errorlogs/viewlog/",t="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val();$.post(e,t,t=>{history.pushState("data","",e),$("pre").html($(t).find("pre").html()),$("#min_level").prop("disabled",!1),$("#log_filter").prop("disabled",!1),document.body.style.cursor="default"})},500)),function e(){if("active"===$("#log_update_toggle").data("state")){const e="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val(),t=scRoot+"/errorlogs/viewlog/";$.post(t,e,e=>{$("pre").html($(e).find("pre").html())})}setTimeout(e,500)}(),$("#log_update_toggle").on("click",function(){const e="active"===$(this).data("state");return $(this).data("state",e?"paused":"active"),$(this).find("i").toggleClass("fa-pause fa-play"),$(this).find("span").text(e?_("Resume"):_("Pause")),$(this).attr("title",e?_("Resume updating the log on this page."):_("Pause updating the log on this page.")),!1})}},schedule:{init(){$(".btn-cal-subscribe").attr("href",document.location.href.replace(/https?/,"webcal").replace(/schedule.*/,"calendar"))},index(){if(isMeta("settings.COMING_EPS_LAYOUT",["list"])){const e={date:0,show:2,network:5},t=getMeta("settings.COMING_EPS_SORT"),o=t in e?[[e[t],0]]:[[0,0]];$(".resetsorting").on("click",()=>{$("#showListTable").trigger("filterReset")}),$("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort"],sortList:o,textExtraction:{0:e=>$(e).find("time").attr("datetime"),1:e=>$(e).find("time").attr("datetime"),2:e=>latinize($(e).text().normalize("NFC")),7:e=>$(e).find("span").text().toLowerCase()},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:!1},9:{sorter:!1}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,filter_saveFilters:!1,columnSelector_mediaquery:!1,stickyHeaders_offset:50}}),$(document).ajaxEpSearch()}isMeta("settings.COMING_EPS_LAYOUT",["banner","poster"])&&($(document).ajaxEpSearch(),$(".ep_summary").hide(),$(".ep_summaryTrigger").on("click",function(){$(this).next(".ep_summary").slideToggle("normal",function(){$(this).prev(".ep_summaryTrigger").attr("src",function(e,t){return $(this).next(".ep_summary").is(":visible")?t.replace("plus","minus"):t.replace("minus","plus")})})})),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$.tablesorter.columnSelector.attachTo($("#showListTable"),"#popover-target")}),$("#sort, #viewpaused, #viewsnatched, #layout").on("change",function(){window.location.href=$(this).find("option:selected").val()})}},addShows:{init(){$("#tabs").tabs({collapsible:!0,selected:metaToBool("settings.SORT_ARTICLE")?-1:0}),$.initRemoteShowGrid=function(){$("#showsort").val("original"),$("#showsortdirection").val("asc"),$("#showsort").on("change",function(){let e;switch(this.value){case"original":e="original-order";break;case"rating":$("#container").isotope({sortBy:"random"}),e="rating";break;case"rating_votes":e=["rating","votes"];break;case"votes":e="votes";break;case"rank":e="rank";break;default:e="name"}$("#container").isotope({sortBy:e})}),$("#showsortdirection").on("change",function(){$("#container").isotope({sortAscending:"asc"===this.value})}),$("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name(e){const t=$(e).attr("data-name")||"";return(metaToBool("settings.SORT_ARTICLE")?t:t.replace(/^((?:the|a|an)\s)/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt",rank:"[data-rank] parseInt"}})},$.loadTraktImages=function(){const e=scRoot+"/addShows/getTrendingShowImage";let t=0;$("img.trakt-image").each(function(){const o=$(this).attr("data-src-indexer-id");o?(setTimeout(()=>{$.post(e,{indexerId:o},e=>{e&&$('img.trakt-image[data-src-indexer-id="'+e+'"]').attr("src",$('img.trakt-image[data-src-indexer-id="'+e+'"]').attr("data-src-cache"))})},300+300*t),t++):$(this).attr("src",$(this).attr("data-src-cache"))})},$.fn.loadRemoteShows=function(e,t,o){$(this).html('<img id="searchingAnim" src="'+scRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" />&nbsp;'+t),$(this).load(scRoot+e+" #container",function(e,t){"error"===t?$(this).empty().html(o):($.initRemoteShowGrid(),$.loadTraktImages())})},$("#saveDefaultsButton").on("click",function(){const e=[],t=[];$("#anyQualities option:selected").each((t,o)=>{e.push($(o).val())}),$("#bestQualities option:selected").each((e,o)=>{t.push($(o).val())}),$.post(scRoot+"/config/general/saveAddShowDefaults",{defaultStatus:$("#statusSelect").val(),anyQualities:e.join(","),bestQualities:t.join(","),defaultSeasonFolders:$("#season_folders").is(":checked"),subtitles:$("#subtitles").is(":checked"),anime:$("#anime").is(":checked"),scene:$("#scene").is(":checked"),defaultStatusAfter:$("#statusSelectAfter").val()}),$(this).attr("disabled",!0)}),$("#statusSelect, #qualityPreset, #season_folders, #anyQualities, #bestQualities, #subtitles, #scene, #anime, #statusSelectAfter").on("change",()=>{$("#saveDefaultsButton").attr("disabled",!1)}),SICKCHILL.common.QualityChooser.init()},index(){},newShow(){const e=function(){const e={showName:"",dir:"unknown dir.",sepChar:""};return $("input:radio[name=whichSeries]:checked").length>0?e.showName=$("input:radio[name=whichSeries]:checked").val().split("|")[4]:$("input:hidden[name=whichSeries]").length>0&&$("input:hidden[name=whichSeries]").val().length>0&&(e.showName=$("#providedName").val()),SICKCHILL.common.updateBlackWhiteList(e.showName),$("#rootDirs option:selected").length>0?(e.dir=$("#rootDirs option:selected").val(),e.dir.includes("/")?e.sepChar="/":e.dir.includes("\\")&&(e.sepChar="\\"),e.dir.trim(e.sepChar),e.dir+=e.sepChar):$("#fullShowPath").val()&&(e.dir=$("#fullShowPath").val()),e.showName.length>0?$.post(scRoot+"/addShows/sanitizeFileName",{name:e.showName},t=>{$("#desc-show-name").text(e.showName),e.dir===$("#fullShowPath").val()?$("#desc-directory-name").html(e.dir):$("#desc-directory-name").html(e.dir+t+e.sepChar)}):($("#desc-show-name").text(e.showName),$("#desc-directory-name").html(e.dir)),$("#desc-quality-name").text($("#qualityPreset option:selected").text()),($("input:radio[name=whichSeries]:checked").val()||$("input:hidden[name=whichSeries]").val())&&($("#rootDirs option:selected").val()||$("#fullShowPath").val())?void $("#addShowButton").attr("disabled",!1):$("#addShowButton").attr("disabled",!0)},t=function(){$("#blackwhitelist").toggle($("#anime").prop("checked"))};let o=null;$("#search-button").on("click",function(){if(o&&o.abort(),!$("#show-name").val())return;const t=_($("#show-name").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect option:selected").text());$("#searchResults").empty().html('<img id="searchingAnim" src="'+scRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" /> '+_("searching {searchingFor}...").replace(/{searchingFor}/,t)),o=$.ajax({url:scRoot+"/addShows/searchIndexersForShowName",data:{search_term:$("#show-name").val().trim(),lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:1e3*Number.parseInt($("#indexer_timeout").val(),10),dataType:"json",error(){$("#searchResults").empty().html(_("search timed out, try again or try another indexer")),$(".next-steps").hide()},success(t){let o='<legend class="legendStep">#2 Pick a Show</legend>';if(0===t.results.length)o+="<b>No results found, try a different search.</b>",$(".next-steps").hide();else{const e=[];$.each(t.results,(o,s)=>{const i={obj:s.join("|").replace(/"/g,""),indexer:s[0],id:s[3],title:s[4],debut:s[5],inShowList:s[6],url:anonURL+s[2]+s[3]};t.langid&&(i.url+="&lid="+t.langid),e.push(i)}),o+=function(e){let t='<div class="row"><div class="col-lg-6 col-md-12"><table class="sickchillTable new-show-table tablesorter"><thead><tr><th></th><th>Show Name</th><th>Premiere</th><th>Indexer</th></tr></thead><tbody>';const o=e.indexOf(e=>!e.inShowList);return e.forEach((e,s)=>{t+='<tr class="'+(e.inShowList?"in-list":"")+'"><td><input type="radio" class="whichSeries" name="whichSeries" value="'+e.obj+'" '+(o===s?"checked ":"")+(e.inShowList?"disabled":"")+"/></td><td>"+function(){let t="<a href=";return e.inShowList?t+='"/home/displayShow?show='+e.id+'"':t+='"'+e.url+'" target="_blank"',t+=">"+e.title+"</a>"}()+"</td><td>"+e.debut+"</td><td>"+e.indexer+"</td></tr>"}),t+="</tbody></table></div></div>"}(e),$(".next-steps").show()}$("#searchResults").html(o),e(),$(".new-show-table").tablesorter({widgets:["stickyHeaders","zebra","saveSort"],headers:{0:{sorter:!1}}})}})}),$("#addShowButton").on("click",()=>{if(!$('input:radio[name="whichSeries"]:checked').val())return notifyModal("You must choose a show to continue"),!1;generateBlackWhiteList(),$("#addShowForm").submit()}),$("#anime").on("click",()=>{t(),e()}),$("#skipShowButton").on("click",()=>{$("#skipShow").val("1"),$("#addShowForm").submit()}),$("#rootDirText").change(e),$("#qualityPreset").change(e),$("#searchResults").on("change",".whichSeries",e),$("#show-name").on("focus keyup",e=>{13===e.keyCode&&$("#search-button").click()}),$("#show-name").val()&&$("#search-button").click(),e(),t()},addExistingShow(){function e(){let e="";$(".dir_check").each((t,o)=>{$(o).is(":checked")&&(e.length>0&&(e+="&"),e+="rootDir="+encodeURIComponent($(o).attr("id")))}),$("#tableDiv").html('<img id="searchingAnim" src="'+scRoot+'/images/loading32.gif" height="32" width="32" /> '+_("loading folders...")),$.post(scRoot+"/addShows/massAddTable/",e,e=>{$("#tableDiv").html(e),$("#addRootDirTable").tablesorter({widgets:["zebra"],headers:{0:{sorter:!1}}})})}$("#tableDiv").on("click","#checkAll",function(){const e=this;$(".dirCheck").each(function(){this.checked=e.checked})}),$("#submitShowDirs").on("click",()=>{const e=$("#addShowForm");let t=!1;if($(".dirCheck").each(function(){if(!0===this.checked){const o=$(this).attr("id"),s=$(this).closest("tr").find("select").val();$("<input>",{type:"hidden",name:"shows_to_add",value:s+"|"+o}).appendTo(e),t=!0}}),!1===t)return!1;$("<input>",{type:"hidden",name:"promptForSettings",value:$("#promptForSettings").is(":checked")?"on":"off"}).appendTo(e),e.submit()});let t="";const o=function(){if(t===$("#rootDirText").val())return!1;t=$("#rootDirText").val(),$("#rootDirStaticList").html(""),$("#rootDirs option").each((e,t)=>{$("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+$(t).val()+'" checked=checked> <label for="'+$(t).val()+'">'+$(t).val()+"</label></li>")}),e()};o(),$("#rootDirText").on("change",o),$("#rootDirStaticList").on("click",".dir_check",e),$("#tableDiv").on("click",".showManage",e=>{e.preventDefault(),$("#tabs").tabs("option","active",0),$("html,body").animate({scrollTop:0},1e3)})},recommendedShows(){$("#recommendedShows").loadRemoteShows("/addShows/getRecommendedShows/","Loading recommended shows...","Trakt timed out, refresh page to try again")},trendingShows(){$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+$("#traktList").val(),"Loading trending shows...","Trakt timed out, refresh page to try again"),$("#traktlistselection").on("change",e=>{const t=e.target.value;window.history.replaceState({},document.title,"?traktList="+t),$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+t,"Loading trending shows...","Trakt timed out, refresh page to try again")})},popularShows(){$.initRemoteShowGrid()}},movies:{init(){$("#movieTabs").tabs({activate(){$(".movie-grid").isotope("layout")}})},index(){function e(e){let t=0,o=0,s=0,i=0;e<125?(s=3,i=4):e<175?(t=9,o=40,s=4,i=5):(t=11,o=50,s=6,i=6),$("#posterPopup").remove(),void 0===t?$(".movie-details").hide():($(".movie-details").show(),$(".movie-dlstats, .movie-quality").css("fontSize",t),$(".movie-network-image").css("width",o)),$(".movie-container").css({width:e,borderWidth:i,borderRadius:s})}let t;$(".resetsorting").on("click",()=>{$("table").trigger("filterReset")}),$("#filterMovieName").on("input",__.debounce(()=>{$(".movie-grid").isotope({filter(){return $(this).find(".movie-title").html().trim().toLowerCase().includes($("#filterShowName").val().toLowerCase())}})},500)),"undefined"!=typeof Storage&&(t=Number.parseInt(localStorage.getItem("posterSize"),10)),("number"!=typeof t||Number.isNaN(t))&&(t=188),e(t),$("#posterSizeSlider").slider({min:75,max:250,value:t,change(t,o){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",o.value),e(o.value),$(".movie-grid").isotope("layout")}}),$("#rootDirSelect").on("change",()=>{$("#rootDirForm").submit()}),$(".progressbar").each(function(){const e=$(this).data("progress-percentage"),t=Math.max(20,e-e%20);$(this).progressbar({value:e}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+t)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()})},details(){$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each((e,t)=>{$(t).html($("<span/>").width(12*$(t).text()))})},$(".imdbstars").generateStars(),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$(".displayShowTable").each((e,t)=>{$.tablesorter.columnSelector.attachTo(t,"#popover-target")})})}}},UTIL={exec(e,t){const o=SICKCHILL;t=void 0===t?"init":t,""!==e&&o[e]&&"function"==typeof o[e][t]&&o[e][t]()},init(){const e=document.body,t=e.getAttribute("data-controller"),o=e.getAttribute("data-action");UTIL.exec("common"),UTIL.exec(t),UTIL.exec(t,o)}};$.getJSON(scRoot+"/ui/locale.json",{lang:getMeta("settings.GUI_LANG")},e=>{window.gt=void 0===e?new Gettext:new Gettext(e.messages),window._=function(e){return gt.gettext(e)},window._n=function(e,t,o){return gt.ngettext(e,t,o)},navigator.userAgent.includes("PhantomJS")||$(document).ready(UTIL.init)});