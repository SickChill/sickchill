function getMeta(e){return $('meta[data-var="'+e+'"]').data("content")}const scRoot=getMeta("scRoot"),scDefaultPage=getMeta("scDefaultPage"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+scRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+scRoot+"/images/loading16"+themeSpinner+'.gif" alt="loading" height="16" width="16" />';let scPID=getMeta("scPID");function configSuccess(e=!0){$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),!0===e&&window.location.reload()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$("#email_show").trigger("notify"),$("#prowl_show").trigger("notify")}function metaToBool(e){let t=$('meta[data-var="'+e+'"]').data("content");return void 0===t?(console.log(e+' is empty, did you forget to add this to "main.mako"?'),t):!("false"===(t=(t=Number.isNaN(t)?t.toLowerCase():t.toString()).toLowerCase())||"none"===t||"0"===t)}function isMeta(e,t){return new RegExp(1<t.length?t.join("|"):t).test($('meta[data-var="'+e+'"]').data("content"))}function notifyModal(e){$("#site-notification-modal .modal-body").html(e),$("#site-notification-modal").modal()}function addSiteMessage(e="danger",t="",o=""){$.post(scRoot+"/ui/set_site_message",{level:e,tag:t,message:o},e=>{var t=$("#site-messages");if(void 0!==t){t.empty();for(const o in e)Object.hasOwn(e,o)&&t.append('<div class="alert alert-'+e[o].level+' upgrade-notification hidden-print" id="site-message-'+o+'" role="alert"><span>'+e[o].message+'</span><span class="glyphicon glyphicon-check site-message-dismiss pull-right" data-id="'+o+'"/></div>')}}),$("#site-messages").on("click",".site-message-dismiss",function(){var e=$(this).data("id");$("#site-message-"+e).hide(),$.post(scRoot+"/ui/dismiss-site-message",{index:e})})}function shiftReturn(e){return e.length<=1?[]:(e.shift(),e)}const __=_,SICKCHILL=(window._=function(e){return e},{common:{init(){for(const e of document.querySelectorAll("img"))e.dataset.src&&e.setAttribute("src",e.dataset.src);metaToBool("settings.SICKCHILL_BACKGROUND")&&($.backstretch(scRoot+"/ui/sickchill_background"),$(".backstretch").css("opacity",getMeta("settings.FANART_BACKGROUND_OPACITY")).fadeIn("500")),addSiteMessage(),$.confirm.options={confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:!1,confirm(e){location.href=e.context.href}},$("a.shutdown").confirm({title:"Shutdown",text:"Are you sure you want to shut down SickChill?"}),$("a.restart").confirm({title:"Restart",text:"Are you sure you want to restart SickChill?"}),$("a.removeshow").confirm({title:"Remove Show",text:'Are you sure you want to remove <span class="footerhighlight">'+$("#showtitle").data("showname")+'</span> from the database?<br><br><input type="checkbox" id="deleteFiles" name="deleteFiles"/>&nbsp;<label for="deleteFiles" class="red-text">Check to delete files as well. IRREVERSIBLE</label>',confirm(e){location.href=e.context.href+($("#deleteFiles")[0].checked?"&full=1":"&full=0")}}),$("a.clearhistory").confirm({title:"Clear History",text:"Are you sure you want to clear all download history?"}),$("a.trimhistory").confirm({title:"Trim History",text:"Are you sure you want to trim all download history older than 30 days?"}),$("a.submiterrors").confirm({title:"Submit Errors",text:'Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SickChill is updated and trigger<br> this error with debug enabled before submitting</span>'}),$("#config-components").tabs({activate(e,t){var o=$(this).data("lastOpenedPanel");o||=$(t.oldPanel),$(this).data("topPositionTab")||$(this).data("topPositionTab",$(t.newPanel).position().top),$(t.newPanel).hide().fadeIn(0),o&&o.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")}),$(this).data("lastOpenedPanel",$(t.newPanel))}}),(navigator.maxTouchPoints||0)<2&&$(".dropdown-toggle").on("click",function(){var e=$(this);"true"===e.prop("ariaExpanded")&&(window.location.href=e.prop("href"))}),metaToBool("settings.FUZZY_DATING")&&($.timeago.settings.allowFuture=!0,$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},$("[datetime]").timeago()),$(document.body).on("click","a[data-no-redirect]",e=>(e.preventDefault(),$.get($(e.currentTarget).prop("href")),!1)),$(document.body).on("change",".bulkCheck",e=>{const t=e.currentTarget;e="."+t.id+":visible";$(e).each(function(){this.checked=t.checked})}),$(".enabler").on("change",function(){this.checked?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")})},QualityChooser:{setFromPresets(t){0===Number.parseInt(t,10)?$("#customQuality").show():($("#customQuality").hide(),$("#anyQualities").find("option").each(function(){var e=t&$(this).val();$(this).attr("selected",0<e&&"selected")}),$("#bestQualities").find("option").each(function(){var e=t&$(this).val()<<16;$(this).attr("selected",0<e&&"selected")}))},init(){const e=$("#qualityPreset");e.on("change",()=>{this.setFromPresets(e.find(":selected").val())}),this.setFromPresets(e.find(":selected").val())}},updateBlackWhiteList(e){$("#pool").children().remove(),$("#anime").is(":checked")?($("#blackwhitelist").show(),e&&$.getJSON(scRoot+"/home/fetch_releasegroups",{show_name:e},e=>{"success"===e.result&&$.each(e.groups,(e,t)=>{var o=$("<option>");o.attr("value",t.name),o.html(t.name+" | "+t.rating+" | "+t.range),o.appendTo("#pool")})})):$("#blackwhitelist").hide()}},config:{init(){$("#config-components").tabs(),$(".viewIf").on("click",function(){(this.checked?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id"))):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")))).fadeIn("fast","linear")}),$(".datePresets").on("click",function(){let e=$("#date_presets").val();this.checked&&"%x"===e?(e="%a, %b %d, %Y",$("#date_use_system_default").html("1")):this.checked||"1"!==$("#date_use_system_default").html()||(e="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),e&&$("#date_presets").val(e)}),$("#configForm").ajaxForm({beforeSubmit(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after("<span>"+loading+" Saving...</span>"),$(this).hide()})},success(){setTimeout(configSuccess,2e3)}}),$("#config_save_button").on("click",()=>{$("#configForm").submit()}),$("#api_key").on("click",()=>{$("#api_key").select()}),$("#generate_new_apikey").on("click",()=>{$.get(scRoot+"/config/general/generateApiKey",e=>{void 0===e.error?$("#api_key").val(e):notifyModal(e.error)})})},index(){$("#log_dir").fileBrowser({title:_("Select log file folder location")}),$("#sickchill_background_path").fileBrowser({title:_("Select Background Image"),key:"sickchill_background_path",includeFiles:1,fileTypes:["images"]}),$("#custom_css_path").fileBrowser({title:_("Select CSS file"),key:"custom_css_path",includeFiles:1,fileTypes:["css"]})},backupRestore(){$("#backup-submit").on("click",()=>{$("#backup-submit").attr("disabled",!0),$("#backup-result").html(loading),$.post(scRoot+"/config/backuprestore/backup",{backupDirectory:$("#backupDirectory").val()}).done(e=>{$("#backup-result").html(e),$("#backup-submit").attr("disabled",!1)})}),$("#restore-submit").on("click",()=>{$("#restore-submit").attr("disabled",!0),$("#restore-result").html(loading),$.post(scRoot+"/config/backuprestore/restore",{backupFile:$("#backupFile").val()}).done(e=>{$("#restore-result").html(e),$("#restore-submit").attr("disabled",!1)})}),$("#backupDirectory").fileBrowser({title:_("Select backup folder to save to"),key:"backupPath"}),$("#backupFile").fileBrowser({title:_("Select backup files to restore"),key:"backupFile",includeFiles:1}),$("#config-components").tabs()},notifications(){function e(t){const o={};o.api=$("#pushbullet_api").val(),t&&$("#testPushbullet-result").html(loading),o.api?($.post(scRoot+"/home/getPushbulletDevices",{api:o.api},e=>{o.devices=$.parseJSON(e).devices,o.currentDevice=$("#pushbullet_device").val(),$("#pushbullet_device_list").html("");for(let e=0;e<o.devices.length;e++)!0===o.devices[e].active&&(o.currentDevice===o.devices[e].iden?$("#pushbullet_device_list").append('<option value="'+o.devices[e].iden+'" selected>'+o.devices[e].nickname+"</option>"):$("#pushbullet_device_list").append('<option value="'+o.devices[e].iden+'">'+o.devices[e].nickname+"</option>"));$("#pushbullet_device_list").prepend('<option value="" '+(""===o.currentDevice?"selected":"")+">All devices</option>"),t&&$("#testPushbullet-result").html(t)}),$("#pushbullet_device_list").on("change",()=>{$("#pushbullet_device").val($("#pushbullet_device_list").val()),$("#testPushbullet-result").html(_("Don't forget to save your new pushbullet settings."))}),$.post(scRoot+"/home/getPushbulletChannels",{api:o.api},e=>{if(o.channels=$.parseJSON(e).channels,o.currentChannel=$("#pushbullet_channel").val(),$("#pushbullet_channel_list").html(""),0<o.channels.length){for(let e=0;e<o.channels.length;e++)!0===o.channels[e].active?$("#pushbullet_channel_list").append('<option value="'+o.channels[e].tag+'" selected>'+o.channels[e].name+"</option>"):$("#pushbullet_channel_list").append('<option value="'+o.channels[e].tag+'">'+o.channels[e].name+"</option>");$("#pushbullet_channel_list").prepend('<option value="" '+(o.currentChannel?"selected":"")+">No Channel</option>"),$("#pushbullet_channel_list").prop("disabled",!1)}else $("#pushbullet_channel_list").prepend('<option value="">No Channels</option>'),$("#pushbullet_channel_list").prop("disabled",!0);t&&$("#testPushbullet-result").html(t),$("#pushbullet_channel_list").on("change",()=>{$("#pushbullet_channel").val($("#pushbullet_channel_list").val()),$("#testPushbullet-result").html(_("Don't forget to save your new pushbullet settings."))})})):($("#testPushbullet-result").html(_("You didn't supply a Pushbullet api key")),$("#pushbullet_api").focus())}function t(){$.getJSON(scRoot+"/home/loadShowNotifyLists",t=>{if(0!==t._size){var o=[];for(const a in t)Object.hasOwn(t,a)&&"_"!==a.charAt(0)&&o.push(t[a]);var s=o.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);let e='<option value="-1">-- Select --</option>';for(const i in s)Object.hasOwn(s,i)&&s[i].id&&s[i].name&&(e+='<option value="'+s[i].id+'">'+$("<div>").text(s[i].name).html()+"</option>");$("#email_show").html(e),$("#email_show_list").val(""),$("#prowl_show").html(e),$("#prowl_show_list").val("")}})}$("#testGrowl").on("click",function(){var e={};e.host=$.trim($("#growl_host").val()),e.password=$.trim($("#growl_password").val()),e.host?($("#growl_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testGrowl-result").html(loading),$.get(scRoot+"/home/testGrowl",{host:e.host,password:e.password}).done(e=>{$("#testGrowl-result").html(e),$("#testGrowl").prop("disabled",!1)})):($("#testGrowl-result").html(_("Please fill out the necessary fields above.")),$("#growl_host").addClass("warning"))}),$("#testProwl").on("click",function(){var e={};e.api=$.trim($("#prowl_api").val()),e.priority=$("#prowl_priority").val(),e.api?($("#prowl_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testProwl-result").html(loading),$.get(scRoot+"/home/testProwl",{prowl_api:e.api,prowl_priority:e.priority}).done(e=>{$("#testProwl-result").html(e),$("#testProwl").prop("disabled",!1)})):($("#testProwl-result").html(_("Please fill out the necessary fields above.")),$("#prowl_api").addClass("warning"))}),$("#testKODI").on("click",function(){var e={};e.host=$.trim($("#kodi_host").val()),e.username=$.trim($("#kodi_username").val()),e.password=$.trim($("#kodi_password").val()),e.host?($("#kodi_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testKODI-result").html(loading),$.get(scRoot+"/home/testKODI",{host:e.host,username:e.username,password:e.password}).done(e=>{$("#testKODI-result").html(e),$("#testKODI").prop("disabled",!1)})):($("#testKODI-result").html(_("Please fill out the necessary fields above.")),$("#kodi_host").addClass("warning"))}),$("#testPHT").on("click",function(){var e={client:{}};e.client.host=$.trim($("#plex_client_host").val()),e.client.username=$.trim($("#plex_client_username").val()),e.client.password=$.trim($("#plex_client_password").val()),e.client.host?($("#plex_client_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPHT-result").html(loading),$.get(scRoot+"/home/testPHT",{host:e.client.host,username:e.client.username,password:e.client.password}).done(e=>{$("#testPHT-result").html(e),$("#testPHT").prop("disabled",!1)})):($("#testPHT-result").html(_("Please fill out the necessary fields above.")),$("#plex_client_host").addClass("warning"))}),$("#testPMS").on("click",function(){var e={server:{}};e.server.host=$.trim($("#plex_server_host").val()),e.server.username=$.trim($("#plex_server_username").val()),e.server.password=$.trim($("#plex_server_password").val()),e.server.token=$.trim($("#plex_server_token").val()),e.server.host?($("#plex_server_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMS-result").html(loading),$.get(scRoot+"/home/testPMS",{host:e.server.host,username:e.server.username,password:e.server.password,plex_server_token:e.server.token}).done(e=>{$("#testPMS-result").html(e),$("#testPMS").prop("disabled",!1)})):($("#testPMS-result").html(_("Please fill out the necessary fields above.")),$("#plex_server_host").addClass("warning"))}),$("#testEMBY").on("click",function(){var e={};e.host=$("#emby_host").val(),e.apikey=$("#emby_apikey").val(),e.host&&e.apikey?($("#emby_host,#emby_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testEMBY-result").html(loading),$.get(scRoot+"/home/testEMBY",{host:e.host,emby_apikey:e.apikey}).done(e=>{$("#testEMBY-result").html(e),$("#testEMBY").prop("disabled",!1)})):($("#testEMBY-result").html(_("Please fill out the necessary fields above.")),e.host?$("#emby_host").removeClass("warning"):$("#emby_host").addClass("warning"),e.apikey?$("#emby_apikey").removeClass("warning"):$("#emby_apikey").addClass("warning"))}),$("#testJELLYFIN").on("click",function(){var e={};e.host=$("#jellyfin_host").val(),e.apikey=$("#jellyfin_apikey").val(),e.host&&e.apikey?($("#jellyfin_host,#jellyfin_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testJELLYFIN-result").html(loading),$.get(scRoot+"/home/testJELLYFIN",{host:e.host,jellyfin_apikey:e.apikey}).done(e=>{$("#testJELLYFIN-result").html(e),$("#testJELLYFIN").prop("disabled",!1)})):($("#testJELLYFIN-result").html(_("Please fill out the necessary fields above.")),e.host?$("#jellyfin_host").removeClass("warning"):$("#jellyfin_host").addClass("warning"),e.apikey?$("#jellyfin_apikey").removeClass("warning"):$("#jellyfin_apikey").addClass("warning"))}),$("#testBoxcar2").on("click",function(){var e={};e.accesstoken=$.trim($("#boxcar2_accesstoken").val()),e.accesstoken?($("#boxcar2_accesstoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar2-result").html(loading),$.get(scRoot+"/home/testBoxcar2",{accesstoken:e.accesstoken}).done(e=>{$("#testBoxcar2-result").html(e),$("#testBoxcar2").prop("disabled",!1)})):($("#testBoxcar2-result").html(_("Please fill out the necessary fields above.")),$("#boxcar2_accesstoken").addClass("warning"))}),$("#testPushover").on("click",function(){var e={};e.userkey=$("#pushover_userkey").val(),e.apikey=$("#pushover_apikey").val(),e.userkey&&e.apikey?($("#pushover_userkey,#pushover_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushover-result").html(loading),$.get(scRoot+"/home/testPushover",{userKey:e.userkey,apiKey:e.apikey}).done(e=>{$("#testPushover-result").html(e),$("#testPushover").prop("disabled",!1)})):($("#testPushover-result").html(_("Please fill out the necessary fields above.")),e.userkey?$("#pushover_userkey").removeClass("warning"):$("#pushover_userkey").addClass("warning"),e.apikey?$("#pushover_apikey").removeClass("warning"):$("#pushover_apikey").addClass("warning"))}),$("#testLibnotify").on("click",()=>{$("#testLibnotify-result").html(loading),$.get(scRoot+"/home/testLibnotify",e=>{$("#testLibnotify-result").html(e)})}),$("#twitterStep1").on("click",()=>{$("#testTwitter-result").html(loading),$.get(scRoot+"/home/twitterStep1",e=>{window.open(e)}).done(()=>{$("#testTwitter-result").html(_("<b>Step 1:</b> Confirm Authorization"))})}),$("#twitterStep2").on("click",()=>{var e={};e.key=$.trim($("#twitter_key").val()),e.key?($("#twitter_key").removeClass("warning"),$("#testTwitter-result").html(loading),$.get(scRoot+"/home/twitterStep2",{key:e.key},e=>{$("#testTwitter-result").html(e)})):($("#testTwitter-result").html(_("Please fill out the necessary fields above.")),$("#twitter_key").addClass("warning"))}),$("#testTwitter").on("click",()=>{$.post(scRoot+"/home/testTwitter",e=>{$("#testTwitter-result").html(e)})}),$("#testTwilio").on("click",()=>{$("#testTwilio").addClass("disabled"),$.post(scRoot+"/home/testTwilio",e=>{$("#testTwilio-result").html(e)}).always(()=>{$("#testTwilio").removeClass("disabled")})}),$("#testSlack").on("click",()=>{$.post(scRoot+"/home/testSlack",e=>{$("#testSlack-result").html(e)})}),$("#testMattermost").on("click",()=>{$.post(scRoot+"/home/testMattermost",e=>{$("#testMattermost-result").html(e)})}),$("#testMattermostBot").on("click",()=>{$.post(scRoot+"/home/testMattermostBot",e=>{$("#testMattermostBot-result").html(e)})}),$("#testRocketChat").on("click",()=>{$.post(scRoot+"/home/testRocketChat",e=>{$("#testRocketChat-result").html(e)})}),$("#testMatrix").on("click",()=>{$.post(scRoot+"/home/testMatrix",e=>{$("#testMatrix-result").html(e)})}),$("#testDiscord").on("click",()=>{var e,t=$("#discord_webhook");t.val()?(e={webhook:t.val(),name:$("#discord_name").val(),avatar:$("#discord_avatar_url").val(),tts:$("#discord_tts").is(":checked")?1:0},$("#testDiscord").prop("disabled",!0),$("#testDiscord-result").html(loading),$.post(scRoot+"/home/testDiscord",e).done(e=>{$("#testDiscord-result").html(e),$("#testDiscord").prop("disabled",!1)})):(t.focus(),notifyModal("Please fill in the webhook address"))}),$("#settingsNMJ").on("click",()=>{var e={};$("#nmj_host").val()?($("#testNMJ-result").html(loading),e.host=$("#nmj_host").val(),$.post(scRoot+"/home/settingsNMJ",{host:e.host},e=>{null===e&&($("#nmj_database").removeAttr("readonly"),$("#nmj_mount").removeAttr("readonly"));e=$.parseJSON(e);$("#testNMJ-result").html(e.message),$("#nmj_database").val(e.database),$("#nmj_mount").val(e.mount),e.database?$("#nmj_database").attr("readonly",!0):$("#nmj_database").removeAttr("readonly"),e.mount?$("#nmj_mount").attr("readonly",!0):$("#nmj_mount").removeAttr("readonly")})):($("#nmj_host").focus(),notifyModal("Please fill in the Popcorn IP address"))}),$("#testNMJ").on("click",function(){var e={};e.host=$.trim($("#nmj_host").val()),e.database=$("#nmj_database").val(),e.mount=$("#nmj_mount").val(),e.host?($("#nmj_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJ-result").html(loading),$.post(scRoot+"/home/testNMJ",{host:e.host,database:e.database,mount:e.mount}).done(e=>{$("#testNMJ-result").html(e),$("#testNMJ").prop("disabled",!1)})):($("#testNMJ-result").html(_("Please fill out the necessary fields above.")),$("#nmj_host").addClass("warning"))}),$("#settingsNMJv2").on("click",()=>{var e={};if($("#nmjv2_host").val()){$("#testNMJv2-result").html(loading),e.host=$("#nmjv2_host").val(),e.dbloc="";for(const t of document.getElementsByName("nmjv2_dbloc"))if(t.checked){e.dbloc=t.value;break}e.dbinstance=$("#NMJv2db_instance").val(),$.post(scRoot+"/home/settingsNMJv2",{host:e.host,dbloc:e.dbloc,instance:e.dbinstance},e=>{null===e&&$("#nmjv2_database").removeAttr("readonly");e=$.parseJSON(e);$("#testNMJv2-result").html(e.message),$("#nmjv2_database").val(e.database),e.database?$("#nmjv2_database").attr("readonly",!0):$("#nmjv2_database").removeAttr("readonly")})}else $("#nmjv2_host").focus(),notifyModal("Please fill in the Popcorn IP address","modal")}),$("#testNMJv2").on("click",function(){var e={};e.host=$.trim($("#nmjv2_host").val()),e.host?($("#nmjv2_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJv2-result").html(loading),$.post(scRoot+"/home/testNMJv2",{host:e.host}).done(e=>{$("#testNMJv2-result").html(e),$("#testNMJv2").prop("disabled",!1)})):($("#testNMJv2-result").html(_("Please fill out the necessary fields above.")),$("#nmjv2_host").addClass("warning"))}),$("#testFreeMobile").on("click",function(){var e={};e.id=$.trim($("#freemobile_id").val()),e.apikey=$.trim($("#freemobile_apikey").val()),e.id&&e.apikey?($("#freemobile_id,#freemobile_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testFreeMobile-result").html(loading),$.post(scRoot+"/home/testFreeMobile",{freemobile_id:e.id,freemobile_apikey:e.apikey}).done(e=>{$("#testFreeMobile-result").html(e),$("#testFreeMobile").prop("disabled",!1)})):($("#testFreeMobile-result").html(_("Please fill out the necessary fields above.")),e.id?$("#freemobile_id").removeClass("warning"):$("#freemobile_id").addClass("warning"),e.apikey?$("#freemobile_apikey").removeClass("warning"):$("#freemobile_apikey").addClass("warning"))}),$("#testTelegram").on("click",function(){var e={};e.id=$.trim($("#telegram_id").val()),e.apikey=$.trim($("#telegram_apikey").val()),e.id&&e.apikey?($("#telegram_id,#telegram_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testTelegram-result").html(loading),$.post(scRoot+"/home/testTelegram",{telegram_id:e.id,telegram_apikey:e.apikey}).done(e=>{$("#testTelegram-result").html(e),$("#testTelegram").prop("disabled",!1)})):($("#testTelegram-result").html(_("Please fill out the necessary fields above.")),e.id?$("#telegram_id").removeClass("warning"):$("#telegram_id").addClass("warning"),e.apikey?$("#telegram_apikey").removeClass("warning"):$("#telegram_apikey").addClass("warning"))}),$("#testJoin").on("click",function(){var e={};e.id=$.trim($("#join_id").val()),e.apikey=$.trim($("#join_apikey").val()),e.id&&e.apikey?($("#join_id,#join_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testJoin-result").html(loading),$.post(scRoot+"/home/testJoin",{join_id:e.id,join_apikey:e.apikey}).done(e=>{$("#testJoin-result").html(e),$("#testJoin").prop("disabled",!1)})):($("#testJoin-result").html(_("Please fill out the necessary fields above.")),e.id?$("#join_id").removeClass("warning"):$("#join_id").addClass("warning"),e.apikey?$("#join_apikey").removeClass("warning"):$("#join_apikey").addClass("warning"))}),$("#TraktGetPin").on("click",()=>{window.open($("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),$("#trakt_pin").removeClass("hide")}),$("#trakt_pin").on("keyup change",()=>{0===$("#trakt_pin").val().length?($("#TraktGetPin").removeClass("hide"),$("#authTrakt").addClass("hide")):($("#TraktGetPin").addClass("hide"),$("#authTrakt").removeClass("hide"))}),$("#authTrakt").on("click",()=>{var e={};e.pin=$("#trakt_pin").val(),0<e.pin.length&&$.post(scRoot+"/home/getTraktToken",{trakt_pin:e.pin}).done(e=>{$("#testTrakt-result").html(e),$("#authTrakt").addClass("hide"),$("#trakt_pin").addClass("hide"),$("#TraktGetPin").addClass("hide")})}),$("#testTrakt").on("click",function(){var e={};e.username=$.trim($("#trakt_username").val()),e.trendingBlacklist=$.trim($("#trakt_blacklist_name").val()),e.username?/\s/g.test(e.trendingBlacklist)?($("#testTrakt-result").html(_("Check blacklist name; the value needs to be a trakt slug")),$("#trakt_blacklist_name").addClass("warning")):($("#trakt_username").removeClass("warning"),$("#trakt_blacklist_name").removeClass("warning"),$(this).prop("disabled",!0),$("#testTrakt-result").html(loading),$.post(scRoot+"/home/testTrakt",{username:e.username,blacklist_name:e.trendingBlacklist}).done(e=>{$("#testTrakt-result").html(e),$("#testTrakt").prop("disabled",!1)})):($("#testTrakt-result").html(_("Please fill out the necessary fields above.")),e.username?$("#trakt_username").removeClass("warning"):$("#trakt_username").addClass("warning"))}),$("#testEmail").on("click",()=>{var e=$("#testEmail-result"),t=(e.html(loading),0<$("#email_host").val().length?$("#email_host").val():null),o=0<$("#email_port").val().length?$("#email_port").val():null,s=$("#email_tls").is(":checked")?1:0,a=0<$("#email_from").val().length?$("#email_from").val():"root@localhost",i=$("#email_user").val().trim(),n=$("#email_password").val();let r="";var l="";null===t&&(r+='<li style="color: red;">You must specify an SMTP hostname!</li>'),null===o?r+='<li style="color: red;">You must specify an SMTP port!</li>':(null===o.match(/^\d+$/)||65535<Number.parseInt(o,10))&&(r+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'),0<r.length?(r="<ol>"+r+"</ol>",e.html(r)):null===(l=prompt("Enter an email address to send the test to:",null))||0===l.length||null===l.match(/.*@.*/)?e.html('<p style="color: red;">'+_("You must provide a recipient email address!")+"</p>"):$.post(scRoot+"/home/testEmail",{host:t,port:o,smtp_from:a,use_tls:s,user:i,pwd:n,to:l},e=>{$("#testEmail-result").html(e)})}),$("#testPushalot").on("click",function(){var e={};e.authToken=$.trim($("#pushalot_authorizationtoken").val()),e.authToken?($("#pushalot_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushalot-result").html(loading),$.post(scRoot+"/home/testPushalot",{authorizationToken:e.authToken}).done(e=>{$("#testPushalot-result").html(e),$("#testPushalot").prop("disabled",!1)})):($("#testPushalot-result").html(_("Please fill out the necessary fields above.")),$("#pushalot_authorizationtoken").addClass("warning"))}),$("#testGotify").on("click",function(){var e={};e.host=$.trim($("#gotify_host").val()),e.authToken=$.trim($("#gotify_authorizationtoken").val()),e.host&&e.authToken?($("#gotify_host,#gotify_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testGotify-result").html(loading),$.post(scRoot+"/home/testGotify",{host:e.host,authorizationToken:e.authToken}).done(e=>{$("#testGotify-result").html(e),$("#testGotify").prop("disabled",!1)})):($("#testGotify-result").html(_("Please fill out the necessary fields above.")),e.host?$("#gotify_host").removeClass("warning"):$("#gotify_host").addClass("warning"),e.authToken?$("#gotify_authorizationtoken").removeClass("warning"):$("#gotify_authorizationtoken").addClass("warning"))}),$("#testPushbullet").on("click",function(){var e={};e.api=$.trim($("#pushbullet_api").val()),e.api?($("#pushbullet_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushbullet-result").html(loading),$.post(scRoot+"/home/testPushbullet",{api:e.api}).done(e=>{$("#testPushbullet-result").html(e),$("#testPushbullet").prop("disabled",!1)})):($("#testPushbullet-result").html(_("Please fill out the necessary fields above.")),$("#pushbullet_api").addClass("warning"))}),$("#getPushbulletDevices").on("click",()=>{e("Device list updated. Please choose a device to push to.")}),e(),$("#email_show").on("change",()=>{const t=Number.parseInt($("#email_show").val(),10);$.getJSON(scRoot+"/home/loadShowNotifyLists",e=>{0<e._size&&$("#email_show_list").val(0<=t?e[t.toString()].list:"")})}),$("#prowl_show").on("change",()=>{const t=Number.parseInt($("#prowl_show").val(),10);$.getJSON(scRoot+"/home/loadShowNotifyLists",e=>{0<e._size&&$("#prowl_show_list").val(0<=t?e[t.toString()].prowl_notify_list:"")})}),t(),$("#email_show").on("notify",()=>{t()}),$("#prowl_show").on("notify",()=>{t()}),$("#email_show_save").on("click",()=>{$.post(scRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},()=>{t()})}),$("#prowl_show_save").on("click",()=>{$.post(scRoot+"/home/saveShowNotifyList",{show:$("#prowl_show").val(),prowlAPIs:$("#prowl_show_list").val()},()=>{t()})}),$("#use_plex_server").on("click",function(){this.checked?$(".plexinfo").removeClass("hide"):$(".plexinfo").addClass("hide")})},postProcessing(){$("#config-components").tabs(),$("#tv_download_dir").fileBrowser({title:_("Select TV Download Directory")}),$("#unpack_dir").fileBrowser({title:_("Select Unpack Directory")});const e=function(){let o;return function(e,t){clearTimeout(o),o=setTimeout(e,t)}}();function t(){var e={};e.pattern=$("#naming_pattern").val(),e.multi=$("#naming_multi_ep :selected").val(),e.animeType=$('input[name="naming_anime"]:checked').val(),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern},e=>{e?($("#naming_example").text(e+".ext"),$("#naming_example_div").show()):$("#naming_example_div").hide()}),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern,multi:e.multi},e=>{e?($("#naming_example_multi").text(e+".ext"),$("#naming_example_multi_div").show()):$("#naming_example_multi_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e.pattern,multi:e.multi},e=>{let t;"invalid"===e?(t=_("This pattern is invalid."),$("#naming_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):(t=_("This pattern is valid."),$("#naming_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF")),$("#naming_pattern").attr("title",t)})}function o(){var e=$("#naming_abd_pattern").val();$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e,abd:!0},e=>{e?($("#naming_abd_example").text(e+".ext"),$("#naming_abd_example_div").show()):$("#naming_abd_example_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e,abd:!0},e=>{let t;"invalid"===e?(t=_("This pattern is invalid."),$("#naming_abd_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_abd_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFFFDD")):(t=_("This pattern is valid."),$("#naming_abd_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_abd_pattern").qtip("toggle",!1),$("#naming_abd_pattern").css("background-color","#FFFFFF")),$("#naming_abd_pattern").attr("title",t)})}function s(){var e=$("#naming_sports_pattern").val();$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e,sports:!0},e=>{e?($("#naming_sports_example").text(e+".ext"),$("#naming_sports_example_div").show()):$("#naming_sports_example_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e,sports:!0},e=>{let t;"invalid"===e?(t=_("This pattern is invalid."),$("#naming_sports_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),$("#naming_sports_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFFFDD")):(t=_("This pattern is valid."),$("#naming_sports_pattern").qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_sports_pattern").qtip("toggle",!1),$("#naming_sports_pattern").css("background-color","#FFFFFF")),$("#naming_sports_pattern").attr("title",t)})}function a(){var e={};e.pattern=$("#naming_anime_pattern").val(),e.multi=$("#naming_anime_multi_ep :selected").val(),e.animeType=$('input[name="naming_anime"]:checked').val(),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern,anime_type:e.animeType},e=>{e?($("#naming_example_anime").text(e+".ext"),$("#naming_example_anime_div").show()):$("#naming_example_anime_div").hide()}),$.post(scRoot+"/config/postProcessing/testNaming",{pattern:e.pattern,multi:e.multi,anime_type:e.animeType},e=>{e?($("#naming_example_multi_anime").text(e+".ext"),$("#naming_example_multi_anime_div").show()):$("#naming_example_multi_anime_div").hide()}),$.post(scRoot+"/config/postProcessing/isNamingValid",{pattern:e.pattern,multi:e.multi,anime_type:e.animeType},e=>{let t;var o=$("#naming_anime_pattern");"invalid"===e?(t=_("This pattern is invalid."),o.qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),o.qtip("toggle",!0),o.css("background-color","#FFDDDD")):"seasonfolders"===e?(t=_('This pattern would be invalid without the folders, using it will force "Season Folders" on for all shows.'),o.qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-red"}),o.qtip("toggle",!0),o.css("background-color","#FFFFDD")):(t=_("This pattern is valid."),o.qtip("option",{"content.text":t,"style.classes":"qtip-rounded qtip-shadow qtip-green"}),o.qtip("toggle",!1),o.css("background-color","#FFFFFF")),o.attr("title",t)})}function i(){"custom..."===$("#name_presets :selected").val().toLowerCase()?$("#naming_custom").show():($("#naming_custom").hide(),$("#naming_pattern").val($("#name_presets :selected").attr("id"))),t()}function n(){"custom..."===$("#name_abd_presets :selected").val().toLowerCase()?$("#naming_abd_custom").show():($("#naming_abd_custom").hide(),$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))),o()}function r(){"custom..."===$("#name_sports_presets :selected").val().toLowerCase()?$("#naming_sports_custom").show():($("#naming_sports_custom").hide(),$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))),s()}function l(){"custom..."===$("#name_anime_presets :selected").val().toLowerCase()?$("#naming_anime_custom").show():($("#naming_anime_custom").hide(),$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))),a()}1!==Number.parseInt($("#unpack").val(),10)&&$("#content_unpack").hide(),$("#unpack").on("change",function(){var e=Number.parseInt(this.value,10);2!==e&&0!==e||($("#content_unpack").fadeOut("fast","linear"),$("#unpack").qtip("toggle",!1)),1===e&&($("#content_unpack").fadeIn("fast","linear"),$.post(scRoot+"/config/postProcessing/isRarSupported",e=>{"supported"!==e&&($("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#unpack").qtip("toggle",!0),$("#unpack").css("background-color","#FFFFDD"))}))}),$("#name_presets").on("change",i),$("#name_abd_presets").on("change",n),$("#naming_custom_abd").on("change",n),$("#name_sports_presets").on("change",r),$("#naming_custom_sports").on("change",r),$("#name_anime_presets").on("change",l),$("#naming_custom_anime").on("change",l),$('input[name="naming_anime"]').on("click",l),$("#naming_multi_ep").on("change",t),$("#naming_pattern").on("focusout",t),$("#naming_pattern").on("keyup",()=>{e(t,500)}),$("#naming_anime_multi_ep").on("change",a),$("#naming_anime_pattern").on("focusout",a),$("#naming_anime_pattern").on("keyup",()=>{e(a,500)}),$("#naming_abd_pattern").on("focusout",t),$("#naming_abd_pattern").on("keyup",()=>{e(o,500)}),$("#naming_sports_pattern").on("focusout",t),$("#naming_sports_pattern").on("keyup",()=>{e(s,500)}),$("#naming_anime_pattern").on("focusout",t),$("#naming_anime_pattern").on("keyup",()=>{e(a,500)}),$("#show_naming_key").on("click",()=>{$("#naming_key").toggle()}),$("#show_naming_abd_key").on("click",()=>{$("#naming_abd_key").toggle()}),$("#show_naming_sports_key").on("click",()=>{$("#naming_sports_key").toggle()}),$("#show_naming_anime_key").on("click",()=>{$("#naming_anime_key").toggle()}),$("#do_custom").on("click",()=>{$("#naming_pattern").val($("#name_presets :selected").attr("id")),$("#naming_custom").show(),$("#naming_pattern").focus()}),i(),n(),r(),l(),$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()}),$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){var e=$(this).attr("id");$("#metadataType :selected").val()===e?$(this).show():$(this).hide()})},$(this).showHideMetadata(),$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(!1)}),$.fn.refreshMetadataConfig=function(e){let m=0,_="";$(".metadataDiv").each(function(){var e=$(this).attr("id"),t=[],o=$("#"+e+"_show_metadata").is(":checked"),s=$("#"+e+"_episode_metadata").is(":checked"),a=$("#"+e+"_fanart").is(":checked"),i=$("#"+e+"_poster").is(":checked"),n=$("#"+e+"_banner").is(":checked"),r=$("#"+e+"_episode_thumbnails").is(":checked"),l=$("#"+e+"_season_posters").is(":checked"),c=$("#"+e+"_season_banners").is(":checked"),d=$("#"+e+"_season_all_poster").is(":checked"),h=$("#"+e+"_season_all_banner").is(":checked");t.push(o?"1":"0",s?"1":"0",a?"1":"0",i?"1":"0",n?"1":"0",r?"1":"0",l?"1":"0",c?"1":"0",d?"1":"0",h?"1":"0");let p=0;for(const u of t)p+=Number.parseInt(u,10);p>m&&(m=p,_=e),$("#"+e+"_eg_show_metadata").attr("class",o?"enabled":"disabled"),$("#"+e+"_eg_episode_metadata").attr("class",s?"enabled":"disabled"),$("#"+e+"_eg_fanart").attr("class",a?"enabled":"disabled"),$("#"+e+"_eg_poster").attr("class",i?"enabled":"disabled"),$("#"+e+"_eg_banner").attr("class",n?"enabled":"disabled"),$("#"+e+"_eg_episode_thumbnails").attr("class",r?"enabled":"disabled"),$("#"+e+"_eg_season_posters").attr("class",l?"enabled":"disabled"),$("#"+e+"_eg_season_banners").attr("class",c?"enabled":"disabled"),$("#"+e+"_eg_season_all_poster").attr("class",d?"enabled":"disabled"),$("#"+e+"_eg_season_all_banner").attr("class",h?"enabled":"disabled"),$("#"+e+"_data").val(t.join("|"))}),""!==_&&e&&($("#metadataType option[value="+_+"]").attr("selected","selected"),$(this).showHideMetadata())},$(this).refreshMetadataConfig(!0),$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search(){$("#config-components").tabs(),$("#nzb_dir").fileBrowser({title:_("Select .nzb black hole/watch location")}),$("#torrent_dir").fileBrowser({title:_("Select torrent black hole/watch location")}),$("#torrent_path").fileBrowser({title:_("Select torrent download location")}),$("#torrent_path_incomplete").fileBrowser({title:_("Select torrent incomplete download location")}),$.fn.nzbMethodHandler=function(){var e=$("#nzb_method :selected").val(),t="#blackhole_settings",o="#sabnzbd_settings",s="#testSABnzbd",a="#testSABnzbd_result",i="#nzbget_settings",n="#download_station_settings",r="#testDSM",l="#testDSM_result";$("#nzb_method_icon").removeClass((e,t)=>(t.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")),$("#nzb_method_icon").addClass("add-client-icon-"+e.replace("_","-")),$(t).hide(),$(o).hide(),$(s).hide(),$(a).hide(),$(i).hide(),$(n).hide(),$(r).hide(),$(l).hide(),("blackhole"===e.toLowerCase()?$(t):"nzbget"===e.toLowerCase()?$(i):"download_station"===e.toLowerCase()?($("#host_title").text("Synology host:port"),$("#username_title").text("Synology Username"),$("#password_title").text("Synology Password"),$(n).show(),$(r).show(),$(l)):($(o).show(),$(s).show(),$(a))).show()},$.torrentMethodHandler=()=>{$("#options_torrent_clients").hide(),$("#options_torrent_blackhole").hide();var e=$("#torrent_method :selected").val();let t="#options_torrent_blackhole",o="";$("#torrent_method_icon").removeClass((e,t)=>(t.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")),$("#torrent_method_icon").addClass("add-client-icon-"+e.replace("_","-")),"blackhole"!==e.toLowerCase()&&($("#torrent_host_option").show(),$("#host_desc_torrent").show(),$("#torrent_rpcurl_option").hide(),$("#torrent_auth_type_option").hide(),$("#torrent_verify_cert_option").hide(),$('label[for="torrent_verify_cert"]').text(_("verify SSL certificates for HTTPS requests")),$("#username_title.component-title").text(_("Client username")),$("#torrent_username_option").show(),$("#password_title.component-title").text(_("Client password")),$("#torrent_password_option").show(),$('label[for="torrent_password"]').text(_("(blank for none)")),$("#torrent_path_option").show(),$("#torrent_path_option").find(".fileBrowser").show(),$("#torrent_path_incomplete_option").hide(),$("#path_synology").hide(),$("#torrent_seed_time_option").hide(),$("#torrent_high_bandwidth_option").hide(),$("#torrent_paused_option").show(),$("#torrent_label_option").show(),$("#label_warning_deluge").hide(),$("#label_anime_warning_deluge").hide(),$("#test_torrent_result").text(_("Click below to test")),"utorrent"===e.toLowerCase()?(o="uTorrent",$("#torrent_path_option").hide(),$("#torrent_seed_time_label").text(_("Minimum seeding time is")),$("#torrent_seed_time_option").show(),$("#host_desc_torrent").text(_("URL to your uTorrent client (e.g. http://localhost:8000)"))):"transmission"===e.toLowerCase()?(o="Transmission",$("#torrent_seed_time_label").text(_("Stop seeding when inactive for")),$("#torrent_seed_time_option").show(),$("#torrent_high_bandwidth_option").show(),$("#torrent_path_incomplete_option").show(),$("#torrent_label_option").hide(),$("#torrent_rpcurl_option").show(),$("#host_desc_torrent").text(_("URL to your Transmission client (e.g. http://localhost:9091)"))):e.toLowerCase().startsWith("deluge")?($("#torrent_verify_cert_option").show(),$("#label_warning_deluge").show(),$("#label_anime_warning_deluge").show(),$("#torrent_path_incomplete_option").show(),"deluged"===e.toLowerCase()?(o="Deluge Daemon",$("#torrent_username_option").show(),$("#host_desc_torrent").text(_("IP or Hostname of your Deluge Daemon (e.g. http://localhost:58846)"))):(o="Deluge",$("#torrent_username").prop("value",""),$("#torrent_username_option").hide(),$("#host_desc_torrent").text(_("URL to your Deluge client (e.g. http://localhost:8112)"))),$('label[for="torrent_verify_cert"]').text(_('disable if you get "Deluge: Authentication Error" in your log'))):"download_station"===e.toLowerCase()?(o="Synology DS",$("#torrent_label_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_path_option").find(".fileBrowser").hide(),$("#host_desc_torrent").text(_("URL to your Synology DS client (e.g. http://localhost:5000)")),$("#path_synology").show()):"rtorrent"===e.toLowerCase()?(o="rTorrent",$("#host_desc_torrent").html(_("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)")),$("#torrent_verify_cert_option").show(),$("#torrent_auth_type_option").show()):"qbittorrent"===e.toLowerCase()?(o="qBittorrent",$("#torrent_path_option").show(),$("#torrent_path_option").find(".fileBrowser").show(),$("#torrent_path_incomplete_option").show(),$("#torrent_seed_time_label").text(_("Stop seeding after")),$("#torrent_seed_time_option").show(),$("#label_warning_qbittorrent").show(),$("#label_anime_warning_qbittorrent").show(),$("#torrent_verify_cert_option").show(),$("#host_desc_torrent").text(_("URL to your qBittorrent client (e.g. http://localhost:8080)"))):"mlnet"===e.toLowerCase()?(o="mlnet",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_paused_option").hide(),$("#host_desc_torrent").text(_("URL to your MLDonkey (e.g. http://localhost:4080)"))):"putio"===e.toLowerCase()&&(o="putio",$("#torrent_path_option").hide(),$("#torrent_label_option").hide(),$("#torrent_paused_option").hide(),$("#torrent_host_option").hide(),$("#host_desc_torrent").text(_("URL to your putio client (e.g. http://localhost:8080)")),$('label[for="torrent_password"]').html('<a href="'+anonURL+'https://app.put.io/oauth/apps/new" target="_blank">'+_("Create a new OAuth app for put.io")+"</a>"),$("#username_title.component-title").text(_("Put.io Parent Folder")),$("#password_title.component-title").text(_("Put.io OAuth Token"))),$("#host_title").text(o+" host:port"),$("#username_title").text(o+" Username"),$("#password_title").text(o+" Password"),$("#torrent_client").text(o),$("#rpcurl_title").text(o+" RPC URL"),t="#options_torrent_clients"),$(t).show()},$("#torrent_host").on("input",()=>{$("#torrent_method :selected").val().toLowerCase().startsWith("rtorrent")&&("scgi://"===$("#torrent_host").val().slice(0,7)?($("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#torrent_password_option").hide(),$("#torrent_password").prop("value",""),$("#torrent_auth_type_option").hide(),$("#torrent_auth_type option[value=none]").attr("selected","selected")):($("#torrent_username_option").show(),$("#torrent_password_option").show(),$("#torrent_auth_type_option").show()))}),$("#nzb_method").on("change",$(this).nzbMethodHandler),$(this).nzbMethodHandler(),$("#testSABnzbd").on("click",()=>{var e={};$("#testSABnzbd_result").html(loading),e.host=$("#sab_host").val(),e.username=$("#sab_username").val(),e.password=$("#sab_password").val(),e.apiKey=$("#sab_apikey").val(),$.post(scRoot+"/home/testSABnzbd",{host:e.host,username:e.username,password:e.password,apikey:e.apiKey},e=>{$("#testSABnzbd_result").html(e)})}),$("#testDSM").on("click",()=>{var e={};$("#testDSM_result").html(loading),e.host=$("#syno_dsm_host").val(),e.username=$("#syno_dsm_user").val(),e.password=$("#syno_dsm_pass").val(),$.post(scRoot+"/home/testDSM",{host:e.host,username:e.username,password:e.password},e=>{$("#testDSM_result").html(e)})}),$("#torrent_method").on("change",$.torrentMethodHandler),$.torrentMethodHandler(),$("#test_torrent").on("click",()=>{var e={};$("#test_torrent_result").html(loading),e.method=$("#torrent_method :selected").val(),e.host=$("#torrent_host").val(),e.username=$("#torrent_username").val(),e.password=$("#torrent_password").val(),$.post(scRoot+"/home/testTorrent",{torrent_method:e.method,host:e.host,username:e.username,password:e.password},e=>{$("#test_torrent_result").html(e)})}),$("#testFlareSolverr").on("click",function(){var e=$.trim($("#flaresolverr_uri").val());e?($("#flaresolverr_uri").removeClass("warning"),$(this).prop("disabled",!0),$("#testFlaresolverr-result").html(loading),$.post(scRoot+"/home/testFlareSolverr",{flaresolverr_uri:e}).done(e=>{$("#testFlaresolverr-result").html(e),$("#testFlareSolverr").prop("disabled",!1)})):($("#testFlaresolverr-result").html(_("Please fill out the necessary fields above.")),$("#flaresolverr_uri").addClass("warning"))})},subtitles(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){var e=$(this).attr("id");$("#editAService :selected").val()+"Div"===e?$(this).show():$(this).hide()})},$.fn.addService=function(e,t,o,s,a,i){null===o.match("/$")&&(o+="/"),0===$("#service_order_list > #"+e).length&&!1!==i&&(i=(i=(i=(i="")+'<li class="ui-state-default" id="'+e+'"> <input type="checkbox" id="enable_'+e+'" class="service_enabler" checked> ')+'<a href="'+anonURL+o+'" class="imgLink" target="_new">')+'<img src="'+scRoot+'/images/services/newznab.gif" alt="'+t+'" width="16" height="16"></a> '+t+"</li>",$("#service_order_list").append(i),$("#service_order_list").sortable("refresh"))},$.fn.deleteService=function(e){$("#service_order_list > #"+e).remove()},$.fn.refreshServiceList=function(){var e=$("#service_order_list").sortable("toArray");const s=[];$.each(e,(e,t)=>{var o=$("#enable_"+t).is(":checked")?"1":"0";s.push(t+":"+o)}),$("#service_order").val(s.join(" "))},$("#editAService").on("change",function(){$(this).showHideServices()}),$(".service_enabler").on("click",function(){$(this).refreshServiceList()}),$(this).showHideServices(),$("#service_order_list").sortable({placeholder:"ui-state-highlight",update(){$(this).refreshServiceList()},create(){$(this).refreshServiceList()}}),$("#service_order_list").disableSelection()},providers(){console.log("This function need to be filled with ConfigProviders.js but can't be as we've got scope issues currently.")}},home:{init(){$("#showTabs").tabs({activate(){$(".show-grid").isotope("layout")}})},index(){function o(e){let t=0,o=0,s=0,a=0;a=e<125?(s=3,4):e<175?(t=9,o=40,s=4,5):(t=11,o=50,s=6),$("#posterPopup").remove(),void 0===t?$(".show-details").hide():($(".show-details").show(),$(".show-dlstats, .show-quality").css("fontSize",t),$(".show-network-image").css("width",o)),$(".show-container").css({width:e,borderWidth:a,borderRadius:s})}$(".resetsorting").on("click",()=>{$("table").trigger("filterReset")}),$("#filterShowName").on("input",__.debounce(()=>{$(".show-grid").isotope({filter(){return $(this).find(".show-title").html().trim().toLowerCase().includes($("#filterShowName").val().toLowerCase())}})},500));let e;o(e="number"==typeof(e="undefined"!=typeof Storage?Number.parseInt(localStorage.getItem("posterSize"),10):e)&&!Number.isNaN(e)?e:188),$("#posterSizeSlider").slider({min:75,max:250,value:e,change(e,t){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",t.value),o(t.value),$(".show-grid").isotope("layout")}}),$("#rootDirSelect").on("change",()=>{$("#rootDirForm").submit()}),$(".progressbar").each(function(){var e=$(this).data("progress-percentage"),t=Math.max(20,e-e%20);$(this).progressbar({value:e}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+t)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()}),$("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0(e){return $(e).find("time").attr("datetime")},1(e){return $(e).find("time").attr("datetime")},2(e){return latinize($(e).text().normalize("NFC"))},3(e){return($(e).find("span").prop("title")||"zunknown").toLowerCase()},4(e){return $(e).find("span").text().toLowerCase()},5(e){var t=$(e).find("div").attr("data-progress-percentage"),t=void 0===t?Number.NEGATIVE_INFINITY:0<t.length&&Number.parseFloat(t)||0,e=$(e).find("div").attr("data-progress-total");return 100*t*1e3+(void 0===e?Number.NEGATIVE_INFINITY:0<e.length&&Number.parseInt(e,10)||0)},6(e){return $(e).data("show-size")},7(e){return($(e).find("span").attr("title")||"No").toLowerCase()}},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"digit"},6:{sorter:"digit"},7:{filter:"parsed"}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,stickyHeaders_offset:50,filter_saveFilters:!1,filter_functions:{5(e,t,o){let s=!1;var a,t=Math.floor(t%1*1e3);return s=""!==o&&((a=o.match(/(<|<=|>=|>)\s?(\d+)/i))&&(0,{"<"(e,t){return e<t},"<="(e,t){return e<=t},">="(e,t){return t<=e},">"(e,t){return t<e}}[a[1]])(t,Number.parseInt(a[2],10))&&(s=!0),(a=o.match(/(\d+)\s(-|to)\s+(\d+)/i))&&("-"===a[2]||"to"===a[2])&&t>=Number.parseInt(a[1],10)&&t<=Number.parseInt(a[3],10)&&(s=!0),!(a=o.match(/(=)?\s?(\d+)\s?(=)?/i))||"="!==a[1]&&"="!==a[3]||Number.parseInt(a[2],10)!==t||(s=!0),Number.isNaN(Number.parseFloat(o))||!Number.isFinite(o)||Number.parseInt(o,10)!==t)?s:!0}},columnSelector_mediaquery:!1},sortStable:!0,sortAppend:[[2,0]]}),$(".show-grid").imagesLoaded(()=>{let e;switch(getMeta("settings.POSTER_SORTBY")){case"progress":e=["progress","total","name"];break;case"date":e=["date","status","name"];break;case"status":e=["status","progress","name"];break;default:e=getMeta("settings.POSTER_SORTBY")}$(".loading-spinner").hide(),$(".show-grid").show().isotope({itemSelector:".show-container",sortBy:e,sortAscending:getMeta("settings.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:!0,horizontalOrder:!0},getSortData:{name(e){var e=$(e).attr("data-name")||"",t=new RegExp("^((?:"+getMeta("settings.GRAMMAR_ARTICLES")+")\\s)","i");return latinize((metaToBool("settings.SORT_ARTICLE")?e:e.replace(t,"")).toLowerCase().normalize("NFC"))},network:"[data-network]",date(e){e=$(e).attr("data-date");return 0<e.length&&Number.parseInt(e,10)||Number.POSITIVE_INFINITY},progress(e){e=$(e).attr("data-progress");return 0<e.length&&Number.parseFloat(e)||0},total(e){e=$(e).attr("data-progress-total");return 0<e.length&&Number.parseInt(e,10)||0},status:"[data-status]"}});let p=null;$(".show-container").on("mouseenter",function(){const h=$(this);"width: 0px;"===h.find(".show-network-image")[0].style.cssText&&(p=setTimeout(()=>{p=null,$("#posterPopup").remove();var e=h.clone().attr({id:"posterPopup"});const t=h.offset().left,o=h.width(),s=h.height(),a=h.offset().top;e.css({position:"absolute",margin:0,top:a,left:t,zIndex:9999}),e.find(".show-details").show(),e.on("mouseleave",function(){$(this).animate({height:s+8,width:o+8,top:a,left:t})}),e.appendTo("body");let i=a+h.height()/2-219,n=t+h.width()/2-125;var r=$(window).scrollTop(),l=$(window).scrollLeft(),c=r+$(window).innerHeight(),d=l+$(window).innerWidth();i<r+5&&(i=r+5),n<l+5&&(n=l+5),i+438+5>c&&(i=c-438-5),n+250+5>d&&(n=d-250-5),e.animate({top:i,left:n,width:250,height:438})},300))}).on("mouseleave",()=>{null!==p&&clearTimeout(p)})}),$("#layout").on("change",function(){window.location.href=$(this).find("option:selected").val()}),$("#postersort").on("change",function(){let e;switch($(this).val()){case"progress":e=["progress","total","name"];break;case"date":e=["date","status","name"];break;case"status":e=["status","progress","name"];break;default:e=getMeta("settings.POSTER_SORTBY")}$(".show-grid").isotope({layoutMode:"masonry",masonry:{isFitWidth:!0,horizontalOrder:!0},sortBy:e,getSortData:{name(e){var e=$(e).attr("data-name")||"",t=new RegExp("^((?:"+getMeta("settings.GRAMMAR_ARTICLES")+")\\s)","i");return latinize((metaToBool("settings.SORT_ARTICLE")?e:e.replace(t,"")).toLowerCase().normalize("NFC"))},network:"[data-network]",date(e){e=$(e).attr("data-date");return 0<e.length&&Number.parseInt(e,10)||Number.POSITIVE_INFINITY},progress(e){e=$(e).attr("data-progress");return 0<e.length&&Number.parseFloat(e)||0},total(e){e=$(e).attr("data-progress-total");return 0<e.length&&Number.parseInt(e,10)||0},status:"[data-status]"}}),$.post($(this).find("option:selected").data("sort"))}),$("#postersortdirection").on("change",function(){$(".show-grid").isotope({layoutMode:"masonry",masonry:{isFitWidth:!0,horizontalOrder:!0},sortAscending:"true"===$(this).val(),getSortData:{name(e){var e=$(e).attr("data-name")||"",t=new RegExp("^((?:"+getMeta("settings.GRAMMAR_ARTICLES")+")\\s)","i");return latinize((metaToBool("settings.SORT_ARTICLE")?e:e.replace(t,"")).toLowerCase().normalize("NFC"))},network:"[data-network]",date(e){e=$(e).attr("data-date");return 0<e.length&&Number.parseInt(e,10)||Number.POSITIVE_INFINITY},progress(e){e=$(e).attr("data-progress");return 0<e.length&&Number.parseFloat(e)||0},total(e){e=$(e).attr("data-progress-total");return 0<e.length&&Number.parseInt(e,10)||0},status:"[data-status]"}}),$.post($(this).find("option:selected").data("sort"))}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$.tablesorter.columnSelector.attachTo($("#showListTableShows"),"#popover-target"),metaToBool("settings.ANIME_SPLIT_HOME")&&$.tablesorter.columnSelector.attachTo($("#showListTableAnime"),"#popover-target")})},displayShow(){var e;function i(e){e.on("click.disabled",!1),e.prop("enableClick","1"),e.fadeTo("fast",1)}function n(e){e.off("click.disabled"),e.prop("enableClick","0"),e.fadeTo("fast",.5)}metaToBool("settings.FANART_BACKGROUND")&&(e=getMeta("showBackgroundImage")||scRoot+"/cache/images/"+$("#showID").attr("value")+".fanart.jpg",$.backstretch(e),$(".backstretch").css("opacity",getMeta("settings.FANART_BACKGROUND_OPACITY")).fadeIn("500")),$(".displayShowTable").tablesorter({widgets:["saveSort","stickyHeaders","columnSelector"],widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox"/>{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked",stickyHeaders_offset:50}}),$(".displayShowTable").ajaxEpSearch({colorRow:!0}),$(".play-on-kodi").on("click",function(){if("0"!==$(this).prop("enableClick")){const s=$(this),a=$("#playOnKodiModal");$("#playOnKodiModal .btn.btn-success").on("click",()=>{n(s),a.modal("hide");const t=s.children("img"),o=(t.hide(),s.append($("<span/>").attr({class:"loading-spinner16",title:"Playing"})),s.children("span"));var e=$("#kodi-play-host").val();return $.getJSON(s.prop("href")+"&host="+e,e=>{"failure"===e.result.toLowerCase()?(o.prop("class","displayshow-icon-disable"),o.prop("title","Failed")):(t.prop("title","Success"),t.prop("alt","Success"),o.hide(),t.show())}),i(s),!1}),a.modal("show")}return!1}),$(".epSubtitlesSearch").on("click",function(){if("0"!==$(this).prop("enableClick")){n($(this));const o=$(this).parent().siblings(".col-subtitles"),s=$(this).children("span");s.prop("class","loading-spinner16"),s.prop("title","Searching"),$.getJSON($(this).attr("href"),function(e){var t;"failure"!==e.result.toLowerCase()&&"no subtitles downloaded"!==e.result.toLowerCase()?(t=e.subtitles.split(","),o.empty(),$.each(t,(e,t)=>{""!==t&&o.append($("<img/>",{src:scRoot+"/images/subtitles/flags/"+t+".png",alt:t,width:16,height:11}))}),s.prop("class","displayshow-icon-sub"),i($(this))):s.prop("class","displayshow-icon-disable"),s.prop("title",e.result)})}return!1}),$(".epRetrySubtitlesSearch").on("click",function(){if("0"!==$(this).prop("enableClick")){const e=$(this),s=$("#confirmSubtitleDownloadModal");$("#confirmSubtitleDownloadModal .btn.btn-success").on("click",()=>{n(e),s.modal("hide");const t=e.children("img"),o=(t.hide(),e.append($("<span/>").attr({class:"loading-spinner16",title:"Searching"})),e.children("span"));return $.getJSON(e.prop("href"),e=>{"failure"===e.result.toLowerCase()?(o.prop("class","displayshow-icon-disable"),o.prop("title","Failed")):(t.prop("title","Success"),t.prop("alt","Success"),o.hide(),t.show())}),i(e),!1}),s.modal("show")}return!1}),$("#seasonJump").on("change",()=>{var e=$("#seasonJump option:selected"),t=e.val();t&&"jump"!==t&&(e=e.data("season"),$("html,body").animate({scrollTop:$("#"+t.slice(1)).offset().top-50},"slow"),$("#collapseSeason-"+e).collapse("show"),location.hash=t),$(this).val("jump")}),$("#seasonJumpLinks a").on("click",e=>{e=$(e.target).data("season");return $("html,body").animate({scrollTop:$("#"+e).offset().top-50},"slow"),$("#collapseSeason-"+e).collapse("show"),location.hash=e,!1}),$("#prevShow").on("click",()=>{$("#pickShow option:selected").prev("option").prop("selected","selected"),$("#pickShow").change()}),$("#nextShow").on("click",()=>{$("#pickShow option:selected").next("option").prop("selected","selected"),$("#pickShow").change()}),$("#changeStatus").on("click",()=>{const e=[];if($(".epCheck").each(function(){!0===this.checked&&e.push($(this).attr("id"))}),0===e.length)return!1;var t={show:$("#showID").attr("value"),eps:e,status:$("#statusSelect").val()};$.post(scRoot+"/home/setStatus",t,()=>{location.reload(!0)})}),$(".seasonCheck").on("click",function(){const e=this.checked;var t=$(this).attr("id");$("#collapseSeason-"+t).collapse("show"),$('.epCheck:visible[id^="'+t+'x"]').each(function(){this.checked=e})});let o=null;function d(e,t){return e?($(t).css({"background-color":"#90EE90",color:"#FFF","font-weight":"bold"}),!0):($(t).css({"background-color":"#FF0000",color:"#FFF!important","font-weight":"bold"}),!1)}$(".epCheck").on("click",function(e){if(o&&e.shiftKey){const t=this;let e=0;$(".epCheck").each(function(){if(2===e)return!1;1===e&&(this.checked=o.checked),this!==t&&this!==o||e++})}else o=this}),$(".seriesCheck").on("click",()=>{$(".epCheck:visible").each(function(){this.checked=!0}),$(".seasonCheck:visible").each(function(){this.checked=!0})}),$(".clearAll").on("click",()=>{$(".epCheck:visible").each(function(){this.checked=!1}),$(".seasonCheck:visible").each(function(){this.checked=!1})}),$("#pickShow").on("change",function(){var e=$(this).val();0!==e&&(window.location.href=scRoot+"/home/displayShow?show="+e)}),$("#checkboxControls input").on("change",function(){var e=$(this).attr("id");$(this).showHideRows(e)}),$("#checkboxControls input").each(function(){const e=this.checked;$("tr."+$(this).attr("id")).each(function(){e?$(this).show():$(this).hide()})}),$.fn.showHideRows=function(e){const t=$("#checkboxControls > input, #"+e).is(":checked");$("tr."+e).each(function(){t?$(this).show():$(this).hide()}),$("div.seasonheader").each(function(){let e=0;var t=$(this).attr("data-season-id");$("tr.season-"+t+" :visible").each(()=>{e++}),0===e?($(this).hide(),$("#"+t+"-cols").hide()):($(this).show(),$("#"+t+"-cols").show())})},$(".sceneSeasonXEpisode").on("change",function(){$(this).val($(this).val().replaceAll(/[^\dxX]*/g,""));var e=$(this).attr("data-for-season"),t=$(this).attr("data-for-episode"),o=$(this).val().match(/^(\d+)x(\d+)$/i),s=$(this).val().match(/^(\d+)$/i);let a=null,i=null,n;if(n=o?(a=o[1],i=o[2],d(!0,$(this))):s?(a=e,i=s[1],d(!0,$(this))):d(!1,$(this))){var r=e;var l=t;o=a;s=i;const c=$("#showID").val();e=$("#indexer").val();$.getJSON(scRoot+"/home/setSceneNumbering",{show:c,indexer:e,forSeason:r,forEpisode:l,sceneSeason:""===o?null:o,sceneEpisode:""===s?null:s},e=>{null===e.sceneSeason||null===e.sceneEpisode?$("#sceneSeasonXEpisode_"+c+"_"+r+"_"+l).val(""):$("#sceneSeasonXEpisode_"+c+"_"+r+"_"+l).val(e.sceneSeason+"x"+e.sceneEpisode),e.success||(e.errorMessage?notifyModal(e.errorMessage):notifyModal("Update failed."))})}}),$(".sceneAbsolute").on("change",function(){$(this).val($(this).val().replaceAll(/[^\dxX]*/g,""));var e=$(this).attr("data-for-absolute"),t=$(this).val().match(/^(\d{1,3})$/i);let o=null;t&&(o=t[1]);{var s=e;t=o;const a=$("#showID").val();e=$("#indexer").val(),$.getJSON(scRoot+"/home/setSceneNumbering",{show:a,indexer:e,forAbsolute:s,sceneAbsolute:""===t?null:t},e=>{null===e.sceneAbsolute?$("#sceneAbsolute_"+a+"_"+s).val(""):$("#sceneAbsolute_"+a+"_"+s).val(e.sceneAbsolute),e.success||(e.errorMessage?notifyModal(e.errorMessage):notifyModal("Update failed."))})}}),$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each((e,t)=>{$(t).html($("<span/>").width(12*$(t).text()))})},$(".imdbstars").generateStars(),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$(".displayShowTable").each((e,t)=>{$.tablesorter.columnSelector.attachTo(t,"#popover-target")})}),$(()=>{$(".collapse.toggle").on("hide.bs.collapse",function(){var e=/collapseSeason-(\d+)/g.exec(this.id);$("#showseason-"+e[1]).text(_("Show Episodes"))}),$(".collapse.toggle").on("show.bs.collapse",function(){var e=/collapseSeason-(\d+)/g.exec(this.id);$("#showseason-"+e[1]).text(_("Hide Episodes"))})})},editShow(){$("#location").fileBrowser({title:_("Select Show Location")}),SICKCHILL.common.QualityChooser.init(),$("#submit").on("click",()=>{var e=$("#exceptions_list").find("optgroup").get().map(e=>{var t=$(e).data("season"),e=$(e).find("option:enabled").get().map(e=>{e=$(e).val();return encodeURIComponent(e)}).join("|");return 0===e.length?null:[t,e].join(":")}).filter(Boolean);$("#exceptions").val(e),metaToBool("show.is_anime")&&generateBlackWhiteList()}),$("#addSceneName").on("click",()=>{var e=$("#SceneSeason").find(":selected").data("season"),t=$("#SceneName").val(),o=$('.exceptions_list optgroup[data-season="'+e+'"]').get()[0],s=$(o).find("option.empty");new Set($(o).find("option:not(.empty)").get().map(e=>$(e).val())).has(t)||""===t.trim()||(e=$("<option data-season="+e+">").text(t).val(t),$(o).append(e),s.remove()),$("#SceneName").val("")}),$("#removeSceneName").on("click",()=>{var e,t=$("#exceptions_list").find("option:selected"),o=t.closest("optgroup");o.find("option").length<2&&((e=$('<option disabled class="empty">')).text(_("None")),o.append(e)),t.remove()}),$(".custom-image").imageSelector()},manual_search_show_releases(){$("#manualSearchShowTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],textExtraction:{0(e){return $(e).attr("title")}},headers:{3:{sorter:"quality"},4:{sorter:"metric"},7:{sorter:!1,filter:!1}},widgetOptions:{filter_hideFilters:!0}})},postProcess(){$("#episodeDir").fileBrowser({title:_("Select Unprocessed Episode Folder"),key:"postprocessPath"})},status(){$("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra"],textExtraction:{5(e){return $(e).data("seconds")},6(e){return $(e).data("seconds")}},headers:{5:{sorter:"digit"},6:{sorter:"digit"}}}),$("#queueStatusTable").tablesorter({widgets:["saveSort","zebra"],sortList:[[3,0],[4,0],[2,1]]})},restart(){let t=scPID,o=setTimeout(()=>{setInterval(()=>{$.post(scRoot+"/home/is-alive/",e=>{void 0!==e&&e.msg===t||($("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()),void 0!==e&&"nope"!==e.msg&&e.msg!==t&&(clearInterval(o),$("#restart_loading").hide(),$("#restart_success").show(),$("#refresh_message").show(),scPID=e.msg,t=e.msg,o=setInterval(()=>{$.post(scRoot+"/home/is-alive/",()=>{clearInterval(o),setTimeout(()=>{window.location=scRoot+"/"+scDefaultPage+"/"},3e3)},"jsonp")},1e3))},"jsonp").fail(()=>{$("#restart_message").show(),$("#shut_down_loading").hide(),$("#shut_down_success").show()})},1e3)},5e3)}},manage:{init(){$.makeEpisodeRow=function(e,t,o,s,a){var i="";return(i+=' <tr class="'+$("#row_class").val()+" show-"+e+'">')+('  <td class="tableleft" align="center"><input type="checkbox" class="'+e+'-epcheck" name="'+e+"-"+t+"x"+o+'"'+(a?" checked":"")+"></td>")+("  <td>"+t+"x"+o+"</td>")+('  <td class="tableright" style="width: 100%">'+s+"</td>")+" </tr>"},$.makeSubtitleRow=function(e,t,o,s,a,i){let n="";if(n=(n+='<tr class="good show-'+e+'">')+('<td class="text-center"><input type="checkbox" class="'+e+'-epcheck" name="'+e+"-"+t+"x"+o+'"'+(i?" checked":"")+"></td>")+('<td style="width: 2%;">'+t+"x"+o+"</td>"),0<a.length){n+='<td style="width: 8%;">';for(const r in a=a.split(","))Object.hasOwn(a,r)&&(n+='<img src="'+scRoot+"/images/subtitles/flags/"+a[r]+'.png" width="16" height="11" alt="'+a[r]+'" />&nbsp;');n+="</td>"}else n+='<td style="width: 8%;">None</td>';return n=n+("<td>"+s+"</td>")+"</tr>"},$("#config_save_button").on("click",()=>{$("#configForm").submit()})},index(){function t(e){return"Y"===e?"Yes":"No"}$("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],widthFixed:!0,textExtraction:{2(e){return $(e).find("img").attr("alt")||"unknown"},3(e){return $(e).find("span").text()},4(e){return t($(e).find("span").attr("title"))},5(e){return t($(e).find("span").attr("title"))},6(e){return t($(e).find("span").attr("title"))},7(e){return t($(e).find("span").attr("title"))},8(e){return t($(e).find("span").attr("title"))},9(e){return t($(e).find("span").attr("title"))},10(e){return $(e).text()},11(e){return $(e).text()},12(e){return $(e).text()}},widgets:["zebra","filter","columnSelector","saveSort","stickyHeaders"],headers:{0:{sorter:!1,filter:!1},1:{sorter:"loadingNames"},2:{sorter:"network"},3:{sorter:"quality"},4:{sorter:"sports"},5:{sorter:"scene"},6:{sorter:"anime"},7:{sorter:"flatfold"},8:{sorter:"paused"},9:{sorter:"subtitle"},10:{sorter:"default_ep_status"},11:{sorter:"status"},12:{sorter:"roootDirs"},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1},16:{sorter:!1},17:{sorter:!1},18:{sorter:!1}},widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox"/>{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked",columnSelector_columns:{12:!1},stickyHeaders_offset:50,filter_cssFilter:"text-center text-capitalize",filter_hideFilters:!1,filter_ignoreCase:!0,filter_reset:".resetsorting"}}),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$.tablesorter.columnSelector.attachTo($("#massUpdateTable"),"#popover-target")}),$(".submitMassUpdate").on("click",e=>{e.preventDefault();const t=$('[name="massUpdateForm"]');e=$(".deleteCheck:checked");0<e.length?$.confirm({title:"Delete Shows",text:"You have selected to delete "+e.length+" show(s).  Are you sure you wish to continue? All files will be removed from your system.",confirm(){t.submit()},cancel(){$(".deleteCheck:checked").prop("checked",!1),t.submit()}}):t.submit()})},backlogOverview(){$("#pickShow").on("change",e=>{e=$(e.currentTarget).val();e&&$("html,body").animate({scrollTop:$("#show-"+e).offset().top-25},"slow")})},failedDownloads(){$("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra"],sortList:[[1,0]],headers:{3:{sorter:!1}}}),$("#limit").on("change",e=>{window.location.href=scRoot+"/manage/failedDownloads/?limit="+$(e.currentTarget).val()}),$("#submitMassRemove").on("click",()=>{const e=[];if($(".removeCheck").each(function(){!0===this.checked&&e.push($(this).attr("id").split("-")[1])}),0===e.length)return!1;$.post(scRoot+"/manage/failedDownloads",{remove:e},()=>{location.reload(!0)})}),0<$(".removeCheck").length&&$(".removeCheck").each(o=>{let s=null;$(o).on("click",function(e){if(s&&e.shiftKey){const t=this;let e=0;$(o+":visible").each(function(){if(2===e)return!1;1===e&&(this.checked=s.checked),this!==t&&this!==s||e++})}else s=this})})},massEdit(){function o(e){return e.split("_").at(-1)}function s(e,t){$("#new_root_dir_"+t.whichId).val(e),$("#new_root_dir_"+t.whichId).change()}$(".new_root_dir").on("change",function(){var e=o($(this).attr("id"));$("#display_new_root_dir_"+e).html("<b>"+$(this).val()+"</b>")}),$(".edit_root_dir").on("click",function(){var e=o($(this).attr("id")),t=$("#new_root_dir_"+e).val();$(this).nFileBrowser(s,{initialDirectory:t,whichId:e})}),$(".delete_root_dir").on("click",function(){var e=o($(this).attr("id"));$("#new_root_dir_"+e).val(null),$("#display_new_root_dir_"+e).html("<b>"+_("DELETED")+"</b>")}),SICKCHILL.common.QualityChooser.init()},episodeStatuses(){$(".allCheck").on("click",function(){var e=$(this).attr("id").split("-")[1];$("."+e+"-epcheck").prop("checked",this.checked)}),$(".get_more_eps").on("click",function(){const s=$(this).attr("id"),a=$("#allCheck-"+s).is(":checked"),i=$("tr#"+s);var e=$(this).attr("data-clicked"),t=$(this).attr("value");e?"collapse"===t.toLowerCase()?($(".show-"+s).hide(),$(this).prop("value","Expand")):"expand"===t.toLowerCase()&&($(".show-"+s).show(),$(this).prop("value","Collapse")):($.getJSON(scRoot+"/manage/showEpisodeStatuses",{indexer_id:s,whichStatus:$("#oldStatus").val()},e=>{$.each(e,(o,e)=>{$.each(e,(e,t)=>{i.after($.makeEpisodeRow(s,o,e,t,a))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".deselectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})},subtitleMissed(){$(".allCheck").on("click",function(){var e=$(this).attr("id").split("-")[1];$("."+e+"-epcheck").prop("checked",this.checked)}),$(".get_more_eps").on("click",function(){const s=$(this).attr("id"),a=$("#allCheck-"+s).is(":checked"),i=$("tr#"+s);var e=$(this).attr("data-clicked"),t=$(this).attr("value");e?"Collapse"===t?($(".show-"+s).hide(),$(this).prop("value","Expand")):"Expand"===t&&($(".show-"+s).show(),$(this).prop("value","Collapse")):($.getJSON(scRoot+"/manage/showSubtitleMissed",{indexer_id:s,whichSubs:$("#selectSubLang").val()},e=>{$.each(e,(o,e)=>{$.each(e,(e,t)=>{i.after($.makeSubtitleRow(s,o,e,t.name,t.subtitles,a))})})}),$(this).attr("data-clicked",1),$(this).prop("value","Collapse"))}),$(".selectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!0}),$('input[class*="-epcheck"]').each(function(){this.checked=!0})}),$(".deselectAllShows").on("click",()=>{$(".allCheck").each(function(){this.checked=!1}),$('input[class*="-epcheck"]').each(function(){this.checked=!1})})}},history:{init(){},index(){var e;$("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],sortList:[[0,1]],textExtraction:isMeta("settings.HISTORY_LAYOUT",["detailed"])?{0(e){return $(e).find("time").attr("datetime")},2(e){return($(e).find("img").attr("alt")||"unknown").toLowerCase()},4(e){return $(e).find("span").text().toLowerCase()}}:(e={0(e){return $(e).find("time").attr("datetime")},2(e){return $(e).find("span").text().toLowerCase()}},isMeta("settings.USE_SUBTITLES",["True"])?(e[4]=function(e){return $(e).find("img").attr("title")},e[5]=function(e){return $(e).find("span").text().toLowerCase()}):e[4]=function(e){return $(e).find("span").text().toLowerCase()},e),headers:!isMeta("settings.HISTORY_LAYOUT",["detailed"])&&isMeta("settings.USE_SUBTITLES",["True"])?{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:!1},5:{sorter:"quality"},6:{sorter:!1,filter:!1}}:{0:{sorter:"realISODate"},1:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:!1,filter:!1}}}),$("#layout").on("change",function(){window.location.href=$(this).find("option:selected").val()}),$("#history_limit").on("change",function(){window.location.href=scRoot+"/history/?limit="+$(this).val()}),$("a.removehistory").on("click",()=>{const e=[];let t=0;return $(".removeCheck").each(function(){!0===this.checked&&(e.push(shiftReturn($(this).attr("id").split("-"))),t++)}),t<1||$.confirm({title:"Remove Logs",text:"You have selected to remove "+t+" download history log(s).<br /><br />This cannot be undone.<br />Are you sure you wish to continue?",confirm(){$.post(scRoot+"/history/removeHistory",{items:e},()=>{location.reload(!0)})}}),!1});for(const s of[".removeCheck"]){let o=null;$(s).on("click",function(e){if(o&&e.shiftKey){const t=this;let e=0;$(s).each(function(){if(1!==e||this.disabled){if(2===e)return!1}else this.checked=o.checked;this!==t&&this!==o||e++})}else o=this})}}},errorlogs:{init(){},index(){},viewlogs(){$("#min_level,#log_filter,#log_search").on("keyup change",__.debounce(()=>{0<$("#log_search").val().length&&($('#log_filter option[value="<NONE>"]').prop("selected",!0),$("#min_level option[value=5]").prop("selected",!0)),$("#min_level").prop("disabled",!0),$("#log_filter").prop("disabled",!0),document.body.style.cursor="wait";const t=scRoot+"/errorlogs/viewlog/";var e="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val();$.post(t,e,e=>{history.pushState("data","",t),$("pre").html($(e).find("pre").html()),$("#min_level").prop("disabled",!1),$("#log_filter").prop("disabled",!1),document.body.style.cursor="default"})},500)),function e(){var t,o;"active"===$("#log_update_toggle").data("state")&&(t="min_level="+$("select[name=min_level]").val()+"&log_filter="+$("select[name=log_filter]").val()+"&log_search="+$("#log_search").val(),o=scRoot+"/errorlogs/viewlog/",$.post(o,t,e=>{$("pre").html($(e).find("pre").html())})),setTimeout(e,500)}(),$("#log_update_toggle").on("click",function(){var e="active"===$(this).data("state");return $(this).data("state",e?"paused":"active"),$(this).find("i").toggleClass("fa-pause fa-play"),$(this).find("span").text(e?_("Resume"):_("Pause")),$(this).attr("title",e?_("Resume updating the log on this page."):_("Pause updating the log on this page.")),!1})}},schedule:{init(){$(".btn-cal-subscribe").attr("href",document.location.href.replace(/https?/,"webcal").replace(/schedule.*/,"calendar"))},index(){var e,t;isMeta("settings.COMING_EPS_LAYOUT",["list"])&&(t={date:0,show:2,network:5},t=(e=getMeta("settings.COMING_EPS_SORT"))in t?[[t[e],0]]:[[0,0]],$("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort"],sortList:t,textExtraction:{0(e){return $(e).find("time").attr("datetime")},1(e){return $(e).find("time").attr("datetime")},2(e){return latinize($(e).text().normalize("NFC"))},7(e){return $(e).find("span").text().toLowerCase()}},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:!1},9:{sorter:!1}},widgetOptions:{filter_columnFilters:!0,filter_hideFilters:!0,filter_saveFilters:!1,columnSelector_mediaquery:!1,stickyHeaders_offset:50,filter_reset:".resetsorting"}}),$(document).ajaxEpSearch()),isMeta("settings.COMING_EPS_LAYOUT",["banner","poster"])&&($(document).ajaxEpSearch(),$(".ep_summary").hide(),$(".ep_summaryTrigger").on("click",function(){$(this).next(".ep_summary").slideToggle("normal",function(){$(this).prev(".ep_summaryTrigger").attr("src",function(e,t){return $(this).next(".ep_summary").is(":visible")?t.replace("plus","minus"):t.replace("minus","plus")})})})),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$.tablesorter.columnSelector.attachTo($("#showListTable"),"#popover-target")}),$("#sort, #viewpaused, #viewsnatched, #layout").on("change",function(){window.location.href=$(this).find("option:selected").val()})}},addShows:{init(){$("#tabs").tabs({collapsible:!0,selected:metaToBool("settings.SORT_ARTICLE")?-1:0}),$.initRemoteShowGrid=function(){$("#showsort").val("original"),$("#showsortdirection").val("asc"),$("#showsort").on("change",function(){let e;switch(this.value){case"original":e="original-order";break;case"rating":$("#container").isotope({sortBy:"random"}),e="rating";break;case"rating_votes":e=["rating","votes"];break;case"votes":e="votes";break;case"rank":e="rank";break;default:e="name"}$("#container").isotope({layoutMode:"masonry",masonry:{isFitWidth:!0,horizontalOrder:!0},sortBy:e})}),$("#showsortdirection").on("change",function(){$("#container").isotope({layoutMode:"masonry",masonry:{isFitWidth:!0,horizontalOrder:!0},sortAscending:"asc"===this.value})}),$("#container").isotope({sortBy:"original-order",layoutMode:"masonry",masonry:{isFitWidth:!0,horizontalOrder:!0},getSortData:{name(e){var e=$(e).attr("data-name")||"",t=new RegExp("^((?:"+getMeta("settings.GRAMMAR_ARTICLES")+")\\s)","i");return(metaToBool("settings.SORT_ARTICLE")?e:e.replace(t,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt",rank:"[data-rank] parseInt"}})},$.loadTraktImages=function(){const t=scRoot+"/addShows/getTrendingShowImage";let o=0;$("img.trakt-image").each(function(){const e=$(this).attr("data-src-indexer-id");e?(setTimeout(()=>{$.post(t,{indexerId:e},e=>{e&&$('img.trakt-image[data-src-indexer-id="'+e+'"]').attr("src",$('img.trakt-image[data-src-indexer-id="'+e+'"]').attr("data-src-cache"))})},300+300*o),o++):$(this).attr("src",$(this).attr("data-src-cache"))})},$.fn.loadRemoteShows=function(e,t,o){$(this).html('<img id="searchingAnim" src="'+scRoot+"/images/loading32"+themeSpinner+'.gif" alt="loading" height="32" width="32" />&nbsp;'+t),$(this).load(scRoot+e+" #container",function(e,t){"error"===t?$(this).empty().html(o):($.initRemoteShowGrid(),$.loadTraktImages())})},$("#saveDefaultsButton").on("click",function(){const o=[],s=[],a=($("#anyQualities option:selected").each((e,t)=>{o.push($(t).val())}),$("#bestQualities option:selected").each((e,t)=>{s.push($(t).val())}),[]),i=[];$("#white option").each((e,t)=>{a.push($(t).val())}),$("#black option").each((e,t)=>{i.push($(t).val())}),generateBlackWhiteList(),$.post(scRoot+"/config/general/saveAddShowDefaults",{defaultStatus:$("#statusSelect").val(),anyQualities:o,bestQualities:s,defaultSeasonFolders:$("#season_folders").is(":checked"),subtitles:$("#subtitles").is(":checked"),anime:$("#anime").is(":checked"),scene:$("#scene").is(":checked"),defaultStatusAfter:$("#statusSelectAfter").val(),whitelist:a,blacklist:i}),$(this).attr("disabled",!0)}),$("#statusSelect, #qualityPreset, #season_folders, #anyQualities, #bestQualities, #subtitles, #scene, #anime, #statusSelectAfter, #white, #black").on("change",()=>{$("#saveDefaultsButton").attr("disabled",!1)}),SICKCHILL.common.QualityChooser.init()},index(){},newShow(){function t(){const t={showName:"",dir:"unknown dir.",sepChar:""};return 0<$("input:radio[name=whichSeries]:checked").length?t.showName=$("input:radio[name=whichSeries]:checked").val().split("|")[4]:0<$("input:hidden[name=whichSeries]").length&&0<$("input:hidden[name=whichSeries]").val().length&&(t.showName=$("#providedName").val()),SICKCHILL.common.updateBlackWhiteList(t.showName),0<$("#rootDirs option:selected").length?(t.dir=$("#rootDirs option:selected").val(),t.dir.includes("/")?t.sepChar="/":t.dir.includes("\\")&&(t.sepChar="\\"),t.dir.trim(t.sepChar),t.dir+=t.sepChar):$("#fullShowPath").val()&&(t.dir=$("#fullShowPath").val()),0<t.showName.length?$.post(scRoot+"/addShows/sanitizeFileName",{name:t.showName},e=>{$("#desc-show-name").text(t.showName),t.dir===$("#fullShowPath").val()?$("#desc-directory-name").html(t.dir):$("#desc-directory-name").html(t.dir+e+t.sepChar)}):($("#desc-show-name").text(t.showName),$("#desc-directory-name").html(t.dir)),$("#desc-quality-name").text($("#qualityPreset option:selected").text()),($("input:radio[name=whichSeries]:checked").val()||$("input:hidden[name=whichSeries]").val())&&($("#rootDirs option:selected").val()||$("#fullShowPath").val())?void $("#addShowButton").attr("disabled",!1):$("#addShowButton").attr("disabled",!0)}function e(){$("#blackwhitelist").toggle($("#anime").prop("checked"))}let o=null;$("#search-button").on("click",function(){var e;o&&o.abort(),$("#show-name").val()&&(e=_($("#show-name").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect option:selected").text()),$("#searchResults").empty().html('<img id="searchingAnim" src="'+scRoot+"/images/loading32"+themeSpinner+'.gif" alt="loading" height="32" width="32" /> '+_("searching {searchingFor}...").replace(/{searchingFor}/,e)),o=$.post({url:scRoot+"/addShows/searchIndexersForShowName",data:{search_term:$("#show-name").val().trim(),exact:$("#exact-match").is(":checked")?1:0,lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:1e3*Number.parseInt($("#indexer_timeout").val(),10),dataType:"json",error(){$("#searchResults").empty().html(_("search timed out, try again or try another indexer")),$(".next-steps").hide()},success(o){let e='<legend class="legendStep">#2 Pick a Show</legend>';if(0===o.results.length)e+="<b>No results found, try a different search.</b>",$(".next-steps").hide();else{const s=[];$.each(o.results,(e,t)=>{t={obj:t.join("|").replaceAll('"',""),indexer:t[0],id:t[3],title:t[4],debut:t[5],inShowList:t[6],url:anonURL+t[2]+t[3]};o.langid&&(t.url+="&lid="+o.langid),s.push(t)}),e+=function(e){let t='<div class="row"><div class="col-lg-6 col-md-12"><table class="sickchillTable new-show-table tablesorter"><thead><tr><th></th><th>Show Name</th><th>Premiere</th><th>Indexer</th></tr></thead><tbody>';var o,s=e.indexOf(e=>!e.inShowList);for(const[a,i]of e.entries())t+='<tr class="'+(i.inShowList?"in-list":"")+'"><td><input type="radio" class="whichSeries" name="whichSeries" value="'+i.obj+'" '+(s===a?"checked ":"")+(i.inShowList?"disabled":"")+"/></td><td>"+(o="<a href=",o+=i.inShowList?'"/home/displayShow?show='+i.id+'"':'"'+i.url+'" target="_blank"')+">"+i.title+"</a></td><td>"+i.debut+"</td><td>"+i.indexer+"</td></tr>";return t+="</tbody></table></div></div>"}(s),$(".next-steps").show()}$("#searchResults").html(e),t(),$(".new-show-table").tablesorter({widgets:["stickyHeaders","zebra","saveSort"],headers:{0:{sorter:!1}}})}}))}),$("#addShowButton").on("click",()=>{if(!$('input:radio[name="whichSeries"]:checked').val())return notifyModal("You must choose a show to continue"),!1;generateBlackWhiteList(),$("#addShowForm").submit()}),$("#anime").on("click",()=>{e(),t()}),$("#skipShowButton").on("click",()=>{$("#skipShow").val("1"),$("#addShowForm").submit()}),$("#rootDirText").change(t),$("#qualityPreset").change(t),$("#searchResults").on("change",".whichSeries",t),$("#show-name").on("focus keyup",e=>{13===e.keyCode&&$("#search-button").click()}),$("#show-name").val()&&$("#search-button").click(),t(),e()},addExistingShow(){function e(){let o="";$(".dir_check").each((e,t)=>{$(t).is(":checked")&&(0<o.length&&(o+="&"),o+="rootDir="+encodeURIComponent($(t).attr("id")))}),$("#tableDiv").html('<img id="searchingAnim" src="'+scRoot+'/images/loading32.gif" alt="loading" height="32" width="32" /> '+_("loading folders...")),$.post(scRoot+"/addShows/massAddTable/",o,e=>{$("#tableDiv").html(e),$("#addRootDirTable").tablesorter({widgets:["zebra"],headers:{0:{sorter:!1}}})})}$("#tableDiv").on("click","#checkAll",function(){const e=this.checked;$(".dirCheck").each(function(){this.checked=e})}),$("#submitShowDirs").on("click",()=>{const o=$("#addShowForm");let s=!1;if($(".dirCheck").each(function(){var e,t;!0===this.checked&&(e=$(this).attr("id"),t=$(this).closest("tr").find("select").val(),$("<input>",{type:"hidden",name:"shows_to_add",value:t+"|"+e}).appendTo(o),s=!0)}),!1===s)return!1;$("<input>",{type:"hidden",name:"promptForSettings",value:$("#promptForSettings").is(":checked")?"on":"off"}).appendTo(o),o.submit()});let t="";function o(){if(t===$("#rootDirText").val())return!1;t=$("#rootDirText").val(),$("#rootDirStaticList").html(""),$("#rootDirs option").each((e,t)=>{$("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+$(t).val()+'" checked=checked> <label for="'+$(t).val()+'">'+$(t).val()+"</label></li>")}),e()}o(),$("#rootDirText").on("change",o),$("#rootDirStaticList").on("click",".dir_check",e)},recommendedShows(){$("#recommendedShows").loadRemoteShows("/addShows/getRecommendedShows/","Loading recommended shows...","Trakt timed out, refresh page to try again")},trendingShows(){$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+$("#traktList").val(),"Loading trending shows...","Trakt timed out, refresh page to try again"),$("#traktlistselection").on("change",e=>{e=e.target.value;window.history.replaceState({},document.title,"?traktList="+e),$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+e,"Loading trending shows...","Trakt timed out, refresh page to try again")})},popularShows(){$.initRemoteShowGrid()}},movies:{init(){$("#movieTabs").tabs({activate(){$(".movie-grid").isotope("layout")}})},index(){function o(e){let t=0,o=0,s=0,a=0;a=e<125?(s=3,4):e<175?(t=9,o=40,s=4,5):(t=11,o=50,s=6),$("#posterPopup").remove(),void 0===t?$(".movie-details").hide():($(".movie-details").show(),$(".movie-dlstats, .movie-quality").css("fontSize",t),$(".movie-network-image").css("width",o)),$(".movie-container").css({width:e,borderWidth:a,borderRadius:s})}$(".resetsorting").on("click",()=>{$("table").trigger("filterReset")}),$("#filterMovieName").on("input",__.debounce(()=>{$(".movie-grid").isotope({filter(){return $(this).find(".movie-title").html().trim().toLowerCase().includes($("#filterShowName").val().toLowerCase())}})},500));let e;o(e="number"==typeof(e="undefined"!=typeof Storage?Number.parseInt(localStorage.getItem("posterSize"),10):e)&&!Number.isNaN(e)?e:188),$("#posterSizeSlider").slider({min:75,max:250,value:e,change(e,t){"undefined"!=typeof Storage&&localStorage.setItem("posterSize",t.value),o(t.value),$(".movie-grid").isotope("layout")}}),$("#rootDirSelect").on("change",()=>{$("#rootDirForm").submit()}),$(".progressbar").each(function(){var e=$(this).data("progress-percentage"),t=Math.max(20,e-e%20);$(this).progressbar({value:e}),$(this).data("progress-text")&&$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>"),$(this).find(".ui-progressbar-value").addClass("progress-"+t)}),$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt")),$(this).remove()})},details(){$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"}),$(this).qtip({show:{solo:!0},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})}),$.fn.generateStars=function(){return this.each((e,t)=>{$(t).html($("<span/>").width(12*$(t).text()))})},$(".imdbstars").generateStars(),$("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",()=>{$(".displayShowTable").each((e,t)=>{$.tablesorter.columnSelector.attachTo(t,"#popover-target")})})}}}),UTIL={exec(e,t){var o=SICKCHILL;t=void 0===t?"init":t,""!==e&&o[e]&&"function"==typeof o[e][t]&&o[e][t]()},init(){var e=document.body,t=e.dataset.controller,e=e.dataset.action;UTIL.exec("common"),UTIL.exec(t),UTIL.exec(t,e)}};$.getJSON(scRoot+"/ui/locale.json",{lang:getMeta("settings.GUI_LANG")},e=>{window.gt=void 0===e?new Gettext:new Gettext(e.messages),window._=function(e){return gt.gettext(e)},window._n=function(e,t,o){return gt.ngettext(e,t,o)},navigator.userAgent.includes("PhantomJS")||$(document).ready(UTIL.init)});